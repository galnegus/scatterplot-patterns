(this["webpackJsonpscatterplot-patterns"]=this["webpackJsonpscatterplot-patterns"]||[]).push([[0],{227:function(e,t,n){e.exports=n(429)},429:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(17),r=n.n(i),l=n(2),c=n(10),s=n.n(c),u=n(8),f=n(7),d=n(165),m=n(6),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.distance,a=void 0===n?1:n,o=t.target,i=void 0===o?[0,0]:o,r=t.rotation,l=void 0===r?0:r,c=t.isNdc,s=void 0===c||c,u=t.isFixed,f=void 0!==u&&u,v=t.isPan,p=void 0===v||v,h=t.panSpeed,b=void 0===h?1:h,g=t.isRotate,x=void 0===g||g,y=t.rotateSpeed,w=void 0===y?1:y,S=t.isZoom,j=void 0===S||S,E=t.zoomSpeed,O=void 0===E?1:E,C=t.onKeyDown,P=void 0===C?function(){}:C,z=t.onKeyUp,_=void 0===z?function(){}:z,k=t.onMouseDown,I=void 0===k?function(){}:k,M=t.onMouseUp,A=void 0===M?function(){}:M,L=t.onMouseMove,V=void 0===L?function(){}:L,R=t.onWheel,D=void 0===R?function(){}:R,T=Object(d.a)(i,a,l),F=!1,N=0,B=0,G=0,W=0,Y=!1,K=0,H=0,q=0,U=1,X=1,$=1,J=!1,Q=s?function(e){return e/U*2*$}:function(e){return e},Z=s?function(e){return e/X*2}:function(e){return-e},ee=s?function(e){return(e/U*2-1)*$}:function(e){return e},te=s?function(e){return 1-e/X*2}:function(e){return e},ne=function(){if(f)return!1;if(F=!1,p&&Y&&!J&&(T.pan([Q(b*(N-G)),Z(b*(W-B))]),F=!0),j&&K){var e=O*Math.exp(K/X),t=ee(N),n=te(B);T.scale(1/e,[t,n]),F=!0}if(x&&Y&&J){var a=U/2,o=X/2,i=G-a,r=o-W,l=N-a,c=o-B,s=m.b.angle([i,r],[l,c]),u=i*c-l*r;T.rotate(w*s*Math.sign(u)),F=!0}return K=0,G=N,W=B,F},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isFixed,n=void 0===t?null:t,a=e.isPan,o=void 0===a?null:a,i=e.isRotate,r=void 0===i?null:i,l=e.isZoom,c=void 0===l?null:l,s=e.panSpeed,u=void 0===s?null:s,d=e.rotateSpeed,m=void 0===d?null:d,v=e.zoomSpeed,h=void 0===v?null:v;f=null!==n?n:f,p=null!==o?o:p,x=null!==r?r:x,j=null!==c?c:j,b=+u>0?u:b,w=+m>0?m:w,O=+h>0?h:O},oe=function(){var t=e.getBoundingClientRect();H=t.top,q=t.left,U=t.width,X=t.height,$=U/X},ie=function(e){J=!1,_(e)},re=function(e){J=e.altKey,P(e)},le=function(e){Y=!1,A(e)},ce=function(e){Y=1===e.buttons,I(e)},se=function(e){N=e.clientX-q,B=e.clientY-H,V(e)},ue=function(e){e.preventDefault();var t=1===e.deltaMode?12:1;K+=t*(e.deltaY||0),D(e)},fe=function(){T=void 0,window.removeEventListener("keydown",re),window.removeEventListener("keyup",ie),e.removeEventListener("mousedown",ce),window.removeEventListener("mouseup",le),window.removeEventListener("mousemove",se),e.removeEventListener("wheel",ue)};return window.addEventListener("keydown",re,{passive:!0}),window.addEventListener("keyup",ie,{passive:!0}),e.addEventListener("mousedown",ce,{passive:!0}),window.addEventListener("mouseup",le,{passive:!0}),window.addEventListener("mousemove",se,{passive:!0}),e.addEventListener("wheel",ue,{passive:!1}),oe(),T.config=ae,T.dispose=fe,T.refresh=oe,T.tick=ne,T},p=n(176),h=n(166),b=n(115),g=n(167),x=n(88),y=n(168),w=n.n(y),S=n(175),j=n(59),E=n(171),O="precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\n\nvarying vec2 uv;\n\nvoid main () {\n  gl_FragColor = texture2D(texture, uv);\n}\n",C="precision mediump float;\n#define GLSLIFY 1\n\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\n\nattribute vec2 position;\n\nvarying vec2 uv;\n\nvoid main () {\n  uv = position;\n  gl_Position = projection * view * model * vec4(1.0 - 2.0 * position, 0, 1);\n}\n",P="#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n\nprecision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 color;\nvarying vec2 uv;\n\nvoid main() {\n  float r = 0.0, delta = 0.0, alpha = 1.0;\n  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n  r = dot(cxy, cxy);\n\n  #ifdef GL_OES_standard_derivatives\n    delta = fwidth(r);\n    alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n  #endif\n\n  // TODO: Move this out of the shader! It's totally unnecessary\n  // this can (should) be computed before, in the javascript, otherwise it has to be recomputed for every single pixel in every single point\n  // SOLUTION: make a texture, exactly like with stateTex and colorTex, with three values (min, max, aspectRatio), I think that's all we need\n  // for now just change this to send in a vec3 (min, max, aspectRatio).\n\n  // ALSO: If the color is the same for all pixels of the same point => do computation in vertex shader and pass the results as a varying variable.\n\n  // TODO: fix aspect ratio by comparing yDist and xDist and fixing the longer one (or something)\n\n  gl_FragColor = vec4(color.rgb, alpha * color.a);\n}\n",z='precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D colorTex;\nuniform float colorTexRes;\nuniform sampler2D stateTex;\nuniform float stateTexRes;\nuniform float pointSize;\nuniform float pointSizeExtra;\nuniform float numPoints;\nuniform float globalState;\nuniform float isColoredByCategory;\nuniform float isColoredByValue;\nuniform float maxColor;\nuniform float numColorStates;\nuniform float scaling;\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\n\nattribute float stateIndex;\n\nuniform sampler2D textureAtlas;\nuniform vec2 atlasSize;\n\nuniform sampler2D bboxTex;\nuniform float bboxTexRes;\n\n// variables to send to the fragment shader\nvarying vec4 color;\nvarying vec2 uv;\n\nfloat modI(float a, float b) {\n  float m = a - floor((a + 0.5) / b) * b;\n   return floor(m + 0.5);\n}\n\nvec4 getFromTexture(in sampler2D texture, in float textureRes, in float index) {\n  float eps = 0.5 / textureRes;\n  float rowIndex = floor((index + eps) / textureRes);\n  vec2 texIndex = vec2(\n    (index / textureRes) - rowIndex + eps,\n    rowIndex / textureRes\n  );\n  return texture2D(texture, texIndex);\n}\n\nvec2 texAtlasIndex(in float index, in vec2 position) {\n  float maxLength = atlasSize.x * atlasSize.y;\n  float modIndex = modI(index, maxLength);\n\n  float yIndex = floor((modIndex + 0.5) / atlasSize.x);\n  float xIndex = modI(modIndex, atlasSize.x);\n\n  float yStep = 1.0 / atlasSize.y;\n  float xStep = 1.0 / atlasSize.x;\n\n  vec2 min = vec2(xIndex * xStep, yIndex * yStep);\n  vec2 max = vec2((xIndex + 1.0) * xStep, (yIndex + 1.0) * yStep);\n\n  return position * (max - min) + min;\n}\n\nvec4 findColor(in float category) {\n  // this should be generalizable\n  vec4 bbox = getFromTexture(bboxTex, bboxTexRes, category);\n\n  vec2 min = bbox.xy;\n  vec2 max = bbox.zw;\n  vec2 normalizedPosition = (uv - min) / (max - min);\n\n  return texture2D(textureAtlas, texAtlasIndex(category, normalizedPosition));\n}\n\nvoid main() {\n  // First get the state\n  vec4 state = getFromTexture(stateTex, stateTexRes, stateIndex);\n\n  uv = state.xy;\n  gl_Position = projection * view * model * vec4(state.x, state.y, 0.0, 1.0);\n\n  // Determine color index\n  float colorIndexCat = state.z * isColoredByCategory;\n  float colorIndexVal = floor(state.w * maxColor) * isColoredByValue;\n  float colorIndex = colorIndexCat + colorIndexVal;\n  // Multiply by the number of color states per color\n  // I.e., normal, active, hover, background, etc.\n  colorIndex *= numColorStates;\n  // Half a "pixel" or "texel" in texture coordinates\n  float eps = 0.5 / colorTexRes;\n  float colorLinearIndex = colorIndex + globalState;\n  // Need to add cEps here to avoid floating point issue that can lead to\n  // dramatic changes in which color is loaded as floor(3/2.9) = 1 but\n  // floor(3/3.0001) = 0!\n  float colorRowIndex = floor((colorLinearIndex + eps) / colorTexRes);\n\n  vec2 colorTexIndex = vec2(\n    (colorLinearIndex / colorTexRes) - colorRowIndex + eps,\n    colorRowIndex / colorTexRes\n  );\n\n  //color = texture2D(colorTex, colorTexIndex);\n  color = findColor(state.z);\n\n  // The final scaling consists of linear scaling in [0, 1] and log scaling\n  // in [1, [\n  float finalScaling = min(1.0, scaling) + log2(max(1.0, scaling));\n\n  gl_PointSize = pointSize * finalScaling + pointSizeExtra;\n}\n',_=n(18),k=n(71),I=n(72),M=n(45),A=n(19),L="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform vec2 resolution;\nuniform float texAtlasIndex;\nuniform vec2 texAtlasSize;\nuniform float time;\n\nvarying vec2 posMin;\nvarying vec2 posMax;\n\nfloat modI(float a, float b) {\n  float m = a - floor((a + 0.5) / b) * b;\n  return floor(m + 0.5);\n}\n\nvoid main () {\n  float maxLength = texAtlasSize.x * texAtlasSize.y;\n  float modIndex = modI(texAtlasIndex, maxLength);\n\n  float yIndex = floor((modIndex + 0.5) / texAtlasSize.x);\n  float xIndex = modI(modIndex, texAtlasSize.x);\n\n  float yStep = 1.0 / float(texAtlasSize.y);\n  float xStep = 1.0 / float(texAtlasSize.x);\n\n  posMin = vec2(xIndex * xStep, yIndex * yStep);\n  posMax = vec2((xIndex + 1.0) * xStep, (yIndex + 1.0) * yStep);\n\n  vec2 texPos = (position + 1.0) * 0.5;\n  texPos = texPos * (posMax - posMin) + posMin;\n  texPos = texPos * 2.0 - 1.0; \n\n  gl_Position = vec4(texPos, 0, 1);\n}\n";var V={hsvColor:[.5,1,1],a:1,c1:.1,c2:.1,minValue:.2,cyclesPerSecond:1,wavesPerCycle:1,direction:1,hueVariation:.1,hueVariationPeriod:2};var R,D={hsvColor:[.8,1,1],gamma1:2,gamma2:2,maxValue:1,minValue:.2,cyclesPerSecond:1,nSpokes:2,direction:1,hueVariation:.1,hueVariationPeriod:2};var T=0,F=1,N=2,B=(R={},Object(A.a)(R,F,V),Object(A.a)(R,N,D),R),G=function(){function e(t){var n;if(Object(k.a)(this,e),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,Y,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,U,{writable:!0,value:void 0}),!t)throw new Error("PatternManager must have reference to regl object.");this.fbo=t.framebuffer({width:1e3,height:500}),this.patternDraws=(n={},Object(A.a)(n,T,function(e,t){var n=e({frag:"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 resolution;\nuniform vec4 color;\n\nvarying vec2 posMin;\nvarying vec2 posMax;\n\nvec2 normalizeFragCoords() {\n  return (gl_FragCoord.xy / (resolution) - posMin) / (posMax - posMin); \n}\n\nvoid main () {\n  vec2 normalizedFragCoord = normalizeFragCoords();\n\n  vec2 center = vec2(0.5, 0.5);\n\n  float dist = distance(normalizedFragCoord, center) * 2.0;\n  dist = pow(dist, 0.5);\n\n  gl_FragColor = vec4((1.0 - dist) * color.rgb, 1);\n}\n",vert:L,attributes:{position:e.buffer([[-1,-1],[1,-1],[-1,1],[1,-1],[-1,1],[1,1]])},uniforms:{resolution:e.prop("resolution"),texAtlasIndex:e.prop("texAtlasIndex"),texAtlasSize:e.prop("texAtlasSize"),time:e.prop("time"),color:e.prop("color")},count:6,framebuffer:t});return function(e,t,a,o,i){var r=i.color;n({resolution:[e.width,e.height],texAtlasSize:t,texAtlasIndex:a,time:.5*o%1,color:r})}}(t,this.fbo)),Object(A.a)(n,F,function(e,t){var n=e({frag:"precision mediump float;\n#define GLSLIFY 1\n\nfloat when_gt_1540259130(float x, float y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec2 when_gt_1540259130(vec2 x, vec2 y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec3 when_gt_1540259130(vec3 x, vec3 y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec4 when_gt_1540259130(vec4 x, vec4 y) {\n  return max(sign(x - y), 0.0);\n}\n\nfloat when_le_1604150559(float x, float y) {\n  return 1.0 - when_gt_1540259130(x, y);\n}\n\nvec2 when_le_1604150559(vec2 x, vec2 y) {\n  return 1.0 - when_gt_1540259130(x, y);\n}\n\nvec3 when_le_1604150559(vec3 x, vec3 y) {\n  return 1.0 - when_gt_1540259130(x, y);\n}\n\nvec4 when_le_1604150559(vec4 x, vec4 y) {\n  return 1.0 - when_gt_1540259130(x, y);\n}\n\nuniform vec3 hsvColor;\nuniform float hueVariation;\nuniform float hueVariationPeriod;\nuniform vec2 resolution;\nuniform float time;\nuniform float cyclesPerSecond;\nuniform float wavesPerCycle;\nuniform float direction;\n\nuniform float a;\nuniform float c1;\nuniform float c2;\nuniform float minValue;\n\nvarying vec2 posMin;\nvarying vec2 posMax;\n\n//  Function from I\xf1igo Quiles\n//  https://www.shadertoy.com/view/MsS3Wc\nvec3 hsv2rgb_smooth( in vec3 c ) {\n  vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n  rgb = rgb*rgb*(3.0-2.0*rgb); // cubic smoothing \n  return c.z * mix( vec3(1.0), rgb, c.y);\n}\n\n// https://stackoverflow.com/a/22400799\nfloat triangleWave(in float x, in float period) {\n  float amplitude = 1.0;\n  float halfPeriod = period / 2.0;\n  return (amplitude / halfPeriod) * (halfPeriod - abs(mod(x, period) - halfPeriod));\n}\n\nfloat gauss(in float diff) {\n  float coolDiff = diff / wavesPerCycle;\n  float c = c1 * when_gt_1540259130(coolDiff, 0.0) + c2 * when_le_1604150559(coolDiff, 0.0);\n  return a * exp(-pow(coolDiff, 2.0)/(2.0 * c * c));\n}\n\nvoid main() {\n  vec2 normalizedFragCoord = (gl_FragCoord.xy / resolution - posMin) / (posMax - posMin); \n\n  float dist = distance(normalizedFragCoord, vec2(0.5, 0.5)) * 2.0;\n\n  float scaledTime = direction * cyclesPerSecond * time;\n\n  float diff = dist - scaledTime;\n  diff = mod(diff, 1.0 / wavesPerCycle);\n\n  float newD = diff * wavesPerCycle - 0.5;\n  float leftTerm = floor(newD) / wavesPerCycle;\n  float rightTerm = ceil(newD) / wavesPerCycle;\n\n  float leftDiff = gauss(newD);\n  float rightDiff = gauss(newD);\n\n  float value = max(leftDiff, rightDiff);\n\n  value = value * (1.0 - minValue) + minValue;\n  float hue = hsvColor.x + (pow(triangleWave(time, hueVariationPeriod), 1.0) * 2.0 - 1.0) * hueVariation;\n\n  gl_FragColor = vec4(hsv2rgb_smooth(vec3(hue, hsvColor.y, value * hsvColor.z)), 1.0);\n}\n",vert:L,attributes:{position:e.buffer([[-1,-1],[1,-1],[-1,1],[1,-1],[-1,1],[1,1]])},uniforms:{resolution:e.prop("resolution"),texAtlasIndex:e.prop("texAtlasIndex"),texAtlasSize:e.prop("texAtlasSize"),time:e.prop("time"),hsvColor:e.prop("hsvColor"),a:e.prop("a"),c1:e.prop("c1"),c2:e.prop("c2"),minValue:e.prop("minValue"),cyclesPerSecond:e.prop("cyclesPerSecond"),wavesPerCycle:e.prop("wavesPerCycle"),direction:e.prop("direction"),hueVariation:e.prop("hueVariation"),hueVariationPeriod:e.prop("hueVariationPeriod")},count:6,framebuffer:t});return function(e,t,a,o,i){var r=Object(_.a)({},V,{},i),l=r.hsvColor,c=r.a,s=r.c1,u=r.c2,f=r.minValue,d=r.cyclesPerSecond,m=r.wavesPerCycle,v=r.direction,p=r.hueVariation,h=r.hueVariationPeriod;n({resolution:[e.width,e.height],texAtlasSize:t,texAtlasIndex:a,time:o,hsvColor:l,a:c,c1:s,c2:u,minValue:f,cyclesPerSecond:d,wavesPerCycle:m,direction:v,hueVariation:p,hueVariationPeriod:h})}}(t,this.fbo)),Object(A.a)(n,N,function(e,t){var n=e({frag:"precision mediump float;\n#define GLSLIFY 1\n\nfloat when_gt_1540259130(float x, float y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec2 when_gt_1540259130(vec2 x, vec2 y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec3 when_gt_1540259130(vec3 x, vec3 y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec4 when_gt_1540259130(vec4 x, vec4 y) {\n  return max(sign(x - y), 0.0);\n}\n\nfloat when_le_1604150559(float x, float y) {\n  return 1.0 - when_gt_1540259130(x, y);\n}\n\nvec2 when_le_1604150559(vec2 x, vec2 y) {\n  return 1.0 - when_gt_1540259130(x, y);\n}\n\nvec3 when_le_1604150559(vec3 x, vec3 y) {\n  return 1.0 - when_gt_1540259130(x, y);\n}\n\nvec4 when_le_1604150559(vec4 x, vec4 y) {\n  return 1.0 - when_gt_1540259130(x, y);\n}\n\nuniform vec3 hsvColor;\nuniform float hueVariation;\nuniform float hueVariationPeriod;\nuniform vec2 resolution;\nuniform float time;\n\nuniform float gamma1;\nuniform float gamma2;\nuniform float maxValue;\nuniform float minValue;\nuniform float cyclesPerSecond;\nuniform float nSpokes;\nuniform float direction;\n\nvarying vec2 posMin;\nvarying vec2 posMax;\n\nconst float PI = 3.1415926535897932384626433832795;\nconst float TAU = 6.2831853071795864769252867665590;\n\n//  Function from I\xf1igo Quiles\n//  https://www.shadertoy.com/view/MsS3Wc\nvec3 hsv2rgb_smooth( in vec3 c ) {\n  vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n  rgb = rgb*rgb*(3.0-2.0*rgb); // cubic smoothing \n  return c.z * mix( vec3(1.0), rgb, c.y);\n}\n\n// https://stackoverflow.com/a/22400799\nfloat triangleWave(in float x, in float period) {\n  float amplitude = 1.0;\n  float halfPeriod = period / 2.0;\n  return (amplitude / halfPeriod) * (halfPeriod - abs(mod(x, period) - halfPeriod));\n}\n\nfloat coolAbs(in float x) {\n  return -abs(x - 1.0) + 1.0;\n} \n\nfloat angleDifference(in float a, in float b, out float gamma) {\n  float diff1 = mod((a - b), TAU / nSpokes);\n  float diff2 = mod((b - a), TAU / nSpokes);\n\n  float d1_less_equal_d2 = when_le_1604150559(diff1, diff2);\n  float d1_greater_than_d2 = when_gt_1540259130(diff1, diff2);\n\n  gamma = d1_less_equal_d2 * gamma2 + d1_greater_than_d2 * gamma1;\n  return d1_less_equal_d2 * diff1 + d1_greater_than_d2 * diff2;\n}\n\nvoid main() {\n  vec2 normalizedFragCoord = (gl_FragCoord.xy / resolution - posMin) / (posMax - posMin);\n\n  float scaledTime = direction * time * cyclesPerSecond;\n\n  float timeAngle = scaledTime * TAU;\n\n  vec2 centerDist = normalizedFragCoord - vec2(0.5, 0.5);\n  float fragAngle = atan(centerDist.x, centerDist.y) + PI; // from [-pi, pi] to [0, 2pi]\n  float gamma;\n  float angleDist = angleDifference(fragAngle, timeAngle, gamma) * nSpokes / PI;\n\n  float value = pow(1.0 - angleDist, gamma); // gamma\n\n  value = value * (maxValue - minValue) + minValue;\n\n  float hue = hsvColor.x + (pow(triangleWave(time, hueVariationPeriod), 1.0) * 2.0 - 1.0) * hueVariation;\n\n  gl_FragColor = vec4(hsv2rgb_smooth(vec3(hue, hsvColor.y, value * hsvColor.z)), 1.0);\n}\n",vert:L,attributes:{position:e.buffer([[-1,-1],[1,-1],[-1,1],[1,-1],[-1,1],[1,1]])},uniforms:{resolution:e.prop("resolution"),texAtlasIndex:e.prop("texAtlasIndex"),texAtlasSize:e.prop("texAtlasSize"),time:e.prop("time"),hsvColor:e.prop("hsvColor"),gamma1:e.prop("gamma1"),gamma2:e.prop("gamma2"),maxValue:e.prop("maxValue"),minValue:e.prop("minValue"),cyclesPerSecond:e.prop("cyclesPerSecond"),nSpokes:e.prop("nSpokes"),direction:e.prop("direction"),hueVariation:e.prop("hueVariation"),hueVariationPeriod:e.prop("hueVariationPeriod")},count:6,framebuffer:t});return function(e,t,a,o,i){var r=Object(_.a)({},D,{},i),l=r.hsvColor,c=r.gamma1,s=r.gamma2,u=r.maxValue,f=r.minValue,d=r.cyclesPerSecond,m=r.nSpokes,v=r.direction,p=r.hueVariation,h=r.hueVariationPeriod;n({resolution:[e.width,e.height],texAtlasSize:t,texAtlasIndex:a,time:o,hsvColor:l,gamma1:c,gamma2:s,maxValue:u,minValue:f,cyclesPerSecond:d,nSpokes:m,direction:v,hueVariation:p,hueVariationPeriod:h})}}(t,this.fbo)),n),this.patterns={},this.regl=t,this.maxCategories=0,this.atlasSize=[0,0]}return Object(I.a)(e,[{key:"updateSize",value:function(){this.maxCategories=Math.max.apply(Math,Object(f.a)(Object.keys(this.patterns)))+1,this.atlasSize=[this.maxCategories,1]}},{key:"setAll",value:function(e){var t=this,n=new Set(Object.keys(this.patterns));e.forEach((function(e){n.delete(e.category.toString()),t.set(e.category,e)})),n.forEach((function(e){t.destroy(e)}))}},{key:"set",value:function(e,t){Object(j.a)(this.patterns,e)?this.patterns[e]=Object(_.a)({},this.patterns[e],{},t):this.patterns[e]=t,this.updateSize()}},{key:"destroy",value:function(e){delete this.patterns[e],this.updateSize()}},{key:"draw",value:function(e){for(var t=0;t<this.maxCategories;t+=1)Object(j.a)(this.patterns,t)&&this.patternDraws[this.patterns[t].type](this.fbo,this.atlasSize,t,e,this.patterns[t])}},{key:"clear",value:function(){this.regl.clear({color:[0,0,0,0],depth:1,framebuffer:this.fbo})}},{key:"getTexture",value:function(){return this.fbo.color[0]}},{key:"getAtlasSize",value:function(){return Object(f.a)(this.atlasSize)}}]),e}(),W=Object(M.a)("patternDraws"),Y=Object(M.a)("patterns"),K=Object(M.a)("fbo"),H=Object(M.a)("regl"),q=Object(M.a)("maxCategories"),U=Object(M.a)("atlasSize"),X=Float32Array.BYTES_PER_ELEMENT,$=["OES_standard_derivatives","OES_texture_float"],J=[0,0,0,1],Q=[[.66,.66,.66,1],[0,.55,1,1],[1,1,1,1],J],Z=[0,0],ee=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),te=[0,.666666667,1,1],ne=[1,1,1,.5],ae=n(169),oe=n.n(ae),ie=function(e,t){return e>t?e:t},re=function(e){return!!e&&$.reduce((function(t,n){return e.hasExtension(n)?t:(console.warn("WebGL: ".concat(n," extension not supported. Scatterplot might not render properly")),!1)}),!0)},le=function(e){var t=e.getContext("webgl"),n=[];return $.forEach((function(e){t.getExtension(e)?n.push(e):console.warn("WebGL: ".concat(e," extension not supported. Scatterplot might not render properly"))})),oe()({gl:t,extensions:n})},ce=function(e,t,n,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-a,2))},se=function(e){for(var t=1/0,n=-1/0,a=1/0,o=-1/0,i=0;i<e.length;i+=2)t=e[i]<t?e[i]:t,n=e[i]>n?e[i]:n,a=e[i+1]<a?e[i+1]:a,o=e[i+1]>o?e[i+1]:o;return[t,a,n,o]},ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,a){return"#".concat(t).concat(t).concat(n).concat(n).concat(a).concat(a)})).substring(1).match(/.{2}/g).map((function(e){return parseInt(e,16)/Math.pow(255,t)}))},fe=function(e){return e>=0&&e<=1},de=function(e){return Array.isArray(e)&&e.every(fe)},me=function(){for(var e,t,n,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=Object(l.a)(o,2),r=i[0],c=i[1],s=arguments.length>1?arguments[1]:void 0,u=!1,f=0,d=s.length-2;f<s.length;f+=2)e=s[f],t=s[f+1],n=s[d],t>c!==(a=s[d+1])>c&&r<(n-e)*(c-t)/(a-t)+e&&(u=!u),d=f;return u},ve=function(e){return Number.isInteger(e)&&e>=0&&e<=255},pe=function(e){return Array.isArray(e)&&e.every(ve)},he=function(e){return 3===e.length&&(de(e)||pe(e))},be=function(e){return 4===e.length&&(de(e)||pe(e))},ge=function(e,t){return e>t?e:t},xe=function(e,t){return e<t?e:t},ye=function(e){return e.map((function(t){return t/e.reduce(ie,-1/0)}))},we=function(e,t){return be(e)?t&&!de(e)?ye(e):e:he(e)?[].concat(Object(f.a)(t?ye(e):e),[Math.pow(255,!t)]):/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)?function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[].concat(Object(f.a)(ue(e,t)),[Math.pow(255,!t)])}(e,t):(console.warn("Only HEX, RGB, and RGBA are handled by this function. Returning white instead."),t?[1,1,1,1]:[255,255,255,255])},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.regl,n=e.background,a=void 0===n?J:n,o=e.backgroundImage,i=void 0===o?null:o,r=e.canvas,c=void 0===r?document.createElement("canvas"):r,s=e.colorBy,u=void 0===s?null:s,d=e.colors,y=void 0===d?Q:d,_=e.lassoColor,k=void 0===_?te:_,I=e.lassoMinDelay,M=void 0===I?10:I,A=e.lassoMinDist,L=void 0===A?3:A,V=e.showRecticle,R=void 0!==V&&V,D=e.recticleColor,F=void 0===D?ne:D,N=e.pointSize,B=void 0===N?6:N,W=e.pointSizeSelected,Y=void 0===W?2:W,K=e.pointOutlineWidth,H=void 0===K?2:K,q=e.width,U=void 0===q?100:q,$=e.height,ae=void 0===$?100:$,oe=e.target,ie=void 0===oe?Z:oe,ue=e.distance,fe=void 0===ue?1:ue,de=e.rotation,ve=void 0===de?0:de,pe=e.view,ye=void 0===pe?ee:pe,Se=Object(h.a)(),je=new Float32Array(16),Ee=[0,0];re(t);var Oe,Ce,Pe,ze,_e,ke,Ie,Me,Ae,Le,Ve,Re,De,Te,Fe,Ne,Be,Ge=we(a,!0),We=i,Ye=c,Ke=y,He=U,qe=ae,Ue=B,Xe=Y,$e=H,Je=t||le(c),Qe=!1,Ze=!1,et=[0,0],tt=0,nt=[],at=we(k,!0),ot=+M,it=+L,rt=[],lt=[],ct=1,st=R,ut=we(F,!0),ft=0,dt=0,mt=u,vt=!1,pt=!1,ht=1,bt=!1,gt=0,xt=new G(Je);xt.set(0,{type:T,color:[.2,1,.5,1]});var yt=function(){return Ee.slice()},wt=function(e){return e/He*2-1},St=function(e){return 1+e/qe*-2},jt=function(){return[wt(Ee[0]),St(Ee[1])]},Et=function(){var e=jt(),t=Object(l.a)(e,2),n=[t[0],t[1],1,1],a=m.a.invert(je,m.a.multiply(je,ke,m.a.multiply(je,Oe.view,Ie)));return m.c.transformMat4(n,n,a),n.slice(0,2)},Ot=function(){var e,t=Et(),n=Object(l.a)(t,2),a=n[0],o=n[1],i=Oe.scaling,r=2*Ue*(xe(1,i)+Math.log2(ge(1,i)))*window.devicePixelRatio,c=r/He,s=r/qe,u=ze.range(a-c,o-s,a+c,o+s),f=r;return u.forEach((function(t){var n=Object(l.a)(ze.points[t],2),i=n[0],r=n[1],c=ce(i,r,a,o);c<f&&(f=c,e=t)})),f<Ue/He*2?e:-1},Ct=function(){var e,t,n=yt();Pe?ce.apply(void 0,Object(f.a)(n).concat(Object(f.a)(Pe)))>it&&((e=rt).push.apply(e,Object(f.a)(jt(n))),(t=lt).push.apply(t,Object(f.a)(Et(n))),Pe=n,rt.length>2&&Ce.setPoints(rt)):(rt=Object(f.a)(jt(n)),lt=Object(f.a)(Et(n)),Pe=n)},Pt=Object(b.a)(Ct,ot),zt=function(e){var t,n=se(e),a=(t=ze).range.apply(t,Object(f.a)(n)),o=[];return a.forEach((function(t){me(ze.points[t],e)&&o.push(t)})),o},_t=function(){nt.length&&(Se.publish("deselect"),nt=[])},kt=function(e){nt=e,Re({usage:"dynamic",type:"float",data:new Float32Array(nt)}),Se.publish("select",{points:nt})},It=function(e){var t=Ye.getBoundingClientRect();return Ee[0]=e.clientX-t.left,Ee[1]=e.clientY-t.top,[].concat(Ee)},Mt=function(){var e=zt(lt);kt(e),rt=[],lt=[],Pe=void 0,Ce.clear()},At=function(e){pt&&(Qe=!0,et=It(e),(Ze=e.shiftKey)&&(Oe.config({isFixed:!0}),Pe=void 0))},Lt=function(){pt&&(Qe=!1,Ze&&(Ze=!1,Oe.config({isFixed:!1}),Mt()))},Vt=function(e){if(pt){var t=It(e);if(!(ce.apply(void 0,Object(f.a)(t).concat(Object(f.a)(et)))>=3)){var n=Ot();n>=0&&kt([n])}}},Rt=function(){_t()},Dt=function(e){if(pt){if(It(e),bt&&!Ze){var t=Ot();Kn(t)}Ze&&Pt()}},Tt=function(){pt&&(Fe=void 0,bt=!1,Lt())},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=e.length;dt=Math.max(2,Math.ceil(Math.sqrt(t)));var n=new Float32Array(4*Math.pow(dt,2));return e.forEach((function(e,t){n[4*t]=e[0],n[4*t+1]=e[1],n[4*t+2]=e[2],n[4*t+3]=t%4>0||1===ht?e[3]:ht})),Je.texture({data:n,shape:[dt,dt,4],type:"float"})},Nt=function(){_e=He/qe,ke=m.a.fromScaling([],[1/_e,1,1]),Ie=m.a.fromScaling([],[ct,1,1])},Bt=function(e){+e<=0||(ct=e)},Gt=function(e){if(e&&e.length){var t=[];try{e.forEach((function(e){if(!Array.isArray(e)||he(e)||be(e)){var n=we(e,!0),a=[].concat(Object(f.a)(n.slice(0,3)),[1]);t.push(n,a,a)}else for(var o=0;o<3;o++)t.push(we(e[o],!0));t.push(Ge)}))}catch(n){console.error(n,"Invalid format. Please specify an array of colors or a nested array of accents per colors.")}Ke=t;try{Te=Ft()}catch(n){Ke=Q,Te=Ft(),console.error("Invalid colors. Switching back to default colors.")}}},Wt=function(e){!+e||+e<=0||(qe=+e,Ye.height=qe*window.devicePixelRatio)},Yt=function(e){!+e||+e<=0||(Ue=+e)},Kt=function(e){!+e||+e<0||(Xe=+e)},Ht=function(e){!+e||+e<0||($e=+e)},qt=function(e){!+e||+e<=0||(He=+e,Ye.width=He*window.devicePixelRatio)},Ut=function(e){switch(e){case"category":mt="category";break;case"value":mt="value";break;default:mt=null}},Xt=function(e){!+e||+e<=0||(ht=+e,Te=Ft())},$t=function(){return We},Jt=function(){return Te},Qt=function(){return dt},Zt=function(){return Ve},en=function(){return Re},tn=function(){return Ue*window.devicePixelRatio},nn=function(){return 0},an=function(){return Le},on=function(){return ft},rn=function(){return ke},ln=function(){return Oe.view},cn=function(){return Ie},sn=function(){return Oe.scaling},un=function(){return tt},fn=function(){return 1*("category"===mt)},dn=function(){return 1*("value"===mt)},mn=function(){return Ke.length/4-1},vn=function(){return 4},pn=function(){return xt.getTexture()},hn=function(){return xt.getAtlasSize()},bn=function(){return Ne},gn=function(){return gt},xn=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Je({frag:P,vert:z,blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:!1},attributes:{stateIndex:{buffer:n,size:1}},uniforms:{projection:rn,model:cn,view:ln,scaling:sn,pointSize:tn,pointSizeExtra:e,globalState:a,colorTex:Jt,colorTexRes:Qt,stateTex:an,stateTexRes:on,isColoredByCategory:fn,isColoredByValue:dn,maxColor:mn,numColorStates:vn,textureAtlas:pn,atlasSize:hn,bboxTex:bn,bboxTexRes:gn},count:t,primitive:"points"})},yn=xn(nn,un,Zt),wn=xn(nn,(function(){return 1}),(function(){return De}),2),Sn=function(){var e=nt.length;xn((function(){return(Xe+2*$e)*window.devicePixelRatio}),(function(){return e}),en,1)(),xn((function(){return(Xe+$e)*window.devicePixelRatio}),(function(){return e}),en,3)(),xn((function(){return Xe}),(function(){return e}),en,1)()},jn=Je({frag:O,vert:C,attributes:{position:[0,1,0,0,1,0,0,1,1,1,1,0]},uniforms:{projection:rn,model:cn,view:ln,texture:$t},count:6}),En=function(){if(Fe>=0){var e=ze.points[Fe].slice(0,2),t=Object(l.a)(e,2),n=[t[0],t[1],0,1];m.a.multiply(je,ke,m.a.multiply(je,Oe.view,Ie)),m.c.transformMat4(n,n,je),Me.setPoints([-1,n[1],1,n[1]]),Ae.setPoints([n[0],1,n[0],-1]),Me.draw(),Ae.draw(),xn((function(){return(Xe+2*$e)*window.devicePixelRatio}),(function(){return 1}),De,1)(),xn((function(){return(Xe+$e)*window.devicePixelRatio}),(function(){return 1}),De,3)()}},On=function(e){for(var t=new Float32Array(e),n=0;n<e;++n)t[n]=n;return t},Cn=function(e){var t=e.length;ft=Math.max(2,Math.ceil(Math.sqrt(t)));for(var n=new Float32Array(4*Math.pow(ft,2)),a=0;a<t;++a)n[4*a]=e[a][0],n[4*a+1]=e[a][1],n[4*a+2]=e[a][2]||0,n[4*a+3]=e[a][3]||0;return Je.texture({data:n,shape:[ft,ft,4],type:"float"})},Pn=function(e){var t=Math.max.apply(Math,Object(f.a)(Object.keys(e)))+1;gt=Math.max(2,Math.ceil(Math.sqrt(t)));for(var n=new Float32Array(4*Math.pow(gt,2)),a=0;a<t;a+=1)Object(j.a)(e,a)?(n[4*a]=e[a][0],n[4*a+1]=e[a][1],n[4*a+2]=e[a][2],n[4*a+3]=e[a][3]):(n[4*a]=0,n[4*a+1]=0,n[4*a+2]=0,n[4*a+3]=0);return Je.texture({data:n,shape:[gt,gt,4],type:"float"})},zn=function(e){var t=0,n=0;return e.forEach((function(e){t+=e[0],n+=e[1]})),[t/e.length,n/e.length]},_n=function(e){var t=zn(e),n=0;e.forEach((function(e){var a=Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2);a>n&&(n=a)}));var a=Math.sqrt(n);return[t[0]-a,t[1]-a,t[0]+a,t[1]+a]},kn=function(e){pt=!1,tt=e.length,Le=Cn(e),Ve({usage:"static",type:"float",data:On(tt)}),ze=new p.a(e,(function(e){return e[0]}),(function(e){return e[1]}),16);var t=Object(S.a)(e,2),n=Object(E.a)(t,(function(e,n){return _n(t[n])}));Ne=Pn(n),pt=!0},In=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];pt&&(Je.clear({color:[0,0,0,0],depth:1}),xt.clear(),vt=Oe.tick(),We&&jn(),xt.draw(e),yn(),Qe||!st&&!t||En(),Fe>=0&&wn(),nt.length&&Sn(),Ce.draw(),vt&&Se.publish("view",Oe.view))},Mn=Object(g.a)(In),An=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&kn(e)},Ln=function(e){return function(){var t=e.apply(void 0,arguments);return Mn(),t}},Vn=function(e){e&&(Ge=we(e,!0))},Rn=function(e){We=e||null},Dn=function(e){e&&(at=we(e,!0),Ce.setStyle({color:at}))},Tn=function(e){+e&&(ot=+e,Pt=Object(b.a)(Ct,ot))},Fn=function(e){+e&&(it=+e)},Nn=function(e){null!==e&&(st=e)},Bn=function(e){e&&(ut=we(e,!0),Me.setStyle({color:ut}),Ae.setStyle({color:ut}))},Gn=function(){Je.poll(),Oe.refresh()},Wn=function(e){return"background"===e?Ge:"backgroundImage"===e?We:"colorBy"===e?mt:"colors"===e?Ke:"lassoColor"===e?at:"showRecticle"===e?st:"recticleColor"===e?ut:"opacity"===e?ht:"pointOutlineWidth"===e?$e:"pointSize"===e?Ue:"pointSizeSelected"===e?Xe:"width"===e?He:"height"===e?qe:"aspectRatio"===e?ct:"canvas"===e?Ye:"regl"===e?Je:"version"===e?"0.7.5":void 0},Yn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.background,n=void 0===t?null:t,a=e.backgroundImage,o=void 0===a?We:a,i=e.colorBy,r=void 0===i?mt:i,l=e.colors,c=void 0===l?null:l,s=e.opacity,u=void 0===s?null:s,f=e.lassoColor,d=void 0===f?null:f,m=e.lassoMinDelay,v=void 0===m?null:m,p=e.lassoMinDist,h=void 0===p?null:p,b=e.showRecticle,g=void 0===b?null:b,x=e.recticleColor,y=void 0===x?null:x,w=e.pointOutlineWidth,S=void 0===w?null:w,j=e.pointSize,E=void 0===j?null:j,O=e.pointSizeSelected,C=void 0===O?null:O,P=e.height,z=void 0===P?null:P,_=e.width,k=void 0===_?null:_,I=e.aspectRatio,M=void 0===I?null:I;Vn(n),Rn(o),Ut(r),Gt(c),Xt(u),Dn(d),Tn(v),Fn(h),Nn(g),Bn(y),Ht(S),Yt(E),Kt(C),Wt(z),qt(k),Bt(M),Nt(),Oe.refresh(),Gn()},Kn=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=!1;if(e>=0){t=!0;var n=e!==Fe;Fe=e,De.subdata([e]),n&&Se.publish("pointover",Fe)}else t=Fe,Fe=void 0,+t>=0&&Se.publish("pointout",t)},Hn=function(){ye?Oe.set(m.a.clone(ye)):Oe.lookAt(Object(f.a)(ie),fe,ve),Se.publish("view",Oe.view)},qn=function(e){switch(e.key){case"Escape":_t()}},Un=function(){bt=!0},Xn=function(){Kn(),bt=!1},$n=function(){Oe=v(Ye),ye?Oe.set(m.a.clone(ye)):Oe.lookAt(Object(f.a)(ie),fe,ve)},Jn=function(){},Qn=function(){kn([])},Zn=function(){Nt(),$n(),Ce=Object(x.a)(Je,{color:at,width:3,is2d:!0}),Me=Object(x.a)(Je,{color:ut,width:1,is2d:!0}),Ae=Object(x.a)(Je,{color:ut,width:1,is2d:!0}),Ye.addEventListener("wheel",Jn),Ve=Je.buffer(),Re=Je.buffer(),De=Je.buffer({usage:"dynamic",type:"float",length:X}),Te=Ft(),Yn({width:He,height:qe}),window.addEventListener("keyup",qn,!1),window.addEventListener("blur",Tt,!1),window.addEventListener("mousedown",At,!1),window.addEventListener("mouseup",Lt,!1),window.addEventListener("mousemove",Dt,!1),Ye.addEventListener("mouseenter",Un,!1),Ye.addEventListener("mouseleave",Xn,!1),Ye.addEventListener("click",Vt,!1),Ye.addEventListener("dblclick",Rt,!1);var e=Ye.getContext("webgl")||Ye.getContext("experimental-webgl");Be=new w.a(e),Je.frame((function(e){var t=e.time;Be.begin(),In(t),Be.end(),Be.nextFrame(Math.floor(1e3*t))}))},ea=function(){window.removeEventListener("keyup",qn,!1),window.removeEventListener("blur",Tt,!1),window.removeEventListener("mousedown",At,!1),window.removeEventListener("mouseup",Lt,!1),window.removeEventListener("mousemove",Dt,!1),Ye.removeEventListener("mouseenter",Un,!1),Ye.removeEventListener("mouseleave",Xn,!1),Ye.removeEventListener("click",Vt,!1),Ye.removeEventListener("dblclick",Rt,!1),Ye=void 0,Oe=void 0,Je=void 0,Ce.destroy(),Se.clear()};return Zn(Ye),{clear:Ln(Qn),deselect:_t,destroy:ea,draw:An,get:Wn,hover:Kn,refresh:Gn,reset:Ln(Hn),select:kt,set:Yn,subscribe:Se.subscribe,unsubscribe:Se.unsubscribe,patternManager:xt}},je=n(432),Ee=n(57),Oe=5,Ce=n(26),Pe=n(49),ze=Object(Ce.a)((function(e,t,n){return e(Object(A.a)({},t,n))}),100);function _e(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=Object(a.useState)(t),r=Object(l.a)(i,2),c=r[0],s=r[1],u=function(t){Object(Pe.a)(o)&&(t=o(t)),s(t),ze(n,e,t)};return[c,u]}function ke(e){var t=e.scatterplot,n=_e("pointSize",Oe,t&&t.set),a=Object(l.a)(n,2),i=a[0],r=a[1],c=Object(u.d)((function(e){return e.isDarkTheme})),s=Object(u.c)();return o.a.createElement("div",null,o.a.createElement(je.d,null),o.a.createElement(je.e,null,o.a.createElement(je.h,{defaultChecked:c,label:"Dark theme",onChange:function(){return s({type:"toggle theme"})},innerLabel:"no",innerLabelChecked:"yes",alignIndicator:Ee.a.RIGHT})),o.a.createElement(je.e,{label:"Point size",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:10,labelStepSize:10,labelPrecision:1,value:i,onChange:r,fill:!0})),o.a.createElement(je.d,null),o.a.createElement("p",{style:{textAlign:"center"}},o.a.createElement("b",null,"Note: "),o.a.createElement("span",{className:"bp3-text-muted"},"Each slider has a 100ms debounce to avoid clogging the system.")))}var Ie=n(85),Me=n(82),Ae=n(39);function Le(e,t,n,a,o){var i,r,l=2*Math.PI;do{i=Math.random(),r=Math.random()}while(i<=Number.EPSILON);var c=l*r,s=Math.sqrt(-2*Math.log(i)),u=s*Math.cos(c),f=s*Math.sin(c),d=Math.cos(a),m=Math.sin(a),v=d*m*(o-1);return[(u=(o*Math.pow(d,2)+Math.pow(m,2))*u+v*f)*n+e,(f=v*u+(Math.pow(d,2)+o*Math.pow(m,2))*f)*n+t]}function Ve(e){var t=e.clusterKey,n=e.category,a=e.setIsOpen,i=e.isOpen,r=Object(u.d)((function(e){return e.categoryColors}),u.b);return o.a.createElement(je.a,{className:"cluster-button",minimal:!0,fill:!0,active:i,onClick:function(){return a(!i)}},o.a.createElement("div",{className:"jsx-3670062821 cluster-header"},o.a.createElement("div",{className:"jsx-3670062821 cluster-title"},o.a.createElement("b",{className:"jsx-3670062821"},"Cluster: ")," #",t),o.a.createElement("div",{className:"jsx-3670062821 cluster-category"},o.a.createElement("div",{style:{backgroundColor:r[n]},className:"jsx-3670062821 cluster-category__color-box"})),o.a.createElement(s.a,{id:"1811696610"},[".cluster-button .bp3-button-text{width:100%;}"]),o.a.createElement(s.a,{id:"1213808302"},[".cluster-header.jsx-3670062821{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}",".cluster-title.jsx-3670062821{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".cluster-category__color-box.jsx-3670062821{float:left;width:20px;height:20px;margin:5px;border:1px solid rgba(0,0,0,.2);}"])))}var Re=Object(Ce.a)((function(e,t){return e({x:t})}),500),De=Object(Ce.a)((function(e,t){return e({y:t})}),500),Te=Object(Ce.a)((function(e,t){return e({sigma:t})}),500),Fe=Object(Ce.a)((function(e,t){return e({angle:t})}),500),Ne=Object(Ce.a)((function(e,t){return e({amplitude:t})}),500),Be=Object(Ce.a)((function(e,t){return e({n:t})}),500),Ge=Object(Ce.a)((function(e,t){return e({category:t})}),500);function We(e){var t=e.clusterKey,n=e.cluster,i=e.setCluster,r=e.removeCluster,c=Object(a.useState)(n.x),u=Object(l.a)(c,2),f=u[0],d=u[1],m=Object(a.useState)(n.y),v=Object(l.a)(m,2),p=v[0],h=v[1],b=Object(a.useState)(n.sigma),g=Object(l.a)(b,2),x=g[0],y=g[1],w=Object(a.useState)(n.angle),S=Object(l.a)(w,2),j=S[0],E=S[1],O=Object(a.useState)(n.amplitude),C=Object(l.a)(O,2),P=C[0],z=C[1],_=Object(a.useState)(n.n),k=Object(l.a)(_,2),I=k[0],M=k[1],A=Object(a.useState)(n.category),L=Object(l.a)(A,2),V=L[0],R=L[1],D=Object(a.useState)(!1),T=Object(l.a)(D,2),F=T[0],N=T[1];return o.a.createElement("div",{className:"jsx-2347825890"},o.a.createElement(Ve,{clusterKey:t,category:V,setIsOpen:N,isOpen:F}),o.a.createElement(je.c,{isOpen:F},o.a.createElement(je.e,{label:"X-pos",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:-1,max:1,labelPrecision:1,labelStepSize:2,value:f,onChange:function(e){d(e),Re(i,e)},fill:!0})),o.a.createElement(je.e,{label:"Y-pos",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:-1,max:1,labelPrecision:1,labelStepSize:2,value:p,onChange:function(e){h(e),De(i,e)},fill:!0})),o.a.createElement(je.e,{label:"Std. Dev.",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:.8,labelPrecision:1,labelStepSize:.8,value:x,onChange:function(e){y(e),Te(i,e)},fill:!0})),o.a.createElement(je.e,{label:"Angle",inline:!0},o.a.createElement(je.g,{stepSize:.03,min:0,max:Math.PI,labelPrecision:1,labelStepSize:Math.PI,value:j,onChange:function(e){E(e),Fe(i,e)},fill:!0})),o.a.createElement(je.e,{label:"Amplitude",inline:!0},o.a.createElement(je.g,{stepSize:.03,min:0,max:3,labelPrecision:1,labelStepSize:3,value:P,onChange:function(e){z(e),Ne(i,e)},fill:!0})),o.a.createElement(je.e,{label:"Points",inline:!0},o.a.createElement(je.g,{stepSize:10,min:1,max:1e4,labelStepSize:9999,value:I,onChange:function(e){M(e),Be(i,e)},fill:!0})),o.a.createElement(je.e,{label:"Category",inline:!0},o.a.createElement(je.g,{stepSize:1,min:0,max:9,labelStepSize:9,value:V,onChange:function(e){R(e),Ge(i,e)},fill:!0})),o.a.createElement("div",{className:"jsx-2347825890 cluster-remove"},o.a.createElement(je.a,{intent:Ae.a.DANGER,onClick:function(){return r(t)}},"Remove this cluster")),o.a.createElement(je.d,null)),o.a.createElement(s.a,{id:"2347825890"},[".cluster-remove.jsx-2347825890{margin:10px 0;text-align:center;}"]))}var Ye=function(e){if(e>9)throw new Error("There are at most 10 categories!");var t=Math.random()/3+.1,n=1-2*t-.2;return{x:Math.random()*n*2-n,y:Math.random()*n*2-n,sigma:t,angle:Math.random()*Math.PI,amplitude:Math.random(),n:100,category:e}},Ke=function(){var e=3;return function(){return e++}}();function He(e){var t=e.scatterplot,n=Object(a.useState)({1:Ye(0),2:Ye(1)}),i=Object(l.a)(n,2),r=i[0],c=i[1],d=Object(u.c)();Object(a.useEffect)((function(){null!==t&&(t.draw(Object.keys(r).map((function(e){return function(e){for(var t=e.x,n=void 0===t?0:t,a=e.y,o=void 0===a?0:a,i=e.sigma,r=e.angle,l=void 0===r?0:r,c=e.amplitude,s=void 0===c?2:c,u=e.n,d=e.category,m=[],v=0;v<u;++v)m.push([].concat(Object(f.a)(Le(n,o,i,l,s)),[d,0]));return m}(r[e])})).reduce((function(e,t){return e.concat(t)}),[])),d({type:"set max categories",value:Math.max.apply(Math,Object(f.a)(Object.keys(r).map((function(e){return r[e].category}))))+1}))}),[t,r]);var m=function(e){return function(t){c((function(n){return Object(_.a)({},n,Object(A.a)({},e,Object(_.a)({},n[e],{},t)))}))}},v=function(e){return c((function(t){t[e];return Object(Ie.a)(t,[e].map(Me.a))}))},p=Object.keys(r).map((function(e){return o.a.createElement(We,{key:e,clusterKey:e,cluster:r[e],setCluster:m(e),removeCluster:v})}));return o.a.createElement("div",{className:"jsx-4110324435"},o.a.createElement(je.d,null),o.a.createElement("p",{style:{textAlign:"center"},className:"jsx-4110324435 bp3-text-muted"},"Click on a cluster to show/hide options."),p,o.a.createElement("div",{className:"jsx-4110324435 data-add-new"},o.a.createElement(je.a,{intent:Ae.a.PRIMARY,onClick:function(){return e=function(){var e=new Set;Object.keys(r).forEach((function(t){return e.add(r[t].category)}));for(var t=0;t<10;++t)if(!e.has(t))return t;return 0}(),c((function(t){return Object(_.a)({},t,Object(A.a)({},Ke(),Ye(e)))}));var e}},"Add cluster")),o.a.createElement(s.a,{id:"4110324435"},[".data-add-new.jsx-4110324435{margin:10px 0;text-align:center;}"]))}var qe=n(112),Ue=n.n(qe);function Xe(e){var t=e.patternKey,n=e.category,a=e.setIsOpen,i=e.isOpen,r=Object(u.d)((function(e){return e.categoryColors}),u.b);return o.a.createElement(je.a,{className:"pattern-button",minimal:!0,fill:!0,active:i,onClick:function(){return a(!i)}},o.a.createElement("div",{className:"jsx-542388820 pattern-header"},o.a.createElement("div",{className:"jsx-542388820 pattern-title"},o.a.createElement("b",{className:"jsx-542388820"},"Pattern: ")," #",t),o.a.createElement("div",{className:"jsx-542388820 pattern-category"},o.a.createElement("div",{style:{backgroundColor:r[n]},className:"jsx-542388820 pattern-category__color-box"})),o.a.createElement(s.a,{id:"927492146"},[".pattern-button .bp3-button-text{width:100%;}"]),o.a.createElement(s.a,{id:"3486257967"},[".pattern-header.jsx-542388820{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}",".pattern-title.jsx-542388820{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".pattern-category__color-box.jsx-542388820{float:left;width:20px;height:20px;margin:5px;border:1px solid rgba(0,0,0,.2);}"])))}var $e=n(78),Je=["#DB2C6F","#2965CC","#29A634","#D99E0B","#D13913","#8F398F","#00B3A4","#9BBF30","#96622D","#7157D9"];function Qe(e,t){var n=Object(u.c)(),o=Object(u.d)((function(e){return e.categoryColors}),u.b),i=Object(a.useState)(o[e.category]),r=Object(l.a)(i,2),c=r[0],s=r[1];return[c,function(a){t({hsvColor:[a.hsv.h/360,a.hsv.s,a.hsv.v]}),n(function(e,t){return{type:"update category color",category:e,color:t}}(e.category,a.hex)),s(a.hex)}]}function Ze(e){return"".concat(Math.round(100*e),"%")}function et(e){return"".concat(e.toPrecision(2),"s")}function tt(e){var t=e.pattern,n=e.setPattern,a=_e("a",t.a,n),i=Object(l.a)(a,2),r=i[0],c=i[1],s=_e("c1",t.c1,n),u=Object(l.a)(s,2),f=u[0],d=u[1],m=_e("c2",t.c2,n),v=Object(l.a)(m,2),p=v[0],h=v[1],b=_e("minValue",t.minValue,n),g=Object(l.a)(b,2),x=g[0],y=g[1],w=_e("cyclesPerSecond",t.cyclesPerSecond,n),S=Object(l.a)(w,2),j=S[0],E=S[1],O=_e("wavesPerCycle",t.wavesPerCycle,n),C=Object(l.a)(O,2),P=C[0],z=C[1],_=Qe(t,n),k=Object(l.a)(_,2),I=k[0],M=k[1],A=_e("hueVariation",t.hueVariation,n),L=Object(l.a)(A,2),V=L[0],R=L[1],D=_e("hueVariationPeriod",t.hueVariationPeriod,n),T=Object(l.a)(D,2),F=T[0],N=T[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(je.e,null,o.a.createElement(je.h,{defaultChecked:1===t.direction,label:"Direction",onChange:function(e){return n({direction:e.target.checked?1:-1})},innerLabel:"In",innerLabelChecked:"Out",alignIndicator:Ee.a.RIGHT})),o.a.createElement(je.e,{label:"a",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:1,labelPrecision:2,labelStepSize:1,value:r,onChange:c,fill:!0})),o.a.createElement(je.e,{label:"c1",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:1,labelPrecision:2,labelStepSize:1,value:f,onChange:d,fill:!0})),o.a.createElement(je.e,{label:"c2",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:1,labelPrecision:2,labelStepSize:1,value:p,onChange:h,fill:!0})),o.a.createElement(je.e,{label:"Min value",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:1,labelStepSize:1,labelRenderer:Ze,value:x,onChange:y,fill:!0})),o.a.createElement(je.e,{label:"Cycles/s",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:5,labelPrecision:1,labelStepSize:5,value:j,onChange:E,fill:!0})),o.a.createElement(je.e,{label:"Waves/cycle",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:5,labelPrecision:1,labelStepSize:5,value:P,onChange:z,fill:!0})),o.a.createElement(je.e,{label:"Color",inline:!0},o.a.createElement($e.CirclePicker,{color:I,colors:Je,onChange:M,circleSize:14,circleSpacing:1,width:150})),o.a.createElement(je.e,{label:"Hue amp.",inline:!0},o.a.createElement(je.g,{stepSize:.005,min:0,max:.2,labelPrecision:2,labelStepSize:.2,labelRenderer:Ze,value:V,onChange:R,fill:!0})),o.a.createElement(je.e,{label:"Hue period",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:5,labelStepSize:5,labelRenderer:et,value:F,onChange:N,fill:!0})))}function nt(e){return"".concat(Math.round(100*e),"%")}function at(e){return"".concat(e.toPrecision(2),"s")}function ot(e){var t=e.pattern,n=e.setPattern,a=_e("gamma1",t.gamma1,n),i=Object(l.a)(a,2),r=i[0],c=i[1],s=_e("gamma2",t.gamma2,n),u=Object(l.a)(s,2),f=u[0],d=u[1],m=_e("maxValue",t.maxValue,n),v=Object(l.a)(m,2),p=v[0],h=v[1],b=_e("minValue",t.minValue,n),g=Object(l.a)(b,2),x=g[0],y=g[1],w=_e("cyclesPerSecond",t.cyclesPerSecond,n),S=Object(l.a)(w,2),j=S[0],E=S[1],O=_e("nSpokes",t.nSpokes,n),C=Object(l.a)(O,2),P=C[0],z=C[1],_=Qe(t,n),k=Object(l.a)(_,2),I=k[0],M=k[1],A=_e("hueVariation",t.hueVariation,n),L=Object(l.a)(A,2),V=L[0],R=L[1],D=_e("hueVariationPeriod",t.hueVariationPeriod,n),T=Object(l.a)(D,2),F=T[0],N=T[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(je.e,null,o.a.createElement(je.h,{defaultChecked:1===t.direction,label:"Direction",onChange:function(e){return n({direction:e.target.checked?1:-1})},innerLabel:"Counter-clockwise",innerLabelChecked:"Clockwise",alignIndicator:Ee.a.RIGHT})),o.a.createElement(je.e,{label:"gamma1",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:25,labelPrecision:1,labelStepSize:25,value:r,onChange:c,fill:!0})),o.a.createElement(je.e,{label:"gamma2",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:25,labelPrecision:1,labelStepSize:25,value:f,onChange:d,fill:!0})),o.a.createElement(je.e,{label:"Max value",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:1,labelStepSize:1,value:p,onChange:h,labelRenderer:nt,fill:!0})),o.a.createElement(je.e,{label:"Min value",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:1,labelStepSize:1,value:x,onChange:y,labelRenderer:nt,fill:!0})),o.a.createElement(je.e,{label:"Cycles/s",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:5,labelPrecision:1,labelStepSize:5,value:j,onChange:E,fill:!0})),o.a.createElement(je.e,{label:'"Spokes"',inline:!0},o.a.createElement(je.g,{stepSize:1,min:1,max:10,labelStepSize:9,value:P,onChange:z,fill:!0})),o.a.createElement(je.e,{label:"Color",inline:!0},o.a.createElement($e.CirclePicker,{color:I,colors:Je,onChange:M,circleSize:14,circleSpacing:1,width:150})),o.a.createElement(je.e,{label:"Hue amp.",inline:!0},o.a.createElement(je.g,{stepSize:.005,min:0,max:.2,labelPrecision:2,labelStepSize:.2,labelRenderer:nt,value:V,onChange:R,fill:!0})),o.a.createElement(je.e,{label:"Hue period",inline:!0},o.a.createElement(je.g,{stepSize:.01,min:0,max:5,labelStepSize:5,labelRenderer:at,value:F,onChange:N,fill:!0})))}function it(e){var t,n=e.patternKey,i=e.pattern,r=e.setPattern,c=Object(a.useState)(i.type),s=Object(l.a)(c,2),u=s[0],f=s[1],d=Object(a.useState)(!1),m=Object(l.a)(d,2),v=m[0],p=m[1];return u===F?t=o.a.createElement(tt,{pattern:i,setPattern:r}):u===N&&(t=o.a.createElement(ot,{pattern:i,setPattern:r})),o.a.createElement("div",null,o.a.createElement(Xe,{patternKey:n,category:i.category,setIsOpen:p,isOpen:v}),o.a.createElement(je.c,{isOpen:v},o.a.createElement(je.e,{label:"Type",inline:!0},o.a.createElement(je.f,{options:[{label:"Radar",value:N},{label:"Pulse",value:F}],onChange:function(e){var t=parseInt(e.target.value,10);r(Object(_.a)({type:t},B[t])),f(t)},value:u,fill:!0})),t,o.a.createElement(je.d,null)))}var rt=function(){var e=3;return function(){return e++}}(),lt=function(e,t){return Object(_.a)({type:F,category:e},B[F],{hsvColor:t})};function ct(e){var t=Ue()(e).toHsv();return[t.h/360,t.s,t.v]}function st(e){var t,n,i=e.scatterplot,r=Object(u.d)((function(e){return e.categoryColors}),u.b),c=Object(a.useState)({1:(t=0,n=ct(r[0]),Object(_.a)({type:N,category:t},B[N],{hsvColor:n})),2:lt(1,ct(r[1]))}),f=Object(l.a)(c,2),d=f[0],m=f[1],v=Object(u.d)((function(e){return e.maxCategories}));Object(a.useEffect)((function(){null!==i&&i.patternManager.setAll(Object.keys(d).map((function(e){return d[e]})))}),[i,d]);var p=function(e){return function(t){m((function(n){return Object(_.a)({},n,Object(A.a)({},e,Object(_.a)({},n[e],{},t)))}))}};Object(a.useEffect)((function(){if(v>0){var e=new Set(new Array(v).fill().map((function(e,t){return t})));Object.keys(d).forEach((function(t){var n=d[t];n.category>=v?function(e){m((function(t){t[e];return Object(Ie.a)(t,[e].map(Me.a))}))}(t):e.delete(n.category)})),e.forEach((function(e){return function(e){return m((function(t){return Object(_.a)({},t,Object(A.a)({},rt(),lt(e)))}))}(e)}))}}),[v]);var h=Object.keys(d).map((function(e){return o.a.createElement(it,{key:e,patternKey:e,pattern:d[e],setPattern:p(e)})}));return o.a.createElement("div",{className:"jsx-4110324435"},o.a.createElement(je.d,null),o.a.createElement("p",{style:{textAlign:"center"},className:"jsx-4110324435 bp3-text-muted"},"Click on a cluster to show/hide options."),h,o.a.createElement(s.a,{id:"4110324435"},[".data-add-new.jsx-4110324435{margin:10px 0;text-align:center;}"]))}function ut(e){var t=e.scatterplot,n=Object(u.d)((function(e){return e.isDarkTheme}));return o.a.createElement(je.b,{className:"card-sidebar ".concat(n?"bp3-dark":""),elevation:2},o.a.createElement(je.j,{id:"sidebar-tabs"},o.a.createElement(je.i,{title:"Scatterplot",id:"scatterplot-options-tab",panel:o.a.createElement(ke,{scatterplot:t})}),o.a.createElement(je.i,{title:"Data",id:"data-options-tab",panel:o.a.createElement(He,{scatterplot:t})}),o.a.createElement(je.i,{title:"Patterns",id:"patterns-options-tab",panel:o.a.createElement(st,{scatterplot:t})})),o.a.createElement(s.a,{id:"2537287085"},[".card-sidebar{width:300px;border-radius:0;overflow-y:scroll;overflow-x:hidden;}",".bp3-tab-list{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]))}function ft(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{id:"3909978057"},["html,body,#root{margin:0;padding:0;width:100%;height:100%;}",".bp3-collapse-body{padding:10px 0;}",".bp3-form-group{margin-bottom:0px;}",".bp3-form-group.bp3-inline label.bp3-label{margin-right:20px;min-width:70px;}",".circle-picker{margin-top:5px;}"]))}var dt=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],i=t[1],r=Object(u.d)((function(e){return e.isDarkTheme})),c=Object(u.d)((function(e){return e.categoryColors}),u.b),f=Object(a.useCallback)((function(e){!function(e,t,n){var a=e.getBoundingClientRect(),o=a.width,i=a.height,r=Se({canvas:e,width:o,height:i,lassoMinDelay:10,lassoMinDist:2,pointSize:Oe,showRecticle:!0,recticleColor:[1,1,.878431373,.33]});window.addEventListener("resize",(function(){var t=e.getBoundingClientRect();o=t.width,i=t.height,r.set({width:o,height:i})})),r.set({colorBy:"category",colors:n}),t(r)}(e,i,c)}),[i]),d="#000000";return o.a.createElement("div",{className:s.a.dynamic([["773189250",[r?d:"#ffffff"]]])+" App"},o.a.createElement(ft,null),o.a.createElement("div",{className:s.a.dynamic([["773189250",[r?d:"#ffffff"]]])+" content"},o.a.createElement("div",{className:s.a.dynamic([["773189250",[r?d:"#ffffff"]]])+" canvas-wrapper"},o.a.createElement("canvas",{ref:f,className:s.a.dynamic([["773189250",[r?d:"#ffffff"]]])+" canvas"}))),o.a.createElement(ut,{scatterplot:n}),o.a.createElement(s.a,{id:"773189250",dynamic:[r?d:"#ffffff"]},[".App.__jsx-style-dynamic-selector{background-color:".concat(r?d:"#ffffff",";width:100%;height:100%;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"),".content.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;height:100%;position:relative;}",".canvas-wrapper.__jsx-style-dynamic-selector{position:absolute;top:0;right:0;bottom:0;left:0;}",".canvas.__jsx-style-dynamic-selector{position:absolute;width:100%;height:100%;}"]))},mt=n(47);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var vt=Object(mt.b)({categoryColors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;if("update category color"===t.type){var n=Object(f.a)(e);return n[t.category]=t.color,n}return e},isDarkTheme:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return"toggle theme"===t.type?!e:e},maxCategories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return"set max categories"===t.type?t.value:e}}),pt=Object(mt.c)(vt);r.a.render(o.a.createElement(u.a,{store:pt},o.a.createElement(dt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[227,1,2]]]);
//# sourceMappingURL=main.0daadf20.chunk.js.map