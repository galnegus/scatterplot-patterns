(this["webpackJsonpscatterplot-patterns"]=this["webpackJsonpscatterplot-patterns"]||[]).push([[0],{228:function(e,t,n){e.exports=n(430)},430:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(18),r=n.n(i),l=n(1),c=n(10),s=n.n(c),u=n(9),f=n(8),d=n(165),m=n(7),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.distance,a=void 0===n?1:n,o=t.target,i=void 0===o?[0,0]:o,r=t.rotation,l=void 0===r?0:r,c=t.isNdc,s=void 0===c||c,u=t.isFixed,f=void 0!==u&&u,v=t.isPan,p=void 0===v||v,h=t.panSpeed,b=void 0===h?1:h,g=t.isRotate,x=void 0===g||g,y=t.rotateSpeed,w=void 0===y?1:y,S=t.isZoom,E=void 0===S||S,j=t.zoomSpeed,O=void 0===j?1:j,C=t.onKeyDown,_=void 0===C?function(){}:C,P=t.onKeyUp,z=void 0===P?function(){}:P,k=t.onMouseDown,I=void 0===k?function(){}:k,M=t.onMouseUp,A=void 0===M?function(){}:M,L=t.onMouseMove,V=void 0===L?function(){}:L,F=t.onWheel,R=void 0===F?function(){}:F,N=Object(d.a)(i,a,l),T=!1,D=0,G=0,Y=0,W=0,q=!1,B=0,H=0,K=0,U=1,X=1,$=1,Q=!1,J=s?function(e){return e/U*2*$}:function(e){return e},Z=s?function(e){return e/X*2}:function(e){return-e},ee=s?function(e){return(e/U*2-1)*$}:function(e){return e},te=s?function(e){return 1-e/X*2}:function(e){return e},ne=function(){if(f)return!1;if(T=!1,p&&q&&!Q&&(N.pan([J(b*(D-Y)),Z(b*(W-G))]),T=!0),E&&B){var e=O*Math.exp(B/X),t=ee(D),n=te(G);N.scale(1/e,[t,n]),T=!0}if(x&&q&&Q){var a=U/2,o=X/2,i=Y-a,r=o-W,l=D-a,c=o-G,s=m.b.angle([i,r],[l,c]),u=i*c-l*r;N.rotate(w*s*Math.sign(u)),T=!0}return B=0,Y=D,W=G,T},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isFixed,n=void 0===t?null:t,a=e.isPan,o=void 0===a?null:a,i=e.isRotate,r=void 0===i?null:i,l=e.isZoom,c=void 0===l?null:l,s=e.panSpeed,u=void 0===s?null:s,d=e.rotateSpeed,m=void 0===d?null:d,v=e.zoomSpeed,h=void 0===v?null:v;f=null!==n?n:f,p=null!==o?o:p,x=null!==r?r:x,E=null!==c?c:E,b=+u>0?u:b,w=+m>0?m:w,O=+h>0?h:O},oe=function(){var t=e.getBoundingClientRect();H=t.top,K=t.left,U=t.width,X=t.height,$=U/X},ie=function(e){Q=!1,z(e)},re=function(e){Q=e.altKey,_(e)},le=function(e){q=!1,A(e)},ce=function(e){q=1===e.buttons,I(e)},se=function(e){D=e.clientX-K,G=e.clientY-H,V(e)},ue=function(e){e.preventDefault();var t=1===e.deltaMode?12:1;B+=t*(e.deltaY||0),R(e)},fe=function(){N=void 0,window.removeEventListener("keydown",re),window.removeEventListener("keyup",ie),e.removeEventListener("mousedown",ce),window.removeEventListener("mouseup",le),window.removeEventListener("mousemove",se),e.removeEventListener("wheel",ue)};return window.addEventListener("keydown",re,{passive:!0}),window.addEventListener("keyup",ie,{passive:!0}),e.addEventListener("mousedown",ce,{passive:!0}),window.addEventListener("mouseup",le,{passive:!0}),window.addEventListener("mousemove",se,{passive:!0}),e.addEventListener("wheel",ue,{passive:!1}),oe(),N.config=ae,N.dispose=fe,N.refresh=oe,N.tick=ne,N},p=n(177),h=n(166),b=n(115),g=n(167),x=n(88),y=n(168),w=n.n(y),S=n(176),E=n(59),j=n(171),O="precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\n\nvarying vec2 uv;\n\nvoid main () {\n  gl_FragColor = texture2D(texture, uv);\n}\n",C="precision mediump float;\n#define GLSLIFY 1\n\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\n\nattribute vec2 position;\n\nvarying vec2 uv;\n\nvoid main () {\n  uv = position;\n  gl_Position = projection * view * model * vec4(1.0 - 2.0 * position, 0, 1);\n}\n",_="#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n\nprecision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 color;\nvarying vec2 uv;\nuniform bool animateDepth;\n\nvoid main() {\n  float r = 0.0, delta = 0.0, alpha = 1.0;\n  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n  r = dot(cxy, cxy);\n\n  if (animateDepth) {\n    alpha = 1.0 - step(1.0, r);\n    if (alpha < 1.0) discard;\n    gl_FragColor = vec4(color.rgb, alpha);\n  } else {\n    #ifdef GL_OES_standard_derivatives\n      delta = fwidth(r);\n      alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n    #endif\n\n    gl_FragColor = vec4(color.rgb, alpha * color.a);\n  }\n  //if (alpha < 0.33) discard;\n  //gl_FragColor = vec4(color.rgb, alpha);\n}\n",P='precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D colorTex;\nuniform float colorTexRes;\nuniform sampler2D stateTex;\nuniform float stateTexRes;\nuniform float pointSize;\nuniform float pointSizeExtra;\nuniform float numPoints;\nuniform float globalState;\nuniform float isColoredByCategory;\nuniform float isColoredByValue;\nuniform float maxColor;\nuniform float numColorStates;\nuniform float scaling;\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\n\nattribute float stateIndex;\n\nuniform sampler2D textureAtlas;\nuniform vec2 atlasSize;\n\nuniform sampler2D bboxTex;\nuniform float bboxTexRes;\n\n// variables to send to the fragment shader\nvarying vec4 color;\nvarying vec2 uv;\n\nfloat modI(float a, float b) {\n  float m = a - floor((a + 0.5) / b) * b;\n   return floor(m + 0.5);\n}\n\nvec4 getFromTexture(in sampler2D texture, in float textureRes, in float index) {\n  float eps = 0.5 / textureRes;\n  float rowIndex = floor((index + eps) / textureRes);\n  vec2 texIndex = vec2(\n    (index / textureRes) - rowIndex + eps,\n    rowIndex / textureRes + eps\n  );\n  return texture2D(texture, texIndex);\n}\n\nvec2 texAtlasIndex(in float index, in vec2 position) {\n  float maxLength = atlasSize.x * atlasSize.y;\n  float modIndex = modI(index, maxLength);\n\n  float yIndex = floor((modIndex + 0.5) / atlasSize.x);\n  float xIndex = modI(modIndex, atlasSize.x);\n\n  float yStep = 1.0 / atlasSize.y;\n  float xStep = 1.0 / atlasSize.x;\n\n  vec2 min = vec2(xIndex * xStep, yIndex * yStep);\n  vec2 max = vec2((xIndex + 1.0) * xStep, (yIndex + 1.0) * yStep);\n\n  return position * (max - min) + min;\n}\n\nvec4 findColor(in float category) {\n  // this should be generalizable\n  vec4 bbox = getFromTexture(bboxTex, bboxTexRes, category);\n\n  vec2 min = bbox.xy;\n  vec2 max = bbox.zw;\n  vec2 normalizedPosition = (uv - min) / (max - min);\n\n  return texture2D(textureAtlas, texAtlasIndex(category, normalizedPosition));\n}\n\nvoid main() {\n  // First get the state\n  vec4 state = getFromTexture(stateTex, stateTexRes, stateIndex);\n\n  uv = state.xy;\n\n  // Determine color index\n  float colorIndexCat = state.z * isColoredByCategory;\n  float colorIndexVal = floor(state.w * maxColor) * isColoredByValue;\n  float colorIndex = colorIndexCat + colorIndexVal;\n  // Multiply by the number of color states per color\n  // I.e., normal, active, hover, background, etc.\n  colorIndex *= numColorStates;\n  // Half a "pixel" or "texel" in texture coordinates\n  float eps = 0.5 / colorTexRes;\n  float colorLinearIndex = colorIndex + globalState;\n  // Need to add cEps here to avoid floating point issue that can lead to\n  // dramatic changes in which color is loaded as floor(3/2.9999) = 1 but\n  // floor(3/3.0001) = 0!\n  float colorRowIndex = floor((colorLinearIndex + eps) / colorTexRes);\n\n  vec2 colorTexIndex = vec2(\n    (colorLinearIndex / colorTexRes) - colorRowIndex + eps,\n    colorRowIndex / colorTexRes + eps\n  );\n\n  //color = texture2D(colorTex, colorTexIndex);\n  color = findColor(state.z);\n\n  gl_Position = projection * view * model * vec4(state.x, state.y, color.a * 0.99, 1.0); // depth gets clipped when z = 1.00, so * 0.99!\n\n  // The final scaling consists of linear scaling in [0, 1] and log scaling\n  // in [1, [\n  float finalScaling = min(1.0, scaling) + log2(max(1.0, scaling));\n\n  gl_PointSize = pointSize * finalScaling + pointSizeExtra;\n}\n',z=n(6),k=n(71),I=n(72),M=n(45),A=n(19),L="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform vec2 resolution;\nuniform float texAtlasIndex;\nuniform vec2 texAtlasSize;\nuniform float time;\n\nvarying vec2 posMin;\nvarying vec2 posMax;\n\nfloat modI(float a, float b) {\n  float m = a - floor((a + 0.5) / b) * b;\n  return floor(m + 0.5);\n}\n\nvoid main () {\n  float maxLength = texAtlasSize.x * texAtlasSize.y;\n  float modIndex = modI(texAtlasIndex, maxLength);\n\n  float yIndex = floor((modIndex + 0.5) / texAtlasSize.x);\n  float xIndex = modI(modIndex, texAtlasSize.x);\n\n  float yStep = 1.0 / float(texAtlasSize.y);\n  float xStep = 1.0 / float(texAtlasSize.x);\n\n  posMin = vec2(xIndex * xStep, yIndex * yStep);\n  posMax = vec2((xIndex + 1.0) * xStep, (yIndex + 1.0) * yStep);\n\n  vec2 texPos = (position + 1.0) * 0.5;\n  texPos = texPos * (posMax - posMin) + posMin;\n  texPos = texPos * 2.0 - 1.0; \n\n  gl_Position = vec4(texPos, 0, 1);\n}\n";var V={hsvColor:[.5,1,1],a:1,c1:.1,c2:.1,minValue:.5,cyclesPerSecond:1,wavesPerCycle:1,direction:1,invert:0,hueVariation:.05,hueVariationPeriod:2};var F,R={hsvColor:[.8,1,1],gamma1:2,gamma2:2,maxValue:1,minValue:.5,cyclesPerSecond:1,nSpokes:2,direction:1,invert:0,hueVariation:.05,hueVariationPeriod:2};var N=0,T=1,D=2,G=(F={},Object(A.a)(F,T,V),Object(A.a)(F,D,R),F),Y=function(){function e(t){var n;if(Object(k.a)(this,e),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,B,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,U,{writable:!0,value:void 0}),!t)throw new Error("PatternManager must have reference to regl object.");this.fbo=t.framebuffer({width:1e3,height:500}),this.patternDraws=(n={},Object(A.a)(n,N,function(e,t){var n=e({frag:"precision mediump float;\n#define GLSLIFY 1\n\nvec2 normalizeFragCoords(in vec2 resolution, in vec2 posMin, in vec2 posMax) {\n  return (gl_FragCoord.xy / (resolution) - posMin) / (posMax - posMin); \n}\n\n//  Function from I\xf1igo Quiles\n//  https://www.shadertoy.com/view/MsS3Wc\nvec3 hsv2rgb_smooth_1604150559( in vec3 c ) {\n  vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n  rgb = rgb*rgb*(3.0-2.0*rgb); // cubic smoothing \n  return c.z * mix( vec3(1.0), rgb, c.y);\n}\n\nuniform vec2 resolution;\nuniform vec3 hsvColor;\nuniform bool useColors;\n\nvarying vec2 posMin;\nvarying vec2 posMax;\n\nvoid main () {\n  vec2 normalizedFragCoord = normalizeFragCoords(resolution, posMin, posMax);\n\n  gl_FragColor = vec4(hsv2rgb_smooth_1604150559(vec3(hsvColor.x, hsvColor.y * float(useColors), hsvColor.z)), 1);\n}\n",vert:L,attributes:{position:e.buffer([[-1,-1],[1,-1],[-1,1],[1,-1],[-1,1],[1,1]])},uniforms:{resolution:e.prop("resolution"),texAtlasIndex:e.prop("texAtlasIndex"),texAtlasSize:e.prop("texAtlasSize"),time:e.prop("time"),hsvColor:e.prop("hsvColor"),useColors:e.prop("useColors")},count:6,framebuffer:t});return function(e,t,a,o,i,r){var l=r.hsvColor;n({resolution:[e.width,e.height],texAtlasSize:t,texAtlasIndex:a,time:.5*o%1,useColors:i,hsvColor:l})}}(t,this.fbo)),Object(A.a)(n,T,function(e,t){var n=e({frag:"precision mediump float;\n#define GLSLIFY 1\n\nfloat when_gt_2281831123(float x, float y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec2 when_gt_2281831123(vec2 x, vec2 y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec3 when_gt_2281831123(vec3 x, vec3 y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec4 when_gt_2281831123(vec4 x, vec4 y) {\n  return max(sign(x - y), 0.0);\n}\n\nfloat when_le_1062606552(float x, float y) {\n  return 1.0 - when_gt_2281831123(x, y);\n}\n\nvec2 when_le_1062606552(vec2 x, vec2 y) {\n  return 1.0 - when_gt_2281831123(x, y);\n}\n\nvec3 when_le_1062606552(vec3 x, vec3 y) {\n  return 1.0 - when_gt_2281831123(x, y);\n}\n\nvec4 when_le_1062606552(vec4 x, vec4 y) {\n  return 1.0 - when_gt_2281831123(x, y);\n}\n\nfloat when_eq_529295689(float x, float y) {\n  return 1.0 - abs(sign(x - y));\n}\n\nvec2 when_eq_529295689(vec2 x, vec2 y) {\n  return 1.0 - abs(sign(x - y));\n}\n\nvec3 when_eq_529295689(vec3 x, vec3 y) {\n  return 1.0 - abs(sign(x - y));\n}\n\nvec4 when_eq_529295689(vec4 x, vec4 y) {\n  return 1.0 - abs(sign(x - y));\n}\n\n//  Function from I\xf1igo Quiles\n//  https://www.shadertoy.com/view/MsS3Wc\nvec3 hsv2rgb_smooth_1540259130( in vec3 c ) {\n  vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n  rgb = rgb*rgb*(3.0-2.0*rgb); // cubic smoothing \n  return c.z * mix( vec3(1.0), rgb, c.y);\n}\n\nvec2 normalizeFragCoords(in vec2 resolution, in vec2 posMin, in vec2 posMax) {\n  return (gl_FragCoord.xy / (resolution) - posMin) / (posMax - posMin); \n}\n\nfloat hueWave(in float hue, in float time, in float period, in float variation) {\n  // https://stackoverflow.com/a/22400799\n  float amplitude = 1.0;\n  float halfPeriod = period / 2.0;\n  float triangleWave = (amplitude / halfPeriod) * (halfPeriod - abs(mod(time, period) - halfPeriod));\n\n  return mod(hue + (triangleWave * 2.0 - 1.0) * variation, 1.0);\n}\n\nuniform vec3 hsvColor;\nuniform float hueVariation;\nuniform float hueVariationPeriod;\nuniform vec2 resolution;\nuniform float time;\nuniform bool useColors;\n\nuniform float cyclesPerSecond;\nuniform float wavesPerCycle;\nuniform float direction;\nuniform float invert;\nuniform vec3 animationMix;\n\nuniform float a;\nuniform float c1;\nuniform float c2;\nuniform float minValue;\n\nvarying vec2 posMin;\nvarying vec2 posMax;\n\nfloat gauss(in float diff) {\n  float c = c1 * when_gt_2281831123(diff, 0.0) + c2 * when_le_1062606552(diff, 0.0);\n  return a * exp(-pow(diff, 2.0)/(2.0 * c * c));\n}\n\nvoid main() {\n  vec2 normalizedFragCoord = normalizeFragCoords(resolution, posMin, posMax);\n\n  float dist = distance(normalizedFragCoord, vec2(0.5, 0.5)) * 2.0;\n\n  float scaledTime = direction * cyclesPerSecond * time;\n\n  float diff = mod(dist - scaledTime, 1.0 / wavesPerCycle);\n  float leftDiff = gauss(diff - 1.0 / wavesPerCycle);\n  float middleDiff = gauss(diff);\n  float rightDiff = gauss(diff + 1.0 / wavesPerCycle);\n\n  float value = max(leftDiff, max(middleDiff, rightDiff));\n\n  value = when_eq_529295689(invert, 1.0) * (value * -1.0 + 1.0) + when_eq_529295689(invert, 0.0) * value; \n  value = value * (1.0 - minValue) + minValue;\n  \n  float hue = hueWave(hsvColor.x, time, hueVariationPeriod, hueVariation);\n  float animateSaturation = mix(1.0, value, animationMix[0]) * float(useColors);\n  float animateValue = mix(1.0, value, animationMix[1]);\n  float animateAlpha = mix(1.0, value, animationMix[2]);\n\n  gl_FragColor = vec4(hsv2rgb_smooth_1540259130(vec3(hue, animateSaturation * hsvColor.y, animateValue * hsvColor.z)), animateAlpha);\n}\n",vert:L,attributes:{position:e.buffer([[-1,-1],[1,-1],[-1,1],[1,-1],[-1,1],[1,1]])},uniforms:{resolution:e.prop("resolution"),texAtlasIndex:e.prop("texAtlasIndex"),texAtlasSize:e.prop("texAtlasSize"),time:e.prop("time"),animationMix:e.prop("animationMix"),useColors:e.prop("useColors"),hsvColor:e.prop("hsvColor"),a:e.prop("a"),c1:e.prop("c1"),c2:e.prop("c2"),minValue:e.prop("minValue"),cyclesPerSecond:e.prop("cyclesPerSecond"),wavesPerCycle:e.prop("wavesPerCycle"),direction:e.prop("direction"),invert:e.prop("invert"),hueVariation:e.prop("hueVariation"),hueVariationPeriod:e.prop("hueVariationPeriod")},count:6,framebuffer:t});return function(e,t,a,o,i,r,l){var c=Object(z.a)({},V,{},l),s=c.hsvColor,u=c.a,f=c.c1,d=c.c2,m=c.minValue,v=c.cyclesPerSecond,p=c.wavesPerCycle,h=c.direction,b=c.invert,g=c.hueVariation,x=c.hueVariationPeriod;n({resolution:[e.width,e.height],texAtlasSize:t,texAtlasIndex:a,time:o,animationMix:i,useColors:r,hsvColor:s,a:u,c1:f,c2:d,minValue:m,cyclesPerSecond:v,wavesPerCycle:p,direction:h,invert:b,hueVariation:g,hueVariationPeriod:x})}}(t,this.fbo)),Object(A.a)(n,D,function(e,t){var n=e({frag:"precision mediump float;\n#define GLSLIFY 1\n\nfloat when_gt_2281831123(float x, float y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec2 when_gt_2281831123(vec2 x, vec2 y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec3 when_gt_2281831123(vec3 x, vec3 y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec4 when_gt_2281831123(vec4 x, vec4 y) {\n  return max(sign(x - y), 0.0);\n}\n\nfloat when_le_1062606552(float x, float y) {\n  return 1.0 - when_gt_2281831123(x, y);\n}\n\nvec2 when_le_1062606552(vec2 x, vec2 y) {\n  return 1.0 - when_gt_2281831123(x, y);\n}\n\nvec3 when_le_1062606552(vec3 x, vec3 y) {\n  return 1.0 - when_gt_2281831123(x, y);\n}\n\nvec4 when_le_1062606552(vec4 x, vec4 y) {\n  return 1.0 - when_gt_2281831123(x, y);\n}\n\nfloat when_eq_529295689(float x, float y) {\n  return 1.0 - abs(sign(x - y));\n}\n\nvec2 when_eq_529295689(vec2 x, vec2 y) {\n  return 1.0 - abs(sign(x - y));\n}\n\nvec3 when_eq_529295689(vec3 x, vec3 y) {\n  return 1.0 - abs(sign(x - y));\n}\n\nvec4 when_eq_529295689(vec4 x, vec4 y) {\n  return 1.0 - abs(sign(x - y));\n}\n\n//  Function from I\xf1igo Quiles\n//  https://www.shadertoy.com/view/MsS3Wc\nvec3 hsv2rgb_smooth_1604150559( in vec3 c ) {\n  vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n  rgb = rgb*rgb*(3.0-2.0*rgb); // cubic smoothing \n  return c.z * mix( vec3(1.0), rgb, c.y);\n}\n\nvec2 normalizeFragCoords(in vec2 resolution, in vec2 posMin, in vec2 posMax) {\n  return (gl_FragCoord.xy / (resolution) - posMin) / (posMax - posMin); \n}\n\nfloat hueWave(in float hue, in float time, in float period, in float variation) {\n  // https://stackoverflow.com/a/22400799\n  float amplitude = 1.0;\n  float halfPeriod = period / 2.0;\n  float triangleWave = (amplitude / halfPeriod) * (halfPeriod - abs(mod(time, period) - halfPeriod));\n\n  return mod(hue + (triangleWave * 2.0 - 1.0) * variation, 1.0);\n}\n\nuniform vec3 hsvColor;\nuniform float hueVariation;\nuniform float hueVariationPeriod;\nuniform vec2 resolution;\nuniform float time;\nuniform bool useColors;\n\nuniform float gamma1;\nuniform float gamma2;\nuniform float maxValue;\nuniform float minValue;\nuniform float cyclesPerSecond;\nuniform float nSpokes;\nuniform float direction;\nuniform float invert;\nuniform vec3 animationMix;\n\nvarying vec2 posMin;\nvarying vec2 posMax;\n\nconst float PI = 3.1415926535897932384626433832795;\nconst float TAU = 6.2831853071795864769252867665590;\n\nfloat coolAbs(in float x) {\n  return -abs(x - 1.0) + 1.0;\n} \n\nfloat angleDifference(in float a, in float b, out float gamma) {\n  float diff1 = mod((a - b), TAU / nSpokes);\n  float diff2 = mod((b - a), TAU / nSpokes);\n\n  float d1_less_equal_d2 = when_le_1062606552(diff1, diff2);\n  float d1_greater_than_d2 = when_gt_2281831123(diff1, diff2);\n\n  gamma = d1_less_equal_d2 * gamma2 + d1_greater_than_d2 * gamma1;\n  return d1_less_equal_d2 * diff1 + d1_greater_than_d2 * diff2;\n}\n\nvoid main() {\n  vec2 normalizedFragCoord = normalizeFragCoords(resolution, posMin, posMax);\n\n  float scaledTime = direction * time * cyclesPerSecond;\n\n  float timeAngle = scaledTime * TAU;\n\n  vec2 centerDist = normalizedFragCoord - vec2(0.5, 0.5);\n  float fragAngle = atan(centerDist.x, centerDist.y) + PI; // from [-pi, pi] to [0, 2pi]\n  float gamma;\n  float angleDist = angleDifference(fragAngle, timeAngle, gamma) * nSpokes / PI;\n\n  float value = pow(1.0 - angleDist, gamma); // gamma\n\n  value = when_eq_529295689(invert, 1.0) * (value * -1.0 + 1.0) + when_eq_529295689(invert, 0.0) * value; \n  value = value * (maxValue - minValue) + minValue;\n\n  float hue = hueWave(hsvColor.x, time, hueVariationPeriod, hueVariation);\n  float animateSaturation = mix(1.0, value, animationMix[0]) * float(useColors);\n  float animateValue = mix(1.0, value, animationMix[1]);\n  float animateAlpha = mix(1.0, value, animationMix[2]);\n\n  gl_FragColor = vec4(hsv2rgb_smooth_1604150559(vec3(hue, animateSaturation * hsvColor.y, animateValue * hsvColor.z)), animateAlpha);\n}\n",vert:L,attributes:{position:e.buffer([[-1,-1],[1,-1],[-1,1],[1,-1],[-1,1],[1,1]])},uniforms:{resolution:e.prop("resolution"),texAtlasIndex:e.prop("texAtlasIndex"),texAtlasSize:e.prop("texAtlasSize"),time:e.prop("time"),animationMix:e.prop("animationMix"),useColors:e.prop("useColors"),hsvColor:e.prop("hsvColor"),gamma1:e.prop("gamma1"),gamma2:e.prop("gamma2"),maxValue:e.prop("maxValue"),minValue:e.prop("minValue"),cyclesPerSecond:e.prop("cyclesPerSecond"),nSpokes:e.prop("nSpokes"),direction:e.prop("direction"),invert:e.prop("invert"),hueVariation:e.prop("hueVariation"),hueVariationPeriod:e.prop("hueVariationPeriod")},count:6,framebuffer:t});return function(e,t,a,o,i,r,l){var c=Object(z.a)({},R,{},l),s=c.hsvColor,u=c.gamma1,f=c.gamma2,d=c.maxValue,m=c.minValue,v=c.cyclesPerSecond,p=c.nSpokes,h=c.direction,b=c.invert,g=c.hueVariation,x=c.hueVariationPeriod;n({resolution:[e.width,e.height],texAtlasSize:t,texAtlasIndex:a,time:o,animationMix:i,useColors:r,hsvColor:s,gamma1:u,gamma2:f,maxValue:d,minValue:m,cyclesPerSecond:v,nSpokes:p,direction:h,invert:b,hueVariation:g,hueVariationPeriod:x})}}(t,this.fbo)),n),this.patterns={},this.regl=t,this.maxCategories=0,this.atlasSize=[0,0]}return Object(I.a)(e,[{key:"updateSize",value:function(){this.maxCategories=Math.max.apply(Math,Object(f.a)(Object.keys(this.patterns)))+1,this.atlasSize=[this.maxCategories,1]}},{key:"setAll",value:function(e){var t=this,n=new Set(Object.keys(this.patterns));e.forEach((function(e){n.delete(e.category.toString()),t.set(e.category,e)})),n.forEach((function(e){t.destroy(e)}))}},{key:"set",value:function(e,t){Object(E.a)(this.patterns,e)?this.patterns[e]=Object(z.a)({},this.patterns[e],{},t):this.patterns[e]=t,this.updateSize()}},{key:"destroy",value:function(e){delete this.patterns[e],this.updateSize()}},{key:"draw",value:function(e,t,n,a){for(var o=0;o<this.maxCategories;o+=1)Object(E.a)(this.patterns,o)&&(a?this.patternDraws[this.patterns[o].type](this.fbo,this.atlasSize,o,e,t,n,this.patterns[o]):this.patternDraws[N](this.fbo,this.atlasSize,o,e,n,this.patterns[o]))}},{key:"clear",value:function(){this.regl.clear({color:[0,0,0,0],depth:1,framebuffer:this.fbo})}},{key:"getTexture",value:function(){return this.fbo.color[0]}},{key:"getAtlasSize",value:function(){return Object(f.a)(this.atlasSize)}}]),e}(),W=Object(M.a)("patternDraws"),q=Object(M.a)("patterns"),B=Object(M.a)("fbo"),H=Object(M.a)("regl"),K=Object(M.a)("maxCategories"),U=Object(M.a)("atlasSize"),X=Float32Array.BYTES_PER_ELEMENT,$=["OES_standard_derivatives","OES_texture_float"],Q=[0,0,0,1],J=[[.66,.66,.66,1],[0,.55,1,1],[1,1,1,1],Q],Z=[0,0],ee=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),te=[0,.666666667,1,1],ne=[1,1,1,.5],ae=n(169),oe=n.n(ae),ie=function(e,t){return e>t?e:t},re=function(e){return!!e&&$.reduce((function(t,n){return e.hasExtension(n)?t:(console.warn("WebGL: ".concat(n," extension not supported. Scatterplot might not render properly")),!1)}),!0)},le=function(e){var t=e.getContext("webgl"),n=[];return $.forEach((function(e){t.getExtension(e)?n.push(e):console.warn("WebGL: ".concat(e," extension not supported. Scatterplot might not render properly"))})),oe()({gl:t,extensions:n})},ce=function(e,t,n,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-a,2))},se=function(e){for(var t=1/0,n=-1/0,a=1/0,o=-1/0,i=0;i<e.length;i+=2)t=e[i]<t?e[i]:t,n=e[i]>n?e[i]:n,a=e[i+1]<a?e[i+1]:a,o=e[i+1]>o?e[i+1]:o;return[t,a,n,o]},ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,a){return"#".concat(t).concat(t).concat(n).concat(n).concat(a).concat(a)})).substring(1).match(/.{2}/g).map((function(e){return parseInt(e,16)/Math.pow(255,t)}))},fe=function(e){return e>=0&&e<=1},de=function(e){return Array.isArray(e)&&e.every(fe)},me=function(){for(var e,t,n,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=Object(l.a)(o,2),r=i[0],c=i[1],s=arguments.length>1?arguments[1]:void 0,u=!1,f=0,d=s.length-2;f<s.length;f+=2)e=s[f],t=s[f+1],n=s[d],t>c!==(a=s[d+1])>c&&r<(n-e)*(c-t)/(a-t)+e&&(u=!u),d=f;return u},ve=function(e){return Number.isInteger(e)&&e>=0&&e<=255},pe=function(e){return Array.isArray(e)&&e.every(ve)},he=function(e){return 3===e.length&&(de(e)||pe(e))},be=function(e){return 4===e.length&&(de(e)||pe(e))},ge=function(e,t){return e>t?e:t},xe=function(e,t){return e<t?e:t},ye=function(e){return e.map((function(t){return t/e.reduce(ie,-1/0)}))},we=function(e,t){return be(e)?t&&!de(e)?ye(e):e:he(e)?[].concat(Object(f.a)(t?ye(e):e),[Math.pow(255,!t)]):/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)?function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[].concat(Object(f.a)(ue(e,t)),[Math.pow(255,!t)])}(e,t):(console.warn("Only HEX, RGB, and RGBA are handled by this function. Returning white instead."),t?[1,1,1,1]:[255,255,255,255])},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.regl,n=e.background,a=void 0===n?Q:n,o=e.backgroundImage,i=void 0===o?null:o,r=e.canvas,c=void 0===r?document.createElement("canvas"):r,s=e.colorBy,u=void 0===s?null:s,d=e.colors,y=void 0===d?J:d,z=e.lassoColor,k=void 0===z?te:z,I=e.lassoMinDelay,M=void 0===I?10:I,A=e.lassoMinDist,L=void 0===A?3:A,V=e.showRecticle,F=void 0!==V&&V,R=e.recticleColor,T=void 0===R?ne:R,D=e.pointSize,G=void 0===D?6:D,W=e.pointSizeSelected,q=void 0===W?2:W,B=e.pointOutlineWidth,H=void 0===B?2:B,K=e.width,U=void 0===K?100:K,$=e.height,ae=void 0===$?100:$,oe=e.target,ie=void 0===oe?Z:oe,ue=e.distance,fe=void 0===ue?1:ue,de=e.rotation,ve=void 0===de?0:de,pe=e.view,ye=void 0===pe?ee:pe,Se=Object(h.a)(),Ee=new Float32Array(16),je=[0,0];re(t);var Oe,Ce,_e,Pe,ze,ke,Ie,Me,Ae,Le,Ve,Fe,Re,Ne,Te,De,Ge,Ye=we(a,!0),We=i,qe=c,Be=y,He=U,Ke=ae,Ue=G,Xe=q,$e=H,Qe=t||le(c),Je=!1,Ze=!1,et=[0,0],tt=0,nt=[],at=we(k,!0),ot=+M,it=+L,rt=[],lt=[],ct=1,st=F,ut=we(T,!0),ft=0,dt=0,mt=u,vt=!1,pt=!1,ht=1,bt=!1,gt=0,xt=[0,1,0],yt=!1,wt=!0,St=!0,Et=new Y(Qe);Et.set(0,{type:N,color:[.2,1,.5,1]});var jt=function(){return je.slice()},Ot=function(e){return e/He*2-1},Ct=function(e){return 1+e/Ke*-2},_t=function(){return[Ot(je[0]),Ct(je[1])]},Pt=function(){var e=_t(),t=Object(l.a)(e,2),n=[t[0],t[1],1,1],a=m.a.invert(Ee,m.a.multiply(Ee,ke,m.a.multiply(Ee,Oe.view,Ie)));return m.c.transformMat4(n,n,a),n.slice(0,2)},zt=function(){var e,t=Pt(),n=Object(l.a)(t,2),a=n[0],o=n[1],i=Oe.scaling,r=2*Ue*(xe(1,i)+Math.log2(ge(1,i)))*window.devicePixelRatio,c=r/He,s=r/Ke,u=Pe.range(a-c,o-s,a+c,o+s),f=r;return u.forEach((function(t){var n=Object(l.a)(Pe.points[t],2),i=n[0],r=n[1],c=ce(i,r,a,o);c<f&&(f=c,e=t)})),f<Ue/He*2?e:-1},kt=function(){var e,t,n=jt();_e?ce.apply(void 0,Object(f.a)(n).concat(Object(f.a)(_e)))>it&&((e=rt).push.apply(e,Object(f.a)(_t(n))),(t=lt).push.apply(t,Object(f.a)(Pt(n))),_e=n,rt.length>2&&Ce.setPoints(rt)):(rt=Object(f.a)(_t(n)),lt=Object(f.a)(Pt(n)),_e=n)},It=Object(b.a)(kt,ot),Mt=function(e){var t,n=se(e),a=(t=Pe).range.apply(t,Object(f.a)(n)),o=[];return a.forEach((function(t){me(Pe.points[t],e)&&o.push(t)})),o},At=function(){nt.length&&(Se.publish("deselect"),nt=[])},Lt=function(e){nt=e,Fe({usage:"dynamic",type:"float",data:new Float32Array(nt)}),Se.publish("select",{points:nt})},Vt=function(e){var t=qe.getBoundingClientRect();return je[0]=e.clientX-t.left,je[1]=e.clientY-t.top,[].concat(je)},Ft=function(){var e=Mt(lt);Lt(e),rt=[],lt=[],_e=void 0,Ce.clear()},Rt=function(e){pt&&(Je=!0,et=Vt(e),(Ze=e.shiftKey)&&(Oe.config({isFixed:!0}),_e=void 0))},Nt=function(){pt&&(Je=!1,Ze&&(Ze=!1,Oe.config({isFixed:!1}),Ft()))},Tt=function(e){if(pt){var t=Vt(e);if(!(ce.apply(void 0,Object(f.a)(t).concat(Object(f.a)(et)))>=3)){var n=zt();n>=0&&Lt([n])}}},Dt=function(){At()},Gt=function(e){if(pt){if(Vt(e),bt&&!Ze){var t=zt();ea(t)}Ze&&It()}},Yt=function(){pt&&(Te=void 0,bt=!1,Nt())},Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=e.length;dt=Math.max(2,Math.ceil(Math.sqrt(t)));var n=new Float32Array(4*Math.pow(dt,2));return e.forEach((function(e,t){n[4*t]=e[0],n[4*t+1]=e[1],n[4*t+2]=e[2],n[4*t+3]=t%4>0||1===ht?e[3]:ht})),Qe.texture({data:n,shape:[dt,dt,4],type:"float"})},qt=function(){ze=He/Ke,ke=m.a.fromScaling([],[1/ze,1,1]),Ie=m.a.fromScaling([],[ct,1,1])},Bt=function(e){+e<=0||(ct=e)},Ht=function(e){if(e&&e.length){var t=[];try{e.forEach((function(e){if(!Array.isArray(e)||he(e)||be(e)){var n=we(e,!0),a=[].concat(Object(f.a)(n.slice(0,3)),[1]);t.push(n,a,a)}else for(var o=0;o<3;o++)t.push(we(e[o],!0));t.push(Ye)}))}catch(n){console.error(n,"Invalid format. Please specify an array of colors or a nested array of accents per colors.")}Be=t;try{Ne=Wt()}catch(n){Be=J,Ne=Wt(),console.error("Invalid colors. Switching back to default colors.")}}},Kt=function(e){!+e||+e<=0||(Ke=+e,qe.height=Ke*window.devicePixelRatio)},Ut=function(e){!+e||+e<=0||(Ue=+e)},Xt=function(e){!+e||+e<0||(Xe=+e)},$t=function(e){!+e||+e<0||($e=+e)},Qt=function(e){!+e||+e<=0||(He=+e,qe.width=He*window.devicePixelRatio)},Jt=function(e){switch(e){case"category":mt="category";break;case"value":mt="value";break;default:mt=null}},Zt=function(e){!+e||+e<=0||(ht=+e,Ne=Wt())},en=function(){return We},tn=function(){return Ne},nn=function(){return dt},an=function(){return Ve},on=function(){return Fe},rn=function(){return Ue*window.devicePixelRatio},ln=function(){return 0},cn=function(){return Le},sn=function(){return ft},un=function(){return ke},fn=function(){return Oe.view},dn=function(){return Ie},mn=function(){return Oe.scaling},vn=function(){return tt},pn=function(){return 1*("category"===mt)},hn=function(){return 1*("value"===mt)},bn=function(){return Be.length/4-1},gn=function(){return 4},xn=function(){return Et.getTexture()},yn=function(){return Et.getAtlasSize()},wn=function(){return De},Sn=function(){return gt},En=function(){return yt},jn=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Qe({frag:_,vert:P,blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:En},attributes:{stateIndex:{buffer:n,size:1}},uniforms:{projection:un,model:dn,view:fn,scaling:mn,pointSize:rn,pointSizeExtra:e,globalState:a,colorTex:tn,colorTexRes:nn,stateTex:cn,stateTexRes:sn,isColoredByCategory:pn,isColoredByValue:hn,maxColor:bn,numColorStates:gn,textureAtlas:xn,atlasSize:yn,bboxTex:wn,bboxTexRes:Sn,animateDepth:En},count:t,primitive:"points"})},On=jn(ln,vn,an),Cn=jn(ln,(function(){return 1}),(function(){return Re}),2),_n=function(){var e=nt.length;jn((function(){return(Xe+2*$e)*window.devicePixelRatio}),(function(){return e}),on,1)(),jn((function(){return(Xe+$e)*window.devicePixelRatio}),(function(){return e}),on,3)(),jn((function(){return Xe}),(function(){return e}),on,1)()},Pn=Qe({frag:O,vert:C,attributes:{position:[0,1,0,0,1,0,0,1,1,1,1,0]},uniforms:{projection:un,model:dn,view:fn,texture:en},count:6}),zn=function(){if(Te>=0){var e=Pe.points[Te].slice(0,2),t=Object(l.a)(e,2),n=[t[0],t[1],0,1];m.a.multiply(Ee,ke,m.a.multiply(Ee,Oe.view,Ie)),m.c.transformMat4(n,n,Ee),Me.setPoints([-1,n[1],1,n[1]]),Ae.setPoints([n[0],1,n[0],-1]),Me.draw(),Ae.draw(),jn((function(){return(Xe+2*$e)*window.devicePixelRatio}),(function(){return 1}),Re,1)(),jn((function(){return(Xe+$e)*window.devicePixelRatio}),(function(){return 1}),Re,3)()}},kn=function(e){for(var t=new Float32Array(e),n=0;n<e;++n)t[n]=n;return t},In=function(e){var t=e.length;ft=Math.max(2,Math.ceil(Math.sqrt(t)));for(var n=new Float32Array(4*Math.pow(ft,2)),a=0;a<t;++a)n[4*a]=e[a][0],n[4*a+1]=e[a][1],n[4*a+2]=e[a][2]||0,n[4*a+3]=e[a][3]||0;return Qe.texture({data:n,shape:[ft,ft,4],type:"float"})},Mn=function(e){var t=Math.max.apply(Math,Object(f.a)(Object.keys(e)))+1;gt=Math.max(2,Math.ceil(Math.sqrt(t)));for(var n=new Float32Array(4*Math.pow(gt,2)),a=0;a<t;a+=1)Object(E.a)(e,a)?(n[4*a]=e[a][0],n[4*a+1]=e[a][1],n[4*a+2]=e[a][2],n[4*a+3]=e[a][3]):(n[4*a]=0,n[4*a+1]=0,n[4*a+2]=0,n[4*a+3]=0);return Qe.texture({data:n,shape:[gt,gt,4],type:"float"})},An=function(e){var t=0,n=0;return e.forEach((function(e){t+=e[0],n+=e[1]})),[t/e.length,n/e.length]},Ln=function(e){var t=An(e),n=0;e.forEach((function(e){var a=Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2);a>n&&(n=a)}));var a=Math.sqrt(n);return[t[0]-a,t[1]-a,t[0]+a,t[1]+a]},Vn=function(e){pt=!1,tt=e.length,Le=In(e),Ve({usage:"static",type:"float",data:kn(tt)}),Pe=new p.a(e,(function(e){return e[0]}),(function(e){return e[1]}),16);var t=Object(S.a)(e,2),n=Object(j.a)(t,(function(e,n){return Ln(t[n])}));De=Mn(n),pt=!0},Fn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];pt&&(Qe.clear({color:[0,0,0,0],depth:1,stencil:0}),Et.clear(),vt=Oe.tick(),We&&Pn(),Et.draw(e,xt,St,wt),On(),Je||!st&&!t||zn(),Te>=0&&Cn(),nt.length&&_n(),Ce.draw(),vt&&Se.publish("view",Oe.view))},Rn=Object(g.a)(Fn),Nn=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&Vn(e)},Tn=function(e){return function(){var t=e.apply(void 0,arguments);return Rn(),t}},Dn=function(e){e&&(Ye=we(e,!0))},Gn=function(e){We=e||null},Yn=function(e){e&&(at=we(e,!0),Ce.setStyle({color:at}))},Wn=function(e){+e&&(ot=+e,It=Object(b.a)(kt,ot))},qn=function(e){+e&&(it=+e)},Bn=function(e){null!==e&&(st=e)},Hn=function(e){e&&(ut=we(e,!0),Me.setStyle({color:ut}),Ae.setStyle({color:ut}))},Kn=function(e){null!==e&&(xt=e)},Un=function(e){null!==e&&(yt=e)},Xn=function(e){null!==e&&(wt=e)},$n=function(e){null!==e&&(St=e)},Qn=function(){Qe.poll(),Oe.refresh()},Jn=function(e){return"background"===e?Ye:"backgroundImage"===e?We:"colorBy"===e?mt:"colors"===e?Be:"lassoColor"===e?at:"showRecticle"===e?st:"recticleColor"===e?ut:"opacity"===e?ht:"pointOutlineWidth"===e?$e:"pointSize"===e?Ue:"pointSizeSelected"===e?Xe:"width"===e?He:"height"===e?Ke:"aspectRatio"===e?ct:"canvas"===e?qe:"regl"===e?Qe:"version"===e?"0.7.5":void 0},Zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.background,n=void 0===t?null:t,a=e.backgroundImage,o=void 0===a?We:a,i=e.colorBy,r=void 0===i?mt:i,l=e.colors,c=void 0===l?null:l,s=e.opacity,u=void 0===s?null:s,f=e.lassoColor,d=void 0===f?null:f,m=e.lassoMinDelay,v=void 0===m?null:m,p=e.lassoMinDist,h=void 0===p?null:p,b=e.showRecticle,g=void 0===b?null:b,x=e.recticleColor,y=void 0===x?null:x,w=e.pointOutlineWidth,S=void 0===w?null:w,E=e.pointSize,j=void 0===E?null:E,O=e.pointSizeSelected,C=void 0===O?null:O,_=e.height,P=void 0===_?null:_,z=e.width,k=void 0===z?null:z,I=e.aspectRatio,M=void 0===I?null:I,A=e.animationMix,L=void 0===A?null:A,V=e.animateDepth,F=void 0===V?null:V,R=e.showPatterns,N=void 0===R?null:R,T=e.useColors,D=void 0===T?null:T;Dn(n),Gn(o),Jt(r),Ht(c),Zt(u),Yn(d),Wn(v),qn(h),Bn(g),Hn(y),$t(S),Ut(j),Xt(C),Kt(P),Qt(k),Bt(M),Kn(L),Un(F),Xn(N),$n(D),qt(),Oe.refresh(),Qn()},ea=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=!1;if(e>=0){t=!0;var n=e!==Te;Te=e,Re.subdata([e]),n&&Se.publish("pointover",Te)}else t=Te,Te=void 0,+t>=0&&Se.publish("pointout",t)},ta=function(){ye?Oe.set(m.a.clone(ye)):Oe.lookAt(Object(f.a)(ie),fe,ve),Se.publish("view",Oe.view)},na=function(e){switch(e.key){case"Escape":At()}},aa=function(){bt=!0},oa=function(){ea(),bt=!1},ia=function(){Oe=v(qe),ye?Oe.set(m.a.clone(ye)):Oe.lookAt(Object(f.a)(ie),fe,ve)},ra=function(){},la=function(){Vn([])},ca=function(){qt(),ia(),Ce=Object(x.a)(Qe,{color:at,width:3,is2d:!0}),Me=Object(x.a)(Qe,{color:ut,width:1,is2d:!0}),Ae=Object(x.a)(Qe,{color:ut,width:1,is2d:!0}),qe.addEventListener("wheel",ra),Ve=Qe.buffer(),Fe=Qe.buffer(),Re=Qe.buffer({usage:"dynamic",type:"float",length:X}),Ne=Wt(),Zn({width:He,height:Ke}),window.addEventListener("keyup",na,!1),window.addEventListener("blur",Yt,!1),window.addEventListener("mousedown",Rt,!1),window.addEventListener("mouseup",Nt,!1),window.addEventListener("mousemove",Gt,!1),qe.addEventListener("mouseenter",aa,!1),qe.addEventListener("mouseleave",oa,!1),qe.addEventListener("click",Tt,!1),qe.addEventListener("dblclick",Dt,!1);var e=qe.getContext("webgl")||qe.getContext("experimental-webgl");Ge=new w.a(e),Qe.frame((function(e){var t=e.time;Ge.begin(),Fn(t),Ge.end(),Ge.nextFrame(Math.floor(1e3*t))}))},sa=function(){window.removeEventListener("keyup",na,!1),window.removeEventListener("blur",Yt,!1),window.removeEventListener("mousedown",Rt,!1),window.removeEventListener("mouseup",Nt,!1),window.removeEventListener("mousemove",Gt,!1),qe.removeEventListener("mouseenter",aa,!1),qe.removeEventListener("mouseleave",oa,!1),qe.removeEventListener("click",Tt,!1),qe.removeEventListener("dblclick",Dt,!1),qe=void 0,Oe=void 0,Qe=void 0,Ce.destroy(),Se.clear()};return ca(qe),{clear:Tn(la),deselect:At,destroy:sa,draw:Nn,get:Jn,hover:ea,refresh:Qn,reset:Tn(ta),select:Lt,set:Zn,subscribe:Se.subscribe,unsubscribe:Se.unsubscribe,patternManager:Et}},Ee=n(433),je=n(57),Oe=!0,Ce=!0,_e=5,Pe=[0,1,0],ze=[Object(z.a)({},G[D],{type:D,category:0}),Object(z.a)({},G[T],{type:T,category:1}),Object(z.a)({},G[D],{type:D,category:2,direction:-1}),Object(z.a)({},G[T],{type:T,category:3,direction:-1}),Object(z.a)({},G[D],{type:D,category:4,invert:1}),Object(z.a)({},G[T],{type:T,category:5,invert:1}),Object(z.a)({},G[D],{type:D,category:6,direction:-1,invert:1}),Object(z.a)({},G[T],{type:T,category:7,direction:-1,invert:1}),Object(z.a)({},G[D],{type:D,category:8,direction:-1}),Object(z.a)({},G[T],{type:T,category:9,direction:-1,invert:1})],ke=function(e){return{type:"set max categories",value:e}},Ie=n(26),Me=n(49),Ae=Object(Ie.a)((function(e,t,n){return e(Object(A.a)({},t,n))}),100);function Le(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=Object(a.useState)(t),r=Object(l.a)(i,2),c=r[0],s=r[1],u=function(t){Object(Me.a)(o)&&(t=o(t)),s(t),Ae(n,e,t)};return[c,u]}function Ve(e){return"".concat(Math.round(100*e),"%")}function Fe(e){var t=e.scatterplot,n=Le("pointSize",_e,t&&t.set),i=Object(l.a)(n,2),r=i[0],c=i[1],s=Le("animationMix",Pe,t&&t.set),f=Object(l.a)(s,2),d=f[0],m=f[1],v=Object(a.useState)(!1),p=Object(l.a)(v,2),h=p[0],b=p[1],g=Object(u.d)((function(e){return e.isDarkTheme})),x=Object(u.c)();return o.a.createElement("div",null,o.a.createElement(Ee.d,null),o.a.createElement(Ee.e,null,o.a.createElement(Ee.h,{defaultChecked:g,label:"Dark theme",onChange:function(){return x({type:"toggle theme"})},innerLabel:"No",innerLabelChecked:"Yes",alignIndicator:je.a.RIGHT})),o.a.createElement(Ee.e,null,o.a.createElement(Ee.h,{defaultChecked:Ce,label:"Use colors",onChange:function(e){return t.set({useColors:e.target.checked})},innerLabel:"No",innerLabelChecked:"Yes",alignIndicator:je.a.RIGHT})),o.a.createElement(Ee.e,null,o.a.createElement(Ee.h,{defaultChecked:Oe,label:"Show patterns",onChange:function(e){return t.set({showPatterns:e.target.checked})},innerLabel:"No",innerLabelChecked:"Yes",alignIndicator:je.a.RIGHT})),o.a.createElement(Ee.e,{label:"Point size",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:10,labelStepSize:10,labelPrecision:1,value:r,onChange:c,fill:!0})),o.a.createElement(Ee.d,null),o.a.createElement("span",{className:"option-title bp3-text-muted"},"Animation mix"),o.a.createElement(Ee.e,{label:"Saturation",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:1,labelStepSize:1,labelRenderer:Ve,value:d[0],onChange:function(e){return m([e,d[1],d[2]])},fill:!0})),o.a.createElement(Ee.e,{label:"Value",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:1,labelStepSize:1,labelRenderer:Ve,value:d[1],onChange:function(e){return m([d[0],e,d[2]])},fill:!0})),o.a.createElement(Ee.e,{label:"Alpha",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:1,labelStepSize:1,labelRenderer:Ve,value:d[2],onChange:function(e){return m([d[0],d[1],e])},fill:!0,disabled:h})),o.a.createElement(Ee.e,null,o.a.createElement(Ee.h,{checked:h,label:"Depth (experimental)",onChange:function(e){b(e.target.checked),t&&t.set({animateDepth:e.target.checked}),e.target.checked?m([0,0,1]):m([0,1,0])},innerLabel:"No",innerLabelChecked:"Yes",alignIndicator:je.a.RIGHT})),o.a.createElement(Ee.d,null),o.a.createElement("p",{style:{textAlign:"center"}},o.a.createElement("b",null,"Note: "),o.a.createElement("span",{className:"bp3-text-muted"},"Each slider has a 100ms debounce to avoid clogging the system.")))}var Re=n(85),Ne=n(82),Te=n(39);function De(e,t,n,a,o){var i,r,l=2*Math.PI;do{i=Math.random(),r=Math.random()}while(i<=Number.EPSILON);var c=l*r,s=Math.sqrt(-2*Math.log(i)),u=s*Math.cos(c),f=s*Math.sin(c),d=Math.cos(a),m=Math.sin(a),v=d*m*(o-1);return[(u=(o*Math.pow(d,2)+Math.pow(m,2))*u+v*f)*n+e,(f=v*u+(Math.pow(d,2)+o*Math.pow(m,2))*f)*n+t]}function Ge(e){var t=e.clusterKey,n=e.category,a=e.setIsOpen,i=e.isOpen,r=Object(u.d)((function(e){return e.categoryColors}),u.b);return o.a.createElement(Ee.a,{className:"cluster-button",minimal:!0,fill:!0,active:i,onClick:function(){return a(!i)}},o.a.createElement("div",{className:"jsx-3670062821 cluster-header"},o.a.createElement("div",{className:"jsx-3670062821 cluster-title"},o.a.createElement("b",{className:"jsx-3670062821"},"Cluster: ")," #",t),o.a.createElement("div",{className:"jsx-3670062821 cluster-category"},o.a.createElement("div",{style:{backgroundColor:r[n]},className:"jsx-3670062821 cluster-category__color-box"})),o.a.createElement(s.a,{id:"1811696610"},[".cluster-button .bp3-button-text{width:100%;}"]),o.a.createElement(s.a,{id:"1213808302"},[".cluster-header.jsx-3670062821{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}",".cluster-title.jsx-3670062821{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".cluster-category__color-box.jsx-3670062821{float:left;width:20px;height:20px;margin:5px;border:1px solid rgba(0,0,0,.2);}"])))}var Ye=Object(Ie.a)((function(e,t){return e({x:t})}),500),We=Object(Ie.a)((function(e,t){return e({y:t})}),500),qe=Object(Ie.a)((function(e,t){return e({sigma:t})}),500),Be=Object(Ie.a)((function(e,t){return e({angle:t})}),500),He=Object(Ie.a)((function(e,t){return e({amplitude:t})}),500),Ke=Object(Ie.a)((function(e,t){return e({n:t})}),500),Ue=Object(Ie.a)((function(e,t){return e({category:t})}),500);function Xe(e){var t=e.clusterKey,n=e.cluster,i=e.setCluster,r=e.removeCluster,c=Object(a.useState)(n.x),u=Object(l.a)(c,2),f=u[0],d=u[1],m=Object(a.useState)(n.y),v=Object(l.a)(m,2),p=v[0],h=v[1],b=Object(a.useState)(n.sigma),g=Object(l.a)(b,2),x=g[0],y=g[1],w=Object(a.useState)(n.angle),S=Object(l.a)(w,2),E=S[0],j=S[1],O=Object(a.useState)(n.amplitude),C=Object(l.a)(O,2),_=C[0],P=C[1],z=Object(a.useState)(n.n),k=Object(l.a)(z,2),I=k[0],M=k[1],A=Object(a.useState)(n.category),L=Object(l.a)(A,2),V=L[0],F=L[1],R=Object(a.useState)(!1),N=Object(l.a)(R,2),T=N[0],D=N[1];return o.a.createElement("div",{className:"jsx-2347825890"},o.a.createElement(Ge,{clusterKey:t,category:V,setIsOpen:D,isOpen:T}),o.a.createElement(Ee.c,{isOpen:T},o.a.createElement(Ee.e,{label:"X-pos",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:-1,max:1,labelPrecision:1,labelStepSize:2,value:f,onChange:function(e){d(e),Ye(i,e)},fill:!0})),o.a.createElement(Ee.e,{label:"Y-pos",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:-1,max:1,labelPrecision:1,labelStepSize:2,value:p,onChange:function(e){h(e),We(i,e)},fill:!0})),o.a.createElement(Ee.e,{label:"Std. Dev.",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:.8,labelPrecision:1,labelStepSize:.8,value:x,onChange:function(e){y(e),qe(i,e)},fill:!0})),o.a.createElement(Ee.e,{label:"Angle",inline:!0},o.a.createElement(Ee.g,{stepSize:.03,min:0,max:Math.PI,labelPrecision:1,labelStepSize:Math.PI,value:E,onChange:function(e){j(e),Be(i,e)},fill:!0})),o.a.createElement(Ee.e,{label:"Amplitude",inline:!0},o.a.createElement(Ee.g,{stepSize:.03,min:0,max:3,labelPrecision:1,labelStepSize:3,value:_,onChange:function(e){P(e),He(i,e)},fill:!0})),o.a.createElement(Ee.e,{label:"Points",inline:!0},o.a.createElement(Ee.g,{stepSize:10,min:1,max:1e4,labelStepSize:9999,value:I,onChange:function(e){M(e),Ke(i,e)},fill:!0})),o.a.createElement(Ee.e,{label:"Category",inline:!0},o.a.createElement(Ee.g,{stepSize:1,min:0,max:9,labelStepSize:9,value:V,onChange:function(e){F(e),Ue(i,e)},fill:!0})),o.a.createElement("div",{className:"jsx-2347825890 cluster-remove"},o.a.createElement(Ee.a,{intent:Te.a.DANGER,onClick:function(){return r(t)}},"Remove this cluster")),o.a.createElement(Ee.d,null)),o.a.createElement(s.a,{id:"2347825890"},[".cluster-remove.jsx-2347825890{margin:10px 0;text-align:center;}"]))}var $e={csv:n.p+"3345740ca9df509867741b3971dd6bb1.csv",dataFields:["carat","depth","table","price","x","y","z"],catFields:["cut"]},Qe={csv:n.p+"72b7a04c97f6f9cedc338634227060b2.csv",dataFields:["Length","Diameter","Height","Whole weight","Shucked weight","Viscera weight","Shell weight","Rings"],catFields:["Sex"]},Je=n(175),Ze=n.n(Je);var et={Diamonds:$e,Abalone:Qe};function tt(e){var t=e.dataSource,n=e.dataOptions,i=e.setDataOptions,r=et[t],l=r.dataFields,c=r.catFields,u=n.xField,f=n.yField,d=n.catField;Object(a.useEffect)((function(){i((function(e){return Object(z.a)({},e,{xField:l[0],yField:l[1],catField:c[0]})}))}),[t]);var m=l.filter((function(e){return e!==f})),v=l.filter((function(e){return e!==u}));return null===u||null===f||null===d?null:o.a.createElement("div",{className:"jsx-3741392318"},o.a.createElement(Ee.e,{label:"X",inline:!0,className:"data-option-select"},o.a.createElement(Ee.f,{options:m,onChange:function(e){var t=e.target.value;i((function(e){return Object(z.a)({},e,{xField:t})}))},value:u,fill:!0})),o.a.createElement(Ee.e,{label:"Y",inline:!0,className:"data-option-select"},o.a.createElement(Ee.f,{options:v,onChange:function(e){var t=e.target.value;i((function(e){return Object(z.a)({},e,{yField:t})}))},value:f,fill:!0})),o.a.createElement(Ee.e,{label:"Category",inline:!0,className:"data-option-select"},o.a.createElement(Ee.f,{options:c,onChange:function(e){var t=e.target.value;i((function(e){return Object(z.a)({},e,{catField:t})}))},value:d,fill:!0})),o.a.createElement(s.a,{id:"3741392318"},[".data-option-select{margin-bottom:5px;}"]))}function nt(e){var t=e.scatterplot,n=Object(a.useState)("Diamonds"),i=Object(l.a)(n,2),r=i[0],c=i[1],f=Object(a.useState)({xField:null,yField:null,catField:null}),d=Object(l.a)(f,2),m=d[0],v=d[1],p=Object(u.c)();return o.a.createElement("div",{className:"jsx-4110324435"},o.a.createElement(Ee.e,{label:"Data source",inline:!0},o.a.createElement(Ee.f,{options:Object.keys(et),onChange:function(e){return c(e.target.value)},value:r,fill:!0})),o.a.createElement(Ee.d,null),o.a.createElement(tt,{dataSource:r,dataOptions:m,setDataOptions:v}),o.a.createElement("div",{className:"jsx-4110324435 data-add-new"},o.a.createElement(Ee.a,{intent:Te.a.PRIMARY,onClick:function(){return function(e,t,n,a){var o=a.xField,i=a.yField,r=a.catField,l=new Map,c=0,s=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,d=Number.NEGATIVE_INFINITY,m=[];Ze.a.parse(n,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,download:!0,step:function(e,t){l.has(e.data[r])||l.set(e.data[r],c++),m.push([e.data[o],e.data[i],l.get(e.data[r]),0]),e.data[o]<s&&(s=e.data[o]),e.data[o]>f&&(f=e.data[o]),e.data[i]<u&&(u=e.data[i]),e.data[i]>d&&(d=e.data[i])},complete:function(){for(var n=(f-s)/2,a=(d-u)/2,o=0;o<m.length;++o)m[o][0]=(m[o][0]-s)/n-1,m[o][1]=(m[o][1]-u)/a-1;console.log(l),t(ke(c)),e(m)}})}(t.draw,p,et[r].csv,m)}},"Load data")),o.a.createElement(s.a,{id:"4110324435"},[".data-add-new.jsx-4110324435{margin:10px 0;text-align:center;}"]))}var at=function(e){if(e>9)throw new Error("There are at most 10 categories!");var t=Math.random()/3+.1,n=1-2*t-.2;return{x:Math.random()*n*2-n,y:Math.random()*n*2-n,sigma:t,angle:Math.random()*Math.PI,amplitude:Math.random(),n:100,category:e}},ot=function(){var e=3;return function(){return e++}}();function it(e){var t=e.scatterplot,n=Object(a.useState)({1:at(0),2:at(1)}),i=Object(l.a)(n,2),r=i[0],c=i[1],d=Object(u.c)();Object(a.useEffect)((function(){null!==t&&(t.draw(Object.keys(r).map((function(e){return function(e){for(var t=e.x,n=void 0===t?0:t,a=e.y,o=void 0===a?0:a,i=e.sigma,r=e.angle,l=void 0===r?0:r,c=e.amplitude,s=void 0===c?2:c,u=e.n,d=e.category,m=[],v=0;v<u;++v)m.push([].concat(Object(f.a)(De(n,o,i,l,s)),[d,0]));return m}(r[e])})).reduce((function(e,t){return e.concat(t)}),[])),d(ke(Math.max.apply(Math,Object(f.a)(Object.keys(r).map((function(e){return r[e].category}))))+1)))}),[t,r]);var m=function(e){return function(t){c((function(n){return Object(z.a)({},n,Object(A.a)({},e,Object(z.a)({},n[e],{},t)))}))}},v=function(e){return c((function(t){t[e];return Object(Re.a)(t,[e].map(Ne.a))}))},p=Object.keys(r).map((function(e){return o.a.createElement(Xe,{key:e,clusterKey:e,cluster:r[e],setCluster:m(e),removeCluster:v})}));return o.a.createElement("div",{className:"jsx-4110324435"},o.a.createElement(Ee.d,null),o.a.createElement("p",{style:{textAlign:"center"},className:"jsx-4110324435 bp3-text-muted"},"Click on a cluster to show/hide options."),p,o.a.createElement("div",{className:"jsx-4110324435 data-add-new"},o.a.createElement(Ee.a,{intent:Te.a.PRIMARY,onClick:function(){return e=function(){var e=new Set;Object.keys(r).forEach((function(t){return e.add(r[t].category)}));for(var t=0;t<10;++t)if(!e.has(t))return t;return 0}(),c((function(t){return Object(z.a)({},t,Object(A.a)({},ot(),at(e)))}));var e}},"Add cluster")),o.a.createElement(Ee.d,null),o.a.createElement("span",{className:"jsx-4110324435 option-title bp3-text-muted"},"LOAD REAL DATA"),o.a.createElement(nt,{scatterplot:t}),o.a.createElement(s.a,{id:"4110324435"},[".data-add-new.jsx-4110324435{margin:10px 0;text-align:center;}"]))}var rt=n(112),lt=n.n(rt);function ct(e){var t=e.patternKey,n=e.category,a=e.setIsOpen,i=e.isOpen,r=Object(u.d)((function(e){return e.categoryColors}),u.b);return o.a.createElement(Ee.a,{className:"pattern-button",minimal:!0,fill:!0,active:i,onClick:function(){return a(!i)}},o.a.createElement("div",{className:"jsx-542388820 pattern-header"},o.a.createElement("div",{className:"jsx-542388820 pattern-title"},o.a.createElement("b",{className:"jsx-542388820"},"Pattern: ")," #",t),o.a.createElement("div",{className:"jsx-542388820 pattern-category"},o.a.createElement("div",{style:{backgroundColor:r[n]},className:"jsx-542388820 pattern-category__color-box"})),o.a.createElement(s.a,{id:"927492146"},[".pattern-button .bp3-button-text{width:100%;}"]),o.a.createElement(s.a,{id:"3486257967"},[".pattern-header.jsx-542388820{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}",".pattern-title.jsx-542388820{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".pattern-category__color-box.jsx-542388820{float:left;width:20px;height:20px;margin:5px;border:1px solid rgba(0,0,0,.2);}"])))}var st=n(78),ut=["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999","#0fc"];function ft(e,t){var n=Object(u.c)(),o=Object(u.d)((function(e){return e.categoryColors}),u.b),i=Object(a.useState)(o[e.category]),r=Object(l.a)(i,2),c=r[0],s=r[1];return[c,function(a){t({hsvColor:[a.hsv.h/360,a.hsv.s,a.hsv.v]}),n(function(e,t){return{type:"update category color",category:e,color:t}}(e.category,a.hex)),s(a.hex)}]}function dt(e){return"".concat(Math.round(100*e),"%")}function mt(e){return"".concat(e.toPrecision(2),"s")}function vt(e){var t=e.pattern,n=e.setPattern,a=Le("a",t.a,n),i=Object(l.a)(a,2),r=i[0],c=i[1],s=Le("c1",t.c1,n),u=Object(l.a)(s,2),f=u[0],d=u[1],m=Le("c2",t.c2,n),v=Object(l.a)(m,2),p=v[0],h=v[1],b=Le("minValue",t.minValue,n),g=Object(l.a)(b,2),x=g[0],y=g[1],w=Le("cyclesPerSecond",t.cyclesPerSecond,n),S=Object(l.a)(w,2),E=S[0],j=S[1],O=Le("wavesPerCycle",t.wavesPerCycle,n),C=Object(l.a)(O,2),_=C[0],P=C[1],z=ft(t,n),k=Object(l.a)(z,2),I=k[0],M=k[1],A=Le("hueVariation",t.hueVariation,n),L=Object(l.a)(A,2),V=L[0],F=L[1],R=Le("hueVariationPeriod",t.hueVariationPeriod,n),N=Object(l.a)(R,2),T=N[0],D=N[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"option-title bp3-text-muted"},"Wave Parameters"),o.a.createElement(Ee.e,null,o.a.createElement(Ee.h,{defaultChecked:1===t.direction,label:"Direction",onChange:function(e){return n({direction:e.target.checked?1:-1})},innerLabel:"In",innerLabelChecked:"Out",alignIndicator:je.a.RIGHT})),o.a.createElement(Ee.e,null,o.a.createElement(Ee.h,{defaultChecked:1===t.invert,label:"Invert",onChange:function(e){return n({invert:e.target.checked?1:0})},innerLabel:"No",innerLabelChecked:"Yes",alignIndicator:je.a.RIGHT})),o.a.createElement(Ee.e,{label:"a",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:1,labelPrecision:2,labelStepSize:1,value:r,onChange:c,fill:!0})),o.a.createElement(Ee.e,{label:"c1",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:1,labelPrecision:2,labelStepSize:1,value:f,onChange:d,fill:!0})),o.a.createElement(Ee.e,{label:"c2",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:1,labelPrecision:2,labelStepSize:1,value:p,onChange:h,fill:!0})),o.a.createElement(Ee.e,{label:"Min value",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:1,labelStepSize:1,labelRenderer:dt,value:x,onChange:y,fill:!0})),o.a.createElement(Ee.e,{label:"Cycles/s",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:5,labelPrecision:1,labelStepSize:5,value:E,onChange:j,fill:!0})),o.a.createElement(Ee.e,{label:"Waves/cycle",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:5,labelPrecision:1,labelStepSize:5,value:_,onChange:P,fill:!0})),o.a.createElement("span",{className:"option-title bp3-text-muted"},"Color Parameters"),o.a.createElement(Ee.e,{label:"Color",inline:!0},o.a.createElement(st.CirclePicker,{color:I,colors:ut,onChange:M,circleSize:14,circleSpacing:1,width:150})),o.a.createElement(Ee.e,{label:"Hue amp.",inline:!0},o.a.createElement(Ee.g,{stepSize:.005,min:0,max:.2,labelPrecision:2,labelStepSize:.2,labelRenderer:dt,value:V,onChange:F,fill:!0})),o.a.createElement(Ee.e,{label:"Hue period",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:5,labelStepSize:5,labelRenderer:mt,value:T,onChange:D,fill:!0})))}function pt(e){return"".concat(Math.round(100*e),"%")}function ht(e){return"".concat(e.toPrecision(2),"s")}function bt(e){var t=e.pattern,n=e.setPattern,a=Le("gamma1",t.gamma1,n),i=Object(l.a)(a,2),r=i[0],c=i[1],s=Le("gamma2",t.gamma2,n),u=Object(l.a)(s,2),f=u[0],d=u[1],m=Le("maxValue",t.maxValue,n),v=Object(l.a)(m,2),p=v[0],h=v[1],b=Le("minValue",t.minValue,n),g=Object(l.a)(b,2),x=g[0],y=g[1],w=Le("cyclesPerSecond",t.cyclesPerSecond,n),S=Object(l.a)(w,2),E=S[0],j=S[1],O=Le("nSpokes",t.nSpokes,n),C=Object(l.a)(O,2),_=C[0],P=C[1],z=ft(t,n),k=Object(l.a)(z,2),I=k[0],M=k[1],A=Le("hueVariation",t.hueVariation,n),L=Object(l.a)(A,2),V=L[0],F=L[1],R=Le("hueVariationPeriod",t.hueVariationPeriod,n),N=Object(l.a)(R,2),T=N[0],D=N[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"option-title bp3-text-muted"},"Rotation Parameters"),o.a.createElement(Ee.e,null,o.a.createElement(Ee.h,{defaultChecked:1===t.direction,label:"Direction",onChange:function(e){return n({direction:e.target.checked?1:-1})},innerLabel:"Counter-clockwise",innerLabelChecked:"Clockwise",alignIndicator:je.a.RIGHT})),o.a.createElement(Ee.e,null,o.a.createElement(Ee.h,{defaultChecked:1===t.invert,label:"Invert",onChange:function(e){return n({invert:e.target.checked?1:0})},innerLabel:"No",innerLabelChecked:"Yes",alignIndicator:je.a.RIGHT})),o.a.createElement(Ee.e,{label:"gamma1",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:25,labelPrecision:1,labelStepSize:25,value:r,onChange:c,fill:!0})),o.a.createElement(Ee.e,{label:"gamma2",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:25,labelPrecision:1,labelStepSize:25,value:f,onChange:d,fill:!0})),o.a.createElement(Ee.e,{label:"Max value",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:1,labelStepSize:1,value:p,onChange:h,labelRenderer:pt,fill:!0})),o.a.createElement(Ee.e,{label:"Min value",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:1,labelStepSize:1,value:x,onChange:y,labelRenderer:pt,fill:!0})),o.a.createElement(Ee.e,{label:"Cycles/s",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:5,labelPrecision:1,labelStepSize:5,value:E,onChange:j,fill:!0})),o.a.createElement(Ee.e,{label:'"Spokes"',inline:!0},o.a.createElement(Ee.g,{stepSize:1,min:1,max:10,labelStepSize:9,value:_,onChange:P,fill:!0})),o.a.createElement("span",{className:"option-title bp3-text-muted"},"Color Parameters"),o.a.createElement(Ee.e,{label:"Color",inline:!0},o.a.createElement(st.CirclePicker,{color:I,colors:ut,onChange:M,circleSize:14,circleSpacing:1,width:150})),o.a.createElement(Ee.e,{label:"Hue amp.",inline:!0},o.a.createElement(Ee.g,{stepSize:.005,min:0,max:.2,labelPrecision:2,labelStepSize:.2,labelRenderer:pt,value:V,onChange:F,fill:!0})),o.a.createElement(Ee.e,{label:"Hue period",inline:!0},o.a.createElement(Ee.g,{stepSize:.01,min:0,max:5,labelStepSize:5,labelRenderer:ht,value:T,onChange:D,fill:!0})))}function gt(e){var t,n=e.patternKey,i=e.pattern,r=e.setPattern,c=Object(a.useState)(i.type),s=Object(l.a)(c,2),u=s[0],f=s[1],d=Object(a.useState)(!1),m=Object(l.a)(d,2),v=m[0],p=m[1];return u===T?t=o.a.createElement(vt,{pattern:i,setPattern:r}):u===D&&(t=o.a.createElement(bt,{pattern:i,setPattern:r})),o.a.createElement("div",null,o.a.createElement(ct,{patternKey:n,category:i.category,setIsOpen:p,isOpen:v}),o.a.createElement(Ee.c,{isOpen:v},o.a.createElement(Ee.e,{label:"Type",inline:!0},o.a.createElement(Ee.f,{options:[{label:"Radar",value:D},{label:"Pulse",value:T}],onChange:function(e){var t=parseInt(e.target.value,10);r(Object(z.a)({type:t},G[t])),f(t)},value:u,fill:!0})),t,o.a.createElement(Ee.d,null)))}var xt=function(){var e=3;return function(){return e++}}();function yt(e){var t=lt()(e).toHsv();return[t.h/360,t.s,t.v]}function wt(e){var t=e.scatterplot,n=Object(u.d)((function(e){return e.categoryColors}),u.b),i=Object(a.useState)({1:Object(z.a)({},ze[0],{hsvColor:yt(n[0])}),2:Object(z.a)({},ze[1],{hsvColor:yt(n[1])})}),r=Object(l.a)(i,2),c=r[0],f=r[1],d=Object(u.d)((function(e){return e.maxCategories}));Object(a.useEffect)((function(){null!==t&&t.patternManager.setAll(Object.keys(c).map((function(e){return c[e]})))}),[t,c]);var m=function(e){return function(t){f((function(n){return Object(z.a)({},n,Object(A.a)({},e,Object(z.a)({},n[e],{},t)))}))}};Object(a.useEffect)((function(){if(d>0){var e=new Set(new Array(d).fill().map((function(e,t){return t})));Object.keys(c).forEach((function(t){var n=c[t];n.category>=d?function(e){f((function(t){t[e];return Object(Re.a)(t,[e].map(Ne.a))}))}(t):e.delete(n.category)})),e.forEach((function(e){return function(e){return f((function(t){return Object(z.a)({},t,Object(A.a)({},xt(),Object(z.a)({},ze[e],{hsvColor:yt(n[e])})))}))}(e)}))}}),[d]);var v=Object.keys(c).map((function(e){return o.a.createElement(gt,{key:e,patternKey:e,pattern:c[e],setPattern:m(e)})}));return o.a.createElement("div",{className:"jsx-4110324435"},o.a.createElement(Ee.d,null),o.a.createElement("p",{style:{textAlign:"center"},className:"jsx-4110324435 bp3-text-muted"},"Click on a cluster to show/hide options."),v,o.a.createElement(s.a,{id:"4110324435"},[".data-add-new.jsx-4110324435{margin:10px 0;text-align:center;}"]))}function St(e){var t=e.scatterplot,n=Object(u.d)((function(e){return e.isDarkTheme}));return o.a.createElement(Ee.b,{className:"card-sidebar ".concat(n?"bp3-dark":""),elevation:2},o.a.createElement(Ee.j,{id:"sidebar-tabs"},o.a.createElement(Ee.i,{title:"Scatterplot",id:"scatterplot-options-tab",panel:o.a.createElement(Fe,{scatterplot:t})}),o.a.createElement(Ee.i,{title:"Data",id:"data-options-tab",panel:o.a.createElement(it,{scatterplot:t})}),o.a.createElement(Ee.i,{title:"Patterns",id:"patterns-options-tab",panel:o.a.createElement(wt,{scatterplot:t})})),o.a.createElement(s.a,{id:"2537287085"},[".card-sidebar{width:300px;border-radius:0;overflow-y:scroll;overflow-x:hidden;}",".bp3-tab-list{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]))}function Et(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{id:"1848306565"},["html,body,#root{margin:0;padding:0;width:100%;height:100%;}",".bp3-collapse-body{padding:10px 0;}",".bp3-form-group{margin-bottom:0px;}",".bp3-form-group.bp3-inline label.bp3-label{margin-right:20px;min-width:70px;}",".circle-picker{margin-top:5px;}",".option-title{font-weight:600;text-transform:uppercase;text-align:center;display:block;margin:10px 0 5px 0;}"]))}var jt=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],i=t[1],r=Object(u.d)((function(e){return e.isDarkTheme})),c=Object(u.d)((function(e){return e.categoryColors}),u.b),f=Object(a.useCallback)((function(e){!function(e,t,n){var a=e.getBoundingClientRect(),o=a.width,i=a.height,r=Se({canvas:e,width:o,height:i,lassoMinDelay:10,lassoMinDist:2,pointSize:_e,showRecticle:!0,recticleColor:[1,1,.878431373,.33]});window.addEventListener("resize",(function(){var t=e.getBoundingClientRect();o=t.width,i=t.height,r.set({width:o,height:i})})),r.set({colorBy:"category",colors:n}),t(r)}(e,i,c)}),[i]),d="#000000";return o.a.createElement("div",{className:s.a.dynamic([["773189250",[r?d:"#ffffff"]]])+" App"},o.a.createElement(Et,null),o.a.createElement("div",{className:s.a.dynamic([["773189250",[r?d:"#ffffff"]]])+" content"},o.a.createElement("div",{className:s.a.dynamic([["773189250",[r?d:"#ffffff"]]])+" canvas-wrapper"},o.a.createElement("canvas",{ref:f,className:s.a.dynamic([["773189250",[r?d:"#ffffff"]]])+" canvas"}))),o.a.createElement(St,{scatterplot:n}),o.a.createElement(s.a,{id:"773189250",dynamic:[r?d:"#ffffff"]},[".App.__jsx-style-dynamic-selector{background-color:".concat(r?d:"#ffffff",";width:100%;height:100%;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"),".content.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;height:100%;position:relative;}",".canvas-wrapper.__jsx-style-dynamic-selector{position:absolute;top:0;right:0;bottom:0;left:0;}",".canvas.__jsx-style-dynamic-selector{position:absolute;width:100%;height:100%;}"]))},Ot=n(47);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ct=Object(Ot.b)({categoryColors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;if("update category color"===t.type){var n=Object(f.a)(e);return n[t.category]=t.color,n}return e},isDarkTheme:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return"toggle theme"===t.type?!e:e},maxCategories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return"set max categories"===t.type?t.value:e}}),_t=Object(Ot.c)(Ct);r.a.render(o.a.createElement(u.a,{store:_t},o.a.createElement(jt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[228,1,2]]]);
//# sourceMappingURL=main.2bff84cb.chunk.js.map