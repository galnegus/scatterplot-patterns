(this["webpackJsonpscatterplot-patterns"]=this["webpackJsonpscatterplot-patterns"]||[]).push([[0],{232:function(e,t,n){e.exports=n(433)},433:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),i=n.n(o),l=n(1),c=n(10),s=n.n(c),u=n(9),f=n(7),d=n(170),m=n(8),p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.distance,a=void 0===n?1:n,r=t.target,o=void 0===r?[0,0]:r,i=t.rotation,l=void 0===i?0:i,c=t.isNdc,s=void 0===c||c,u=t.isFixed,f=void 0!==u&&u,p=t.isPan,v=void 0===p||p,h=t.panSpeed,b=void 0===h?1:h,g=t.isRotate,x=void 0===g||g,y=t.rotateSpeed,w=void 0===y?1:y,S=t.isZoom,E=void 0===S||S,j=t.zoomSpeed,O=void 0===j?1:j,C=t.onKeyDown,_=void 0===C?function(){}:C,k=t.onKeyUp,P=void 0===k?function(){}:k,z=t.onMouseDown,I=void 0===z?function(){}:z,M=t.onMouseUp,A=void 0===M?function(){}:M,F=t.onMouseMove,L=void 0===F?function(){}:F,V=t.onWheel,R=void 0===V?function(){}:V,N=Object(d.a)(o,a,l),D=!1,T=0,G=0,Y=0,B=0,W=!1,q=0,H=0,K=0,U=1,X=1,J=1,$=!1,Q=s?function(e){return e/U*2*J}:function(e){return e},Z=s?function(e){return e/X*2}:function(e){return-e},ee=s?function(e){return(e/U*2-1)*J}:function(e){return e},te=s?function(e){return 1-e/X*2}:function(e){return e},ne=function(){if(f)return!1;if(D=!1,v&&W&&!$&&(N.pan([Q(b*(T-Y)),Z(b*(B-G))]),D=!0),E&&q){var e=O*Math.exp(q/X),t=ee(T),n=te(G);N.scale(1/e,[t,n]),D=!0}if(x&&W&&$){var a=U/2,r=X/2,o=Y-a,i=r-B,l=T-a,c=r-G,s=m.b.angle([o,i],[l,c]),u=o*c-l*i;N.rotate(w*s*Math.sign(u)),D=!0}return q=0,Y=T,B=G,D},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isFixed,n=void 0===t?null:t,a=e.isPan,r=void 0===a?null:a,o=e.isRotate,i=void 0===o?null:o,l=e.isZoom,c=void 0===l?null:l,s=e.panSpeed,u=void 0===s?null:s,d=e.rotateSpeed,m=void 0===d?null:d,p=e.zoomSpeed,h=void 0===p?null:p;f=null!==n?n:f,v=null!==r?r:v,x=null!==i?i:x,E=null!==c?c:E,b=+u>0?u:b,w=+m>0?m:w,O=+h>0?h:O},re=function(){var t=e.getBoundingClientRect();H=t.top,K=t.left,U=t.width,X=t.height,J=U/X},oe=function(e){$=!1,P(e)},ie=function(e){$=e.altKey,_(e)},le=function(e){W=!1,A(e)},ce=function(e){W=1===e.buttons,I(e)},se=function(e){T=e.clientX-K,G=e.clientY-H,L(e)},ue=function(e){e.preventDefault();var t=1===e.deltaMode?12:1;q+=t*(e.deltaY||0),R(e)},fe=function(){N=void 0,window.removeEventListener("keydown",ie),window.removeEventListener("keyup",oe),e.removeEventListener("mousedown",ce),window.removeEventListener("mouseup",le),window.removeEventListener("mousemove",se),e.removeEventListener("wheel",ue)};return window.addEventListener("keydown",ie,{passive:!0}),window.addEventListener("keyup",oe,{passive:!0}),e.addEventListener("mousedown",ce,{passive:!0}),window.addEventListener("mouseup",le,{passive:!0}),window.addEventListener("mousemove",se,{passive:!0}),e.addEventListener("wheel",ue,{passive:!1}),re(),N.config=ae,N.dispose=fe,N.refresh=re,N.tick=ne,N},v=n(182),h=n(171),b=n(120),g=n(172),x=n(93),y=n(173),w=n.n(y),S=n(181),E=n(63),j=n(176),O="precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\n\nvarying vec2 uv;\n\nvoid main () {\n  gl_FragColor = texture2D(texture, uv);\n}\n",C="precision mediump float;\n#define GLSLIFY 1\n\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\n\nattribute vec2 position;\n\nvarying vec2 uv;\n\nvoid main () {\n  uv = position;\n  gl_Position = projection * view * model * vec4(1.0 - 2.0 * position, 0, 1);\n}\n",_="#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n\nprecision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 color;\nvarying vec2 uv;\nuniform bool animateDepth;\n\nvoid main() {\n  float r = 0.0, delta = 0.0, alpha = 1.0;\n  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n  r = dot(cxy, cxy);\n\n  if (animateDepth) {\n    alpha = 1.0 - step(1.0, r);\n    if (alpha < 1.0) discard;\n    gl_FragColor = vec4(color.rgb, alpha);\n  } else {\n    #ifdef GL_OES_standard_derivatives\n      delta = fwidth(r);\n      alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n    #endif\n\n    gl_FragColor = vec4(color.rgb, alpha * color.a);\n  }\n  //if (alpha < 0.33) discard;\n  //gl_FragColor = vec4(color.rgb, alpha);\n}\n",k='precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D colorTex;\nuniform float colorTexRes;\nuniform sampler2D stateTex;\nuniform float stateTexRes;\nuniform float pointSize;\nuniform float pointSizeExtra;\nuniform float numPoints;\nuniform float globalState;\nuniform float isColoredByCategory;\nuniform float isColoredByValue;\nuniform float maxColor;\nuniform float numColorStates;\nuniform float scaling;\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\n\nattribute float stateIndex;\n\nuniform sampler2D textureAtlas;\nuniform vec2 atlasSize;\n\nuniform sampler2D bboxTex;\nuniform float bboxTexRes;\n\n// variables to send to the fragment shader\nvarying vec4 color;\nvarying vec2 uv;\n\nfloat modI(float a, float b) {\n  float m = a - floor((a + 0.5) / b) * b;\n   return floor(m + 0.5);\n}\n\nvec4 getFromTexture(in sampler2D texture, in float textureRes, in float index) {\n  float eps = 0.5 / textureRes;\n  float rowIndex = floor((index + eps) / textureRes);\n  vec2 texIndex = vec2(\n    (index / textureRes) - rowIndex + eps,\n    rowIndex / textureRes + eps\n  );\n  return texture2D(texture, texIndex);\n}\n\nvec2 texAtlasIndex(in float index, in vec2 position) {\n  float maxLength = atlasSize.x * atlasSize.y;\n  float modIndex = modI(index, maxLength);\n\n  float yIndex = floor((modIndex + 0.5) / atlasSize.x);\n  float xIndex = modI(modIndex, atlasSize.x);\n\n  float yStep = 1.0 / atlasSize.y;\n  float xStep = 1.0 / atlasSize.x;\n\n  vec2 min = vec2(xIndex * xStep, yIndex * yStep);\n  vec2 max = vec2((xIndex + 1.0) * xStep, (yIndex + 1.0) * yStep);\n\n  return position * (max - min) + min;\n}\n\nvec4 findColor(in float category) {\n  // this should be generalizable\n  vec4 bbox = getFromTexture(bboxTex, bboxTexRes, category);\n\n  vec2 min = bbox.xy;\n  vec2 max = bbox.zw;\n  vec2 normalizedPosition = (uv - min) / (max - min);\n\n  return texture2D(textureAtlas, texAtlasIndex(category, normalizedPosition));\n}\n\nvoid main() {\n  // First get the state\n  vec4 state = getFromTexture(stateTex, stateTexRes, stateIndex);\n\n  uv = state.xy;\n\n  // Determine color index\n  float colorIndexCat = state.z * isColoredByCategory;\n  float colorIndexVal = floor(state.w * maxColor) * isColoredByValue;\n  float colorIndex = colorIndexCat + colorIndexVal;\n  // Multiply by the number of color states per color\n  // I.e., normal, active, hover, background, etc.\n  colorIndex *= numColorStates;\n  // Half a "pixel" or "texel" in texture coordinates\n  float eps = 0.5 / colorTexRes;\n  float colorLinearIndex = colorIndex + globalState;\n  // Need to add cEps here to avoid floating point issue that can lead to\n  // dramatic changes in which color is loaded as floor(3/2.9999) = 1 but\n  // floor(3/3.0001) = 0!\n  float colorRowIndex = floor((colorLinearIndex + eps) / colorTexRes);\n\n  vec2 colorTexIndex = vec2(\n    (colorLinearIndex / colorTexRes) - colorRowIndex + eps,\n    colorRowIndex / colorTexRes + eps\n  );\n\n  //color = texture2D(colorTex, colorTexIndex);\n  color = findColor(state.z);\n\n  gl_Position = projection * view * model * vec4(state.x, state.y, color.a * 0.99, 1); // depth gets clipped when z = 1.00, so * 0.99!\n\n  // The final scaling consists of linear scaling in [0, 1] and log scaling\n  // in [1, [\n  float finalScaling = min(1.0, scaling) + log2(max(1.0, scaling));\n\n  gl_PointSize = pointSize * finalScaling + pointSizeExtra;\n}\n',P=n(6),z=n(76),I=n(77),M=n(46),A=n(19),F="precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform float texAtlasIndex;\nuniform vec2 texAtlasSize;\nuniform float time;\n\nvarying vec2 posMin;\nvarying vec2 posMax;\n\nfloat modI(float a, float b) {\n  float m = a - floor((a + 0.5) / b) * b;\n  return floor(m + 0.5);\n}\n\nvoid main () {\n  float maxLength = texAtlasSize.x * texAtlasSize.y;\n  float modIndex = modI(texAtlasIndex, maxLength);\n\n  float yIndex = floor((modIndex + 0.5) / texAtlasSize.x);\n  float xIndex = modI(modIndex, texAtlasSize.x);\n\n  float yStep = 1.0 / float(texAtlasSize.y);\n  float xStep = 1.0 / float(texAtlasSize.x);\n\n  posMin = vec2(xIndex * xStep, yIndex * yStep);\n  posMax = vec2((xIndex + 1.0) * xStep, (yIndex + 1.0) * yStep);\n\n  vec2 texPos = (position + 1.0) * 0.5;\n  texPos = texPos * (posMax - posMin) + posMin;\n  texPos = texPos * 2.0 - 1.0; \n\n  gl_Position = vec4(texPos, 0, 1);\n}\n";var L={a:1,c1:.1,c2:.1,minValue:.5,phaseShift:0,cyclesPerSecond:1,wavesPerCycle:1,direction:1,invert:0,curve:0,hueVariation:.05,hueVariationPeriod:2};var V,R={gamma1:2,gamma2:2,maxValue:1,minValue:.5,phaseShift:0,cyclesPerSecond:1,nSpokes:2,direction:1,invert:0,curve:0,hueVariation:.05,hueVariationPeriod:2};var N=0,D=1,T=2,G=(V={},Object(A.a)(V,D,L),Object(A.a)(V,T,R),V),Y=[100,100],B=function(){function e(t){var n;if(Object(z.a)(this,e),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,U,{writable:!0,value:void 0}),Object.defineProperty(this,X,{writable:!0,value:void 0}),!t)throw new Error("PatternManager must have reference to regl object.");this.fbo=t.framebuffer({width:Y[0],height:Y[1]}),this.patternDraws=(n={},Object(A.a)(n,N,function(e,t){var n=e({frag:"precision mediump float;\n#define GLSLIFY 1\n\nvec2 normalizeFragCoords(in vec2 resolution, in vec2 posMin, in vec2 posMax) {\n  return (gl_FragCoord.xy / (resolution) - posMin) / (posMax - posMin); \n}\n\n//  Function from I\xf1igo Quiles\n//  https://www.shadertoy.com/view/MsS3Wc\nvec3 hsv2rgb_smooth_1540259130( in vec3 c ) {\n  vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n  rgb = rgb*rgb*(3.0-2.0*rgb); // cubic smoothing \n  return c.z * mix( vec3(1.0), rgb, c.y);\n}\n\nuniform vec2 resolution;\nuniform vec3 hsvColor;\nuniform bool useColors;\n\nvarying vec2 posMin;\nvarying vec2 posMax;\n\nvoid main () {\n  vec2 normalizedFragCoord = normalizeFragCoords(resolution, posMin, posMax);\n\n  gl_FragColor = vec4(hsv2rgb_smooth_1540259130(vec3(hsvColor.x, hsvColor.y * float(useColors), hsvColor.z)), 1);\n}\n",vert:F,attributes:{position:e.buffer([[-1,-1],[1,-1],[-1,1],[1,-1],[-1,1],[1,1]])},uniforms:{resolution:e.prop("resolution"),texAtlasIndex:e.prop("texAtlasIndex"),texAtlasSize:e.prop("texAtlasSize"),time:e.prop("time"),hsvColor:e.prop("hsvColor"),useColors:e.prop("useColors")},count:6,framebuffer:t});return function(e,t,a,r,o,i){var l=i.hsvColor;n({resolution:[e.width,e.height],texAtlasSize:t,texAtlasIndex:a,time:.5*r%1,useColors:o,hsvColor:l})}}(t,this.fbo)),Object(A.a)(n,D,function(e,t){var n=e({frag:"precision mediump float;\n#define GLSLIFY 1\n\nfloat when_gt_2281831123(float x, float y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec2 when_gt_2281831123(vec2 x, vec2 y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec3 when_gt_2281831123(vec3 x, vec3 y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec4 when_gt_2281831123(vec4 x, vec4 y) {\n  return max(sign(x - y), 0.0);\n}\n\nfloat when_le_1062606552(float x, float y) {\n  return 1.0 - when_gt_2281831123(x, y);\n}\n\nvec2 when_le_1062606552(vec2 x, vec2 y) {\n  return 1.0 - when_gt_2281831123(x, y);\n}\n\nvec3 when_le_1062606552(vec3 x, vec3 y) {\n  return 1.0 - when_gt_2281831123(x, y);\n}\n\nvec4 when_le_1062606552(vec4 x, vec4 y) {\n  return 1.0 - when_gt_2281831123(x, y);\n}\n\nfloat when_eq_529295689(float x, float y) {\n  return 1.0 - abs(sign(x - y));\n}\n\nvec2 when_eq_529295689(vec2 x, vec2 y) {\n  return 1.0 - abs(sign(x - y));\n}\n\nvec3 when_eq_529295689(vec3 x, vec3 y) {\n  return 1.0 - abs(sign(x - y));\n}\n\nvec4 when_eq_529295689(vec4 x, vec4 y) {\n  return 1.0 - abs(sign(x - y));\n}\n\n//  Function from I\xf1igo Quiles\n//  https://www.shadertoy.com/view/MsS3Wc\nvec3 hsv2rgb_smooth_1540259130( in vec3 c ) {\n  vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n  rgb = rgb*rgb*(3.0-2.0*rgb); // cubic smoothing \n  return c.z * mix( vec3(1.0), rgb, c.y);\n}\n\nvec2 normalizeFragCoords(in vec2 resolution, in vec2 posMin, in vec2 posMax) {\n  return (gl_FragCoord.xy / (resolution) - posMin) / (posMax - posMin); \n}\n\nfloat hueWave(in float hue, in float time, in float period, in float variation) {\n  // https://stackoverflow.com/a/22400799\n  float amplitude = 1.0;\n  float halfPeriod = period / 2.0;\n  float triangleWave = (amplitude / halfPeriod) * (halfPeriod - abs(mod(time, period) - halfPeriod));\n\n  return mod(hue + (triangleWave * 2.0 - 1.0) * variation, 1.0);\n}\n\nuniform vec3 hsvColor;\nuniform float hueVariation;\nuniform float hueVariationPeriod;\nuniform vec2 resolution;\nuniform float time;\nuniform bool useColors;\n\nuniform float cyclesPerSecond;\nuniform float wavesPerCycle;\nuniform float direction;\nuniform float invert;\nuniform vec3 animationMix;\n\nuniform float a;\nuniform float c1;\nuniform float c2;\nuniform float minValue;\nuniform float phaseShift;\nuniform float curve;\n\nvarying vec2 posMin;\nvarying vec2 posMax;\n\nconst float PI = 3.1415926535897932384626433832795;\n\nfloat gauss(in float diff) {\n  float c = c1 * when_gt_2281831123(diff, 0.0) + c2 * when_le_1062606552(diff, 0.0);\n  return a * exp(-pow(diff, 2.0)/(2.0 * c * c));\n}\n\nvoid main() {\n  vec2 normalizedFragCoord = normalizeFragCoords(resolution, posMin, posMax);\n\n  vec2 centerDiff = normalizedFragCoord - vec2(0.5, 0.5);\n  float fragAngle = atan(centerDiff.x, centerDiff.y);\n\n  float dist = distance(normalizedFragCoord, vec2(0.5, 0.5)) * 2.0 + fragAngle * curve * PI;\n\n  float scaledTime = direction * (cyclesPerSecond * time + phaseShift);\n\n  float diff = mod(dist - scaledTime, 1.0 / wavesPerCycle);\n  float leftDiff = gauss(diff - 1.0 / wavesPerCycle);\n  float middleDiff = gauss(diff);\n  float rightDiff = gauss(diff + 1.0 / wavesPerCycle);\n\n  float value = max(leftDiff, max(middleDiff, rightDiff));\n\n  value = when_eq_529295689(invert, 1.0) * (value * -1.0 + 1.0) + when_eq_529295689(invert, 0.0) * value; \n  value = value * (1.0 - minValue) + minValue;\n  \n  float hue = hueWave(hsvColor.x, time, hueVariationPeriod, hueVariation);\n  float animateSaturation = mix(1.0, value, animationMix[0]) * float(useColors);\n  float animateValue = mix(1.0, value, animationMix[1]);\n  float animateAlpha = mix(1.0, value, animationMix[2]);\n\n  gl_FragColor = vec4(hsv2rgb_smooth_1540259130(vec3(hue, animateSaturation * hsvColor.y, animateValue * hsvColor.z)), animateAlpha);\n}\n",vert:F,attributes:{position:e.buffer([[-1,-1],[1,-1],[-1,1],[1,-1],[-1,1],[1,1]])},uniforms:{resolution:e.prop("resolution"),texAtlasIndex:e.prop("texAtlasIndex"),texAtlasSize:e.prop("texAtlasSize"),time:e.prop("time"),animationMix:e.prop("animationMix"),useColors:e.prop("useColors"),hsvColor:e.prop("hsvColor"),a:e.prop("a"),c1:e.prop("c1"),c2:e.prop("c2"),minValue:e.prop("minValue"),phaseShift:e.prop("phaseShift"),cyclesPerSecond:e.prop("cyclesPerSecond"),wavesPerCycle:e.prop("wavesPerCycle"),direction:e.prop("direction"),invert:e.prop("invert"),curve:e.prop("curve"),hueVariation:e.prop("hueVariation"),hueVariationPeriod:e.prop("hueVariationPeriod")},count:6,framebuffer:t});return function(e,t,a,r,o,i,l){var c=Object(P.a)({},L,{},l),s=c.hsvColor,u=c.a,f=c.c1,d=c.c2,m=c.minValue,p=c.phaseShift,v=c.cyclesPerSecond,h=c.wavesPerCycle,b=c.direction,g=c.invert,x=c.curve,y=c.hueVariation,w=c.hueVariationPeriod;n({resolution:[e.width,e.height],texAtlasSize:t,texAtlasIndex:a,time:r,animationMix:o,useColors:i,hsvColor:s,a:u,c1:f,c2:d,minValue:m,phaseShift:p,cyclesPerSecond:v,wavesPerCycle:h,direction:b,invert:g,curve:x,hueVariation:y,hueVariationPeriod:w})}}(t,this.fbo)),Object(A.a)(n,T,function(e,t){var n=e({frag:"precision mediump float;\n#define GLSLIFY 1\n\nfloat when_gt_529295689(float x, float y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec2 when_gt_529295689(vec2 x, vec2 y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec3 when_gt_529295689(vec3 x, vec3 y) {\n  return max(sign(x - y), 0.0);\n}\n\nvec4 when_gt_529295689(vec4 x, vec4 y) {\n  return max(sign(x - y), 0.0);\n}\n\nfloat when_le_1062606552(float x, float y) {\n  return 1.0 - when_gt_529295689(x, y);\n}\n\nvec2 when_le_1062606552(vec2 x, vec2 y) {\n  return 1.0 - when_gt_529295689(x, y);\n}\n\nvec3 when_le_1062606552(vec3 x, vec3 y) {\n  return 1.0 - when_gt_529295689(x, y);\n}\n\nvec4 when_le_1062606552(vec4 x, vec4 y) {\n  return 1.0 - when_gt_529295689(x, y);\n}\n\nfloat when_eq_2281831123(float x, float y) {\n  return 1.0 - abs(sign(x - y));\n}\n\nvec2 when_eq_2281831123(vec2 x, vec2 y) {\n  return 1.0 - abs(sign(x - y));\n}\n\nvec3 when_eq_2281831123(vec3 x, vec3 y) {\n  return 1.0 - abs(sign(x - y));\n}\n\nvec4 when_eq_2281831123(vec4 x, vec4 y) {\n  return 1.0 - abs(sign(x - y));\n}\n\n//  Function from I\xf1igo Quiles\n//  https://www.shadertoy.com/view/MsS3Wc\nvec3 hsv2rgb_smooth_1540259130( in vec3 c ) {\n  vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );\n  rgb = rgb*rgb*(3.0-2.0*rgb); // cubic smoothing \n  return c.z * mix( vec3(1.0), rgb, c.y);\n}\n\nvec2 normalizeFragCoords(in vec2 resolution, in vec2 posMin, in vec2 posMax) {\n  return (gl_FragCoord.xy / (resolution) - posMin) / (posMax - posMin); \n}\n\nfloat hueWave(in float hue, in float time, in float period, in float variation) {\n  // https://stackoverflow.com/a/22400799\n  float amplitude = 1.0;\n  float halfPeriod = period / 2.0;\n  float triangleWave = (amplitude / halfPeriod) * (halfPeriod - abs(mod(time, period) - halfPeriod));\n\n  return mod(hue + (triangleWave * 2.0 - 1.0) * variation, 1.0);\n}\n\nuniform vec3 hsvColor;\nuniform float hueVariation;\nuniform float hueVariationPeriod;\nuniform vec2 resolution;\nuniform float time;\nuniform bool useColors;\n\nuniform float gamma1;\nuniform float gamma2;\nuniform float maxValue;\nuniform float minValue;\nuniform float phaseShift;\nuniform float cyclesPerSecond;\nuniform float nSpokes;\nuniform float direction;\nuniform float invert;\nuniform float curve;\n\nuniform vec3 animationMix;\n\nvarying vec2 posMin;\nvarying vec2 posMax;\n\nconst float PI = 3.1415926535897932384626433832795;\nconst float TAU = 6.2831853071795864769252867665590;\n\nfloat angleDifference(in float a, in float b, out float gamma) {\n  float diff1 = mod((a - b), TAU / nSpokes);\n  float diff2 = mod((b - a), TAU / nSpokes);\n\n  float d1_less_equal_d2 = when_le_1062606552(diff1, diff2);\n  float d1_greater_than_d2 = when_gt_529295689(diff1, diff2);\n\n  gamma = d1_less_equal_d2 * gamma2 + d1_greater_than_d2 * gamma1;\n  return d1_less_equal_d2 * diff1 + d1_greater_than_d2 * diff2;\n}\n\nvoid main() {\n  vec2 normalizedFragCoord = normalizeFragCoords(resolution, posMin, posMax);\n\n  float centerDist = distance(normalizedFragCoord, vec2(0.5, 0.5)) * 2.0;\n  //float scaledTime = direction * ((1.0 + centerDist * 1.0) * cyclesPerSecond * time + phaseShift);\n  float scaledTime = direction * (cyclesPerSecond * time + phaseShift);\n\n  float timeAngle = scaledTime * TAU;\n\n  vec2 centerDiff = normalizedFragCoord - vec2(0.5, 0.5);\n  float fragAngle = atan(centerDiff.x, centerDiff.y) + PI; // from [-pi, pi] to [0, 2pi]\n\n  fragAngle = mod(fragAngle + centerDist * PI * curve, TAU);\n\n  float gamma;\n  float angleDist = angleDifference(fragAngle, timeAngle, gamma) * nSpokes / PI;\n\n  float value = pow(1.0 - angleDist, gamma); // gamma\n\n  value = when_eq_2281831123(invert, 1.0) * (value * -1.0 + 1.0) + when_eq_2281831123(invert, 0.0) * value; \n  value = value * (maxValue - minValue) + minValue;\n\n  float hue = hueWave(hsvColor.x, time, hueVariationPeriod, hueVariation);\n  float animateSaturation = mix(1.0, value, animationMix[0]) * float(useColors);\n  float animateValue = mix(1.0, value, animationMix[1]);\n  float animateAlpha = mix(1.0, value, animationMix[2]);\n\n  gl_FragColor = vec4(hsv2rgb_smooth_1540259130(vec3(hue, animateSaturation * hsvColor.y, animateValue * hsvColor.z)), animateAlpha);\n}\n",vert:F,attributes:{position:e.buffer([[-1,-1],[1,-1],[-1,1],[1,-1],[-1,1],[1,1]])},uniforms:{resolution:e.prop("resolution"),texAtlasIndex:e.prop("texAtlasIndex"),texAtlasSize:e.prop("texAtlasSize"),time:e.prop("time"),animationMix:e.prop("animationMix"),useColors:e.prop("useColors"),hsvColor:e.prop("hsvColor"),gamma1:e.prop("gamma1"),gamma2:e.prop("gamma2"),maxValue:e.prop("maxValue"),minValue:e.prop("minValue"),phaseShift:e.prop("phaseShift"),cyclesPerSecond:e.prop("cyclesPerSecond"),nSpokes:e.prop("nSpokes"),direction:e.prop("direction"),invert:e.prop("invert"),curve:e.prop("curve"),hueVariation:e.prop("hueVariation"),hueVariationPeriod:e.prop("hueVariationPeriod")},count:6,framebuffer:t});return function(e,t,a,r,o,i,l){var c=Object(P.a)({},R,{},l),s=c.hsvColor,u=c.gamma1,f=c.gamma2,d=c.maxValue,m=c.minValue,p=c.phaseShift,v=c.cyclesPerSecond,h=c.nSpokes,b=c.direction,g=c.invert,x=c.curve,y=c.hueVariation,w=c.hueVariationPeriod;n({resolution:[e.width,e.height],texAtlasSize:t,texAtlasIndex:a,time:r,animationMix:o,useColors:i,hsvColor:s,gamma1:u,gamma2:f,maxValue:d,minValue:m,phaseShift:p,cyclesPerSecond:v,nSpokes:h,direction:b,invert:g,curve:x,hueVariation:y,hueVariationPeriod:w})}}(t,this.fbo)),n),this.patterns={},this.regl=t,this.maxCategories=0,this.atlasSize=[0,0]}return Object(I.a)(e,[{key:"updateSize",value:function(){this.maxCategories=Math.max.apply(Math,Object(f.a)(Object.keys(this.patterns)))+1,this.atlasSize=[this.maxCategories,1],this.fbo.resize(this.maxCategories*Y[0],Y[1])}},{key:"setAll",value:function(e){var t=this,n=new Set(Object.keys(this.patterns));e.forEach((function(e){n.delete(e.category.toString()),t.set(e.category,e)})),n.forEach((function(e){t.destroy(e)}))}},{key:"set",value:function(e,t){Object(E.a)(this.patterns,e)?this.patterns[e]=Object(P.a)({},this.patterns[e],{},t):this.patterns[e]=t,this.updateSize()}},{key:"destroy",value:function(e){delete this.patterns[e],this.updateSize()}},{key:"draw",value:function(e,t,n,a){for(var r=0;r<this.maxCategories;r+=1)Object(E.a)(this.patterns,r)&&(a?this.patternDraws[this.patterns[r].type](this.fbo,this.atlasSize,r,e,t,n,this.patterns[r]):this.patternDraws[N](this.fbo,this.atlasSize,r,e,n,this.patterns[r]))}},{key:"clear",value:function(){this.regl.clear({color:[0,0,0,0],depth:1,framebuffer:this.fbo})}},{key:"getTexture",value:function(){return this.fbo.color[0]}},{key:"getAtlasSize",value:function(){return Object(f.a)(this.atlasSize)}}]),e}(),W=Object(M.a)("patternDraws"),q=Object(M.a)("patterns"),H=Object(M.a)("fbo"),K=Object(M.a)("regl"),U=Object(M.a)("maxCategories"),X=Object(M.a)("atlasSize"),J=Float32Array.BYTES_PER_ELEMENT,$=["OES_standard_derivatives","OES_texture_float"],Q=[0,0,0,1],Z=[[.66,.66,.66,1],[0,.55,1,1],[1,1,1,1],Q],ee=[0,0],te=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),ne=[0,.666666667,1,1],ae=[1,1,1,.5],re=n(174),oe=n.n(re),ie=function(e,t){return e>t?e:t},le=function(e){return!!e&&$.reduce((function(t,n){return e.hasExtension(n)?t:(console.warn("WebGL: ".concat(n," extension not supported. Scatterplot might not render properly")),!1)}),!0)},ce=function(e){var t=e.getContext("webgl"),n=[];return $.forEach((function(e){t.getExtension(e)?n.push(e):console.warn("WebGL: ".concat(e," extension not supported. Scatterplot might not render properly"))})),oe()({gl:t,extensions:n})},se=function(e,t,n,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-a,2))},ue=function(e){for(var t=1/0,n=-1/0,a=1/0,r=-1/0,o=0;o<e.length;o+=2)t=e[o]<t?e[o]:t,n=e[o]>n?e[o]:n,a=e[o+1]<a?e[o+1]:a,r=e[o+1]>r?e[o+1]:r;return[t,a,n,r]},fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,a){return"#".concat(t).concat(t).concat(n).concat(n).concat(a).concat(a)})).substring(1).match(/.{2}/g).map((function(e){return parseInt(e,16)/Math.pow(255,t)}))},de=function(e){return e>=0&&e<=1},me=function(e){return Array.isArray(e)&&e.every(de)},pe=function(){for(var e,t,n,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=Object(l.a)(r,2),i=o[0],c=o[1],s=arguments.length>1?arguments[1]:void 0,u=!1,f=0,d=s.length-2;f<s.length;f+=2)e=s[f],t=s[f+1],n=s[d],t>c!==(a=s[d+1])>c&&i<(n-e)*(c-t)/(a-t)+e&&(u=!u),d=f;return u},ve=function(e){return Number.isInteger(e)&&e>=0&&e<=255},he=function(e){return Array.isArray(e)&&e.every(ve)},be=function(e){return 3===e.length&&(me(e)||he(e))},ge=function(e){return 4===e.length&&(me(e)||he(e))},xe=function(e,t){return e>t?e:t},ye=function(e,t){return e<t?e:t},we=function(e){return e.map((function(t){return t/e.reduce(ie,-1/0)}))},Se=function(e,t){return ge(e)?t&&!me(e)?we(e):e:be(e)?[].concat(Object(f.a)(t?we(e):e),[Math.pow(255,!t)]):/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)?function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[].concat(Object(f.a)(fe(e,t)),[Math.pow(255,!t)])}(e,t):(console.warn("Only HEX, RGB, and RGBA are handled by this function. Returning white instead."),t?[1,1,1,1]:[255,255,255,255])},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.regl,n=e.background,a=void 0===n?Q:n,r=e.backgroundImage,o=void 0===r?null:r,i=e.canvas,c=void 0===i?document.createElement("canvas"):i,s=e.colorBy,u=void 0===s?null:s,d=e.colors,y=void 0===d?Z:d,P=e.lassoColor,z=void 0===P?ne:P,I=e.lassoMinDelay,M=void 0===I?10:I,A=e.lassoMinDist,F=void 0===A?3:A,L=e.showRecticle,V=void 0!==L&&L,R=e.recticleColor,D=void 0===R?ae:R,T=e.pointSize,G=void 0===T?6:T,Y=e.pointSizeSelected,W=void 0===Y?2:Y,q=e.pointOutlineWidth,H=void 0===q?2:q,K=e.width,U=void 0===K?100:K,X=e.height,$=void 0===X?100:X,re=e.target,oe=void 0===re?ee:re,ie=e.distance,fe=void 0===ie?1:ie,de=e.rotation,me=void 0===de?0:de,ve=e.view,he=void 0===ve?te:ve,we=Object(h.a)(),Ee=new Float32Array(16),je=[0,0];le(t);var Oe,Ce,_e,ke,Pe,ze,Ie,Me,Ae,Fe,Le,Ve,Re,Ne,De,Te,Ge,Ye=Se(a,!0),Be=o,We=c,qe=y,He=U,Ke=$,Ue=G,Xe=W,Je=H,$e=t||ce(c),Qe=!1,Ze=!1,et=[0,0],tt=0,nt=[],at=Se(z,!0),rt=+M,ot=+F,it=[],lt=[],ct=1,st=V,ut=Se(D,!0),ft=0,dt=0,mt=u,pt=!1,vt=!1,ht=1,bt=!1,gt=0,xt=[0,1,0],yt=!1,wt=!0,St=!0,Et=new B($e);Et.set(0,{type:N,color:[.2,1,.5,1]});var jt=function(){return je.slice()},Ot=function(e){return e/He*2-1},Ct=function(e){return 1+e/Ke*-2},_t=function(){return[Ot(je[0]),Ct(je[1])]},kt=function(){var e=_t(),t=Object(l.a)(e,2),n=[t[0],t[1],1,1],a=m.a.invert(Ee,m.a.multiply(Ee,ze,m.a.multiply(Ee,Oe.view,Ie)));return m.c.transformMat4(n,n,a),n.slice(0,2)},Pt=function(){var e,t=kt(),n=Object(l.a)(t,2),a=n[0],r=n[1],o=Oe.scaling,i=2*Ue*(ye(1,o)+Math.log2(xe(1,o)))*window.devicePixelRatio,c=i/He,s=i/Ke,u=ke.range(a-c,r-s,a+c,r+s),f=i;return u.forEach((function(t){var n=Object(l.a)(ke.points[t],2),o=n[0],i=n[1],c=se(o,i,a,r);c<f&&(f=c,e=t)})),f<Ue/He*2?e:-1},zt=function(){var e,t,n=jt();_e?se.apply(void 0,Object(f.a)(n).concat(Object(f.a)(_e)))>ot&&((e=it).push.apply(e,Object(f.a)(_t(n))),(t=lt).push.apply(t,Object(f.a)(kt(n))),_e=n,it.length>2&&Ce.setPoints(it)):(it=Object(f.a)(_t(n)),lt=Object(f.a)(kt(n)),_e=n)},It=Object(b.a)(zt,rt),Mt=function(e){var t,n=ue(e),a=(t=ke).range.apply(t,Object(f.a)(n)),r=[];return a.forEach((function(t){pe(ke.points[t],e)&&r.push(t)})),r},At=function(){nt.length&&(we.publish("deselect"),nt=[])},Ft=function(e){nt=e,Ve({usage:"dynamic",type:"float",data:new Float32Array(nt)}),we.publish("select",{points:nt})},Lt=function(e){var t=We.getBoundingClientRect();return je[0]=e.clientX-t.left,je[1]=e.clientY-t.top,[].concat(je)},Vt=function(){var e=Mt(lt);Ft(e),it=[],lt=[],_e=void 0,Ce.clear()},Rt=function(e){vt&&(Qe=!0,et=Lt(e),(Ze=e.shiftKey)&&(Oe.config({isFixed:!0}),_e=void 0))},Nt=function(){vt&&(Qe=!1,Ze&&(Ze=!1,Oe.config({isFixed:!1}),Vt()))},Dt=function(e){if(vt){var t=Lt(e);if(!(se.apply(void 0,Object(f.a)(t).concat(Object(f.a)(et)))>=3)){var n=Pt();n>=0&&Ft([n])}}},Tt=function(){At()},Gt=function(e){if(vt){if(Lt(e),bt&&!Ze){var t=Pt();ea(t)}Ze&&It()}},Yt=function(){vt&&(De=void 0,bt=!1,Nt())},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=e.length;dt=Math.max(2,Math.ceil(Math.sqrt(t)));var n=new Float32Array(4*Math.pow(dt,2));return e.forEach((function(e,t){n[4*t]=e[0],n[4*t+1]=e[1],n[4*t+2]=e[2],n[4*t+3]=t%4>0||1===ht?e[3]:ht})),$e.texture({data:n,shape:[dt,dt,4],type:"float"})},Wt=function(){Pe=He/Ke,ze=m.a.fromScaling([],[1/Pe,1,1]),Ie=m.a.fromScaling([],[ct,1,1])},qt=function(e){+e<=0||(ct=e)},Ht=function(e){if(e&&e.length){var t=[];try{e.forEach((function(e){if(!Array.isArray(e)||be(e)||ge(e)){var n=Se(e,!0),a=[].concat(Object(f.a)(n.slice(0,3)),[1]);t.push(n,a,a)}else for(var r=0;r<3;r++)t.push(Se(e[r],!0));t.push(Ye)}))}catch(n){console.error(n,"Invalid format. Please specify an array of colors or a nested array of accents per colors.")}qe=t;try{Ne=Bt()}catch(n){qe=Z,Ne=Bt(),console.error("Invalid colors. Switching back to default colors.")}}},Kt=function(e){!+e||+e<=0||(Ke=+e,We.height=Ke*window.devicePixelRatio)},Ut=function(e){!+e||+e<=0||(Ue=+e)},Xt=function(e){!+e||+e<0||(Xe=+e)},Jt=function(e){!+e||+e<0||(Je=+e)},$t=function(e){!+e||+e<=0||(He=+e,We.width=He*window.devicePixelRatio)},Qt=function(e){switch(e){case"category":mt="category";break;case"value":mt="value";break;default:mt=null}},Zt=function(e){!+e||+e<=0||(ht=+e,Ne=Bt())},en=function(){return Be},tn=function(){return Ne},nn=function(){return dt},an=function(){return Le},rn=function(){return Ve},on=function(){return Ue*window.devicePixelRatio},ln=function(){return 0},cn=function(){return Fe},sn=function(){return ft},un=function(){return ze},fn=function(){return Oe.view},dn=function(){return Ie},mn=function(){return Oe.scaling},pn=function(){return tt},vn=function(){return 1*("category"===mt)},hn=function(){return 1*("value"===mt)},bn=function(){return qe.length/4-1},gn=function(){return 4},xn=function(){return Et.getTexture()},yn=function(){return Et.getAtlasSize()},wn=function(){return Te},Sn=function(){return gt},En=function(){return yt},jn=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return $e({frag:_,vert:k,blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:En},attributes:{stateIndex:{buffer:n,size:1}},uniforms:{projection:un,model:dn,view:fn,scaling:mn,pointSize:on,pointSizeExtra:e,globalState:a,colorTex:tn,colorTexRes:nn,stateTex:cn,stateTexRes:sn,isColoredByCategory:vn,isColoredByValue:hn,maxColor:bn,numColorStates:gn,textureAtlas:xn,atlasSize:yn,bboxTex:wn,bboxTexRes:Sn,animateDepth:En},count:t,primitive:"points"})},On=jn(ln,pn,an),Cn=jn(ln,(function(){return 1}),(function(){return Re}),2),_n=function(){var e=nt.length;jn((function(){return(Xe+2*Je)*window.devicePixelRatio}),(function(){return e}),rn,1)(),jn((function(){return(Xe+Je)*window.devicePixelRatio}),(function(){return e}),rn,3)(),jn((function(){return Xe}),(function(){return e}),rn,1)()},kn=$e({frag:O,vert:C,attributes:{position:[0,1,0,0,1,0,0,1,1,1,1,0]},uniforms:{projection:un,model:dn,view:fn,texture:en},count:6}),Pn=function(){if(De>=0){var e=ke.points[De].slice(0,2),t=Object(l.a)(e,2),n=[t[0],t[1],0,1];m.a.multiply(Ee,ze,m.a.multiply(Ee,Oe.view,Ie)),m.c.transformMat4(n,n,Ee),Me.setPoints([-1,n[1],1,n[1]]),Ae.setPoints([n[0],1,n[0],-1]),Me.draw(),Ae.draw(),jn((function(){return(Xe+2*Je)*window.devicePixelRatio}),(function(){return 1}),Re,1)(),jn((function(){return(Xe+Je)*window.devicePixelRatio}),(function(){return 1}),Re,3)()}},zn=function(e){for(var t=new Float32Array(e),n=0;n<e;++n)t[n]=n;return t},In=function(e){var t=e.length;ft=Math.max(2,Math.ceil(Math.sqrt(t)));for(var n=new Float32Array(4*Math.pow(ft,2)),a=0;a<t;++a)n[4*a]=e[a][0],n[4*a+1]=e[a][1],n[4*a+2]=e[a][2]||0,n[4*a+3]=e[a][3]||0;return $e.texture({data:n,shape:[ft,ft,4],type:"float"})},Mn=function(e){var t=Math.max.apply(Math,Object(f.a)(Object.keys(e)))+1;gt=Math.max(2,Math.ceil(Math.sqrt(t)));for(var n=new Float32Array(4*Math.pow(gt,2)),a=0;a<t;a+=1)Object(E.a)(e,a)?(n[4*a]=e[a][0],n[4*a+1]=e[a][1],n[4*a+2]=e[a][2],n[4*a+3]=e[a][3]):(n[4*a]=0,n[4*a+1]=0,n[4*a+2]=0,n[4*a+3]=0);return $e.texture({data:n,shape:[gt,gt,4],type:"float"})},An=function(e){var t=0,n=0;return e.forEach((function(e){t+=e[0],n+=e[1]})),[t/e.length,n/e.length]},Fn=function(e){var t=An(e),n=0;e.forEach((function(e){var a=Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2);a>n&&(n=a)}));var a=Math.sqrt(n);return[t[0]-a,t[1]-a,t[0]+a,t[1]+a]},Ln=function(e){vt=!1,tt=e.length,Fe=In(e),Le({usage:"static",type:"float",data:zn(tt)}),ke=new v.a(e,(function(e){return e[0]}),(function(e){return e[1]}),16);var t=Object(S.a)(e,2),n=Object(j.a)(t,(function(e,n){return Fn(t[n])}));Te=Mn(n),vt=!0},Vn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];vt&&($e.clear({color:[0,0,0,0],depth:1,stencil:0}),Et.clear(),pt=Oe.tick(),Be&&kn(),Et.draw(e,xt,St,wt),On(),Qe||!st&&!t||Pn(),De>=0&&Cn(),nt.length&&_n(),Ce.draw(),pt&&we.publish("view",Oe.view))},Rn=Object(g.a)(Vn),Nn=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&Ln(e)},Dn=function(e){return function(){var t=e.apply(void 0,arguments);return Rn(),t}},Tn=function(e){e&&(Ye=Se(e,!0))},Gn=function(e){Be=e||null},Yn=function(e){e&&(at=Se(e,!0),Ce.setStyle({color:at}))},Bn=function(e){+e&&(rt=+e,It=Object(b.a)(zt,rt))},Wn=function(e){+e&&(ot=+e)},qn=function(e){null!==e&&(st=e)},Hn=function(e){e&&(ut=Se(e,!0),Me.setStyle({color:ut}),Ae.setStyle({color:ut}))},Kn=function(e){null!==e&&(xt=e)},Un=function(e){null!==e&&(yt=e)},Xn=function(e){null!==e&&(wt=e)},Jn=function(e){null!==e&&(St=e)},$n=function(){$e.poll(),Oe.refresh()},Qn=function(e){return"background"===e?Ye:"backgroundImage"===e?Be:"colorBy"===e?mt:"colors"===e?qe:"lassoColor"===e?at:"showRecticle"===e?st:"recticleColor"===e?ut:"opacity"===e?ht:"pointOutlineWidth"===e?Je:"pointSize"===e?Ue:"pointSizeSelected"===e?Xe:"width"===e?He:"height"===e?Ke:"aspectRatio"===e?ct:"canvas"===e?We:"regl"===e?$e:"version"===e?"0.7.5":void 0},Zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.background,n=void 0===t?null:t,a=e.backgroundImage,r=void 0===a?Be:a,o=e.colorBy,i=void 0===o?mt:o,l=e.colors,c=void 0===l?null:l,s=e.opacity,u=void 0===s?null:s,f=e.lassoColor,d=void 0===f?null:f,m=e.lassoMinDelay,p=void 0===m?null:m,v=e.lassoMinDist,h=void 0===v?null:v,b=e.showRecticle,g=void 0===b?null:b,x=e.recticleColor,y=void 0===x?null:x,w=e.pointOutlineWidth,S=void 0===w?null:w,E=e.pointSize,j=void 0===E?null:E,O=e.pointSizeSelected,C=void 0===O?null:O,_=e.height,k=void 0===_?null:_,P=e.width,z=void 0===P?null:P,I=e.aspectRatio,M=void 0===I?null:I,A=e.animationMix,F=void 0===A?null:A,L=e.animateDepth,V=void 0===L?null:L,R=e.showPatterns,N=void 0===R?null:R,D=e.useColors,T=void 0===D?null:D;Tn(n),Gn(r),Qt(i),Ht(c),Zt(u),Yn(d),Bn(p),Wn(h),qn(g),Hn(y),Jt(S),Ut(j),Xt(C),Kt(k),$t(z),qt(M),Kn(F),Un(V),Xn(N),Jn(T),Wt(),Oe.refresh(),$n()},ea=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=!1;if(e>=0){t=!0;var n=e!==De;De=e,Re.subdata([e]),n&&we.publish("pointover",De)}else t=De,De=void 0,+t>=0&&we.publish("pointout",t)},ta=function(){he?Oe.set(m.a.clone(he)):Oe.lookAt(Object(f.a)(oe),fe,me),we.publish("view",Oe.view)},na=function(e){switch(e.key){case"Escape":At()}},aa=function(){bt=!0},ra=function(){ea(),bt=!1},oa=function(){Oe=p(We),he?Oe.set(m.a.clone(he)):Oe.lookAt(Object(f.a)(oe),fe,me)},ia=function(){},la=function(){Ln([])},ca=function(){Wt(),oa(),Ce=Object(x.a)($e,{color:at,width:3,is2d:!0}),Me=Object(x.a)($e,{color:ut,width:1,is2d:!0}),Ae=Object(x.a)($e,{color:ut,width:1,is2d:!0}),We.addEventListener("wheel",ia),Le=$e.buffer(),Ve=$e.buffer(),Re=$e.buffer({usage:"dynamic",type:"float",length:J}),Ne=Bt(),Zn({width:He,height:Ke}),window.addEventListener("keyup",na,!1),window.addEventListener("blur",Yt,!1),window.addEventListener("mousedown",Rt,!1),window.addEventListener("mouseup",Nt,!1),window.addEventListener("mousemove",Gt,!1),We.addEventListener("mouseenter",aa,!1),We.addEventListener("mouseleave",ra,!1),We.addEventListener("click",Dt,!1),We.addEventListener("dblclick",Tt,!1);var e=We.getContext("webgl")||We.getContext("experimental-webgl");Ge=new w.a(e),$e.frame((function(e){var t=e.time;Ge.begin(),Vn(t),Ge.end(),Ge.nextFrame(Math.floor(1e3*t))}))},sa=function(){window.removeEventListener("keyup",na,!1),window.removeEventListener("blur",Yt,!1),window.removeEventListener("mousedown",Rt,!1),window.removeEventListener("mouseup",Nt,!1),window.removeEventListener("mousemove",Gt,!1),We.removeEventListener("mouseenter",aa,!1),We.removeEventListener("mouseleave",ra,!1),We.removeEventListener("click",Dt,!1),We.removeEventListener("dblclick",Tt,!1),We=void 0,Oe=void 0,$e=void 0,Ce.destroy(),we.clear()};return ca(We),{clear:Dn(la),deselect:At,destroy:sa,draw:Nn,get:Qn,hover:ea,refresh:$n,reset:Dn(ta),select:Ft,set:Zn,subscribe:we.subscribe,unsubscribe:we.unsubscribe,patternManager:Et}},je=n(436),Oe=n(59),Ce=!0,_e=!0,ke=5,Pe=[0,1,0],ze=[Object(P.a)({},G[T],{type:T,category:0}),Object(P.a)({},G[D],{type:D,category:1}),Object(P.a)({},G[T],{type:T,category:2,direction:-1}),Object(P.a)({},G[D],{type:D,category:3,direction:-1}),Object(P.a)({},G[T],{type:T,category:4,invert:1}),Object(P.a)({},G[D],{type:D,category:5,invert:1}),Object(P.a)({},G[T],{type:T,category:6,direction:-1,invert:1}),Object(P.a)({},G[D],{type:D,category:7,direction:-1,invert:1}),Object(P.a)({},G[T],{type:T,category:8,direction:-1}),Object(P.a)({},G[D],{type:D,category:9,direction:-1,invert:1})],Ie=function(e){return{type:"set loading",value:e}},Me=function(e){return{type:"set max categories",value:e}},Ae=n(26),Fe=n(50),Le=Object(Ae.a)((function(e,t,n){return e(Object(A.a)({},t,n))}),100);function Ve(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=Object(a.useState)(t),i=Object(l.a)(o,2),c=i[0],s=i[1],u=function(t){Object(Fe.a)(r)&&(t=r(t)),s(t),Le(n,e,t)};return Object(a.useEffect)((function(){c!==t&&s(t)}),[t]),[c,u]}function Re(e){return"".concat(Math.round(100*e),"%")}function Ne(e){var t=e.scatterplot,n=Ve("pointSize",ke,t&&t.set),o=Object(l.a)(n,2),i=o[0],c=o[1],s=Ve("animationMix",Pe,t&&t.set),f=Object(l.a)(s,2),d=f[0],m=f[1],p=Object(a.useState)(!1),v=Object(l.a)(p,2),h=v[0],b=v[1],g=Object(u.d)((function(e){return e.isDarkTheme})),x=Object(u.c)();return r.a.createElement("div",null,r.a.createElement(je.d,null),r.a.createElement(je.f,null,r.a.createElement(je.j,{defaultChecked:g,label:"Dark theme",onChange:function(){return x({type:"toggle theme"})},innerLabel:"No",innerLabelChecked:"Yes",alignIndicator:Oe.a.RIGHT})),r.a.createElement(je.f,null,r.a.createElement(je.j,{defaultChecked:_e,label:"Use colors",onChange:function(e){return t.set({useColors:e.target.checked})},innerLabel:"No",innerLabelChecked:"Yes",alignIndicator:Oe.a.RIGHT})),r.a.createElement(je.f,null,r.a.createElement(je.j,{defaultChecked:Ce,label:"Show patterns",onChange:function(e){return t.set({showPatterns:e.target.checked})},innerLabel:"No",innerLabelChecked:"Yes",alignIndicator:Oe.a.RIGHT})),r.a.createElement(je.f,{label:"Point size",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:10,labelStepSize:10,labelPrecision:1,value:i,onChange:c,fill:!0})),r.a.createElement(je.d,null),r.a.createElement("span",{className:"option-title bp3-text-muted"},"Animation mix"),r.a.createElement(je.f,{label:"Saturation",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:1,labelStepSize:1,labelRenderer:Re,value:d[0],onChange:function(e){return m([e,d[1],d[2]])},fill:!0})),r.a.createElement(je.f,{label:"Value",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:1,labelStepSize:1,labelRenderer:Re,value:d[1],onChange:function(e){return m([d[0],e,d[2]])},fill:!0})),r.a.createElement(je.f,{label:"Alpha",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:1,labelStepSize:1,labelRenderer:Re,value:d[2],onChange:function(e){return m([d[0],d[1],e])},fill:!0,disabled:h})),r.a.createElement(je.f,null,r.a.createElement(je.j,{checked:h,label:"Depth (experimental)",onChange:function(e){b(e.target.checked),t&&t.set({animateDepth:e.target.checked}),e.target.checked?m([0,0,1]):m([0,1,0])},innerLabel:"No",innerLabelChecked:"Yes",alignIndicator:Oe.a.RIGHT})),r.a.createElement(je.d,null),r.a.createElement("p",{style:{textAlign:"center"}},r.a.createElement("b",null,"Note: "),r.a.createElement("span",{className:"bp3-text-muted"},"Each slider has a 100ms debounce to avoid clogging the system.")))}var De=n(54),Te=n(88),Ge=n(41);function Ye(e,t,n,a,r){var o,i,l=2*Math.PI;do{o=Math.random(),i=Math.random()}while(o<=Number.EPSILON);var c=l*i,s=Math.sqrt(-2*Math.log(o)),u=s*Math.cos(c),f=s*Math.sin(c),d=Math.cos(a),m=Math.sin(a),p=d*m*(r-1);return[(u=(r*Math.pow(d,2)+Math.pow(m,2))*u+p*f)*n+e,(f=p*u+(Math.pow(d,2)+r*Math.pow(m,2))*f)*n+t]}function Be(e){var t=e.clusterKey,n=e.category,a=e.setIsOpen,o=e.isOpen,i=Object(u.d)((function(e){return e.categoryColors}),u.b);return r.a.createElement(je.a,{className:"cluster-button",minimal:!0,fill:!0,active:o,onClick:function(){return a(!o)}},r.a.createElement("div",{className:"jsx-3670062821 cluster-header"},r.a.createElement("div",{className:"jsx-3670062821 cluster-title"},r.a.createElement("b",{className:"jsx-3670062821"},"Cluster: ")," #",t),r.a.createElement("div",{className:"jsx-3670062821 cluster-category"},r.a.createElement("div",{style:{backgroundColor:i[n]},className:"jsx-3670062821 cluster-category__color-box"})),r.a.createElement(s.a,{id:"1811696610"},[".cluster-button .bp3-button-text{width:100%;}"]),r.a.createElement(s.a,{id:"1213808302"},[".cluster-header.jsx-3670062821{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}",".cluster-title.jsx-3670062821{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".cluster-category__color-box.jsx-3670062821{float:left;width:20px;height:20px;margin:5px;border:1px solid rgba(0,0,0,.2);}"])))}var We=Object(Ae.a)((function(e,t){return e({x:t})}),500),qe=Object(Ae.a)((function(e,t){return e({y:t})}),500),He=Object(Ae.a)((function(e,t){return e({sigma:t})}),500),Ke=Object(Ae.a)((function(e,t){return e({angle:t})}),500),Ue=Object(Ae.a)((function(e,t){return e({amplitude:t})}),500),Xe=Object(Ae.a)((function(e,t){return e({n:t})}),500),Je=Object(Ae.a)((function(e,t){return e({category:t})}),500);function $e(e){var t=e.clusterKey,n=e.cluster,o=e.setCluster,i=e.removeCluster,c=Object(a.useState)(n.x),u=Object(l.a)(c,2),f=u[0],d=u[1],m=Object(a.useState)(n.y),p=Object(l.a)(m,2),v=p[0],h=p[1],b=Object(a.useState)(n.sigma),g=Object(l.a)(b,2),x=g[0],y=g[1],w=Object(a.useState)(n.angle),S=Object(l.a)(w,2),E=S[0],j=S[1],O=Object(a.useState)(n.amplitude),C=Object(l.a)(O,2),_=C[0],k=C[1],P=Object(a.useState)(n.n),z=Object(l.a)(P,2),I=z[0],M=z[1],A=Object(a.useState)(n.category),F=Object(l.a)(A,2),L=F[0],V=F[1],R=Object(a.useState)(!1),N=Object(l.a)(R,2),D=N[0],T=N[1];return r.a.createElement("div",{className:"jsx-2347825890"},r.a.createElement(Be,{clusterKey:t,category:L,setIsOpen:T,isOpen:D}),r.a.createElement(je.c,{isOpen:D},r.a.createElement(je.f,{label:"X-pos",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:-1,max:1,labelPrecision:1,labelStepSize:2,value:f,onChange:function(e){d(e),We(o,e)},fill:!0})),r.a.createElement(je.f,{label:"Y-pos",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:-1,max:1,labelPrecision:1,labelStepSize:2,value:v,onChange:function(e){h(e),qe(o,e)},fill:!0})),r.a.createElement(je.f,{label:"Std. Dev.",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:.8,labelPrecision:1,labelStepSize:.8,value:x,onChange:function(e){y(e),He(o,e)},fill:!0})),r.a.createElement(je.f,{label:"Angle",inline:!0},r.a.createElement(je.h,{stepSize:.03,min:0,max:Math.PI,labelPrecision:1,labelStepSize:Math.PI,value:E,onChange:function(e){j(e),Ke(o,e)},fill:!0})),r.a.createElement(je.f,{label:"Amplitude",inline:!0},r.a.createElement(je.h,{stepSize:.03,min:0,max:3,labelPrecision:1,labelStepSize:3,value:_,onChange:function(e){k(e),Ue(o,e)},fill:!0})),r.a.createElement(je.f,{label:"Points",inline:!0},r.a.createElement(je.h,{stepSize:10,min:1,max:1e4,labelStepSize:9999,value:I,onChange:function(e){M(e),Xe(o,e)},fill:!0})),r.a.createElement(je.f,{label:"Category",inline:!0},r.a.createElement(je.h,{stepSize:1,min:0,max:9,labelStepSize:9,value:L,onChange:function(e){V(e),Je(o,e)},fill:!0})),r.a.createElement("div",{className:"jsx-2347825890 cluster-remove"},r.a.createElement(je.a,{intent:Ge.a.DANGER,onClick:function(){return i(t)}},"Remove this cluster")),r.a.createElement(je.d,null)),r.a.createElement(s.a,{id:"2347825890"},[".cluster-remove.jsx-2347825890{margin:10px 0;text-align:center;}"]))}var Qe=n(33),Ze=n.n(Qe),et=n(62),tt={csv:n.p+"3345740ca9df509867741b3971dd6bb1.csv",dataFields:["carat","depth","table","price","x","y","z"],catFields:["cut"]},nt={csv:n.p+"72b7a04c97f6f9cedc338634227060b2.csv",dataFields:["Length","Diameter","Height","Whole weight","Shucked weight","Viscera weight","Shell weight","Rings"],catFields:["Sex"]},at={csv:n.p+"51ca2023fb832d7f5a4a5e8c46d94683.csv",dataFields:["x","y"],catFields:["c"]},rt=n(83),ot=n.n(rt);function it(e,t){var n=t.xField,a=t.yField,r=t.catField,o=new Map,i=0,l=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY,f=[];return new Promise((function(t,d){ot.a.parse(e,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,download:!0,step:function(e){o.has(e.data[r])||o.set(e.data[r],i++),f.push([e.data[n],e.data[a],o.get(e.data[r]),0]),e.data[n]<l&&(l=e.data[n]),e.data[n]>s&&(s=e.data[n]),e.data[a]<c&&(c=e.data[a]),e.data[a]>u&&(u=e.data[a])},complete:function(){for(var e=(s-l)/2,n=(u-c)/2,a=0;a<f.length;++a)f[a][0]=(f[a][0]-l)/e-1,f[a][1]=(f[a][1]-c)/n-1;t({results:f,nCategories:i})},error:function(){d()}})}))}function lt(e){var t=[],n=!1,a={},r={},o={};return new Promise((function(i,l){ot.a.parse(e,{dynamicTyping:!0,skipEmptyLines:!0,step:function(e){if(!n)return t=Object(f.a)(e.data),n=!0,void t.forEach((function(e){e&&(a[e]=!0,r[e]=new Set,o[e]=!0)}));t.forEach((function(t,n){a[t]&&(r[t].has(e.data[n])||(r[t].add(e.data[n]),r[t].size>10&&(a[t]=!1))),o[t]&&"number"!==typeof e.data[n]&&(o[t]=!1)}))},complete:function(){var e=[],n=[];t.forEach((function(t){a[t]&&e.push(t),o[t]&&n.push(t)})),i([n,e])},error:function(){l()}})}))}var ct={Diamonds:tt,Abalone:nt,Beautiful:at};function st(e){var t=e.dataFields,n=e.catFields,o=e.dataOptions,i=e.setDataOptions,l=o.xField,c=o.yField,u=o.catField;Object(a.useEffect)((function(){i((function(e){return Object(P.a)({},e,{xField:t[0],yField:t[1],catField:n[0]})}))}),[t,n]);var f=t.filter((function(e){return e!==c})),d=t.filter((function(e){return e!==l}));return null===l||null===c||null===u?null:r.a.createElement("div",{className:"jsx-3741392318"},r.a.createElement(je.f,{label:"X",inline:!0,className:"data-option-select"},r.a.createElement(je.g,{options:f,onChange:function(e){var t=e.target.value;i((function(e){return Object(P.a)({},e,{xField:t})}))},value:l,fill:!0})),r.a.createElement(je.f,{label:"Y",inline:!0,className:"data-option-select"},r.a.createElement(je.g,{options:d,onChange:function(e){var t=e.target.value;i((function(e){return Object(P.a)({},e,{yField:t})}))},value:c,fill:!0})),r.a.createElement(je.f,{label:"Category",inline:!0,className:"data-option-select"},r.a.createElement(je.g,{options:n,onChange:function(e){var t=e.target.value;i((function(e){return Object(P.a)({},e,{catField:t})}))},value:u,fill:!0})),r.a.createElement(s.a,{id:"3741392318"},[".data-option-select{margin-bottom:5px;}"]))}function ut(e){var t=e.scatterplot,n=Object(a.useState)("Diamonds"),o=Object(l.a)(n,2),i=o[0],c=o[1],d=Object(a.useState)({xField:null,yField:null,catField:null}),m=Object(l.a)(d,2),p=m[0],v=m[1],h=Object(u.c)(),b=Object(a.useState)(null),g=Object(l.a)(b,2),x=g[0],y=g[1],w=Object(a.useRef)(null),S=Object(a.useRef)(null),E=function(){var e=Object(et.a)(Ze.a.mark((function e(){var n,a,r,o;return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x||ct[i].csv,e.next=3,h(Ie(!0));case 3:return e.next=5,it(n,p);case 5:return a=e.sent,r=a.results,o=a.nCategories,e.next=10,h(Ie(!1));case 10:h(Me(o)),t.draw(r);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(et.a)(Ze.a.mark((function e(){return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==w.current.files.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,h(Ie(!0));case 4:return e.next=6,lt(w.current.files[0]);case 6:return S.current=e.sent,e.next=9,h(Ie(!1));case 9:y(w.current.files[0]),c("");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=x?S.current[0]:ct[i].dataFields,C=x?S.current[1]:ct[i].catFields;return r.a.createElement("div",{className:"jsx-1489596007"},r.a.createElement(je.f,{label:"Data source",inline:!0},r.a.createElement(je.g,{options:[{label:"---",value:""}].concat(Object(f.a)(Object.keys(ct).map((function(e){return{label:e+".csv",value:e}})))),onChange:function(e){e.target.value&&(c(e.target.value),y(null),w.current.value="")},value:i,fill:!0})),r.a.createElement("div",{className:"jsx-1489596007 v-space"}),r.a.createElement(je.f,{className:"v-space"},r.a.createElement(je.e,{text:x?x.name:"Other CSV file...",hasSelection:null!==x,fill:!0,inputProps:{onChange:j,ref:w}})),r.a.createElement(je.d,null),r.a.createElement(st,{dataFields:O,catFields:C,dataOptions:p,setDataOptions:v}),r.a.createElement("div",{className:"jsx-1489596007 data-add-new"},r.a.createElement(je.a,{intent:Ge.a.PRIMARY,onClick:E},"Load data")),r.a.createElement(s.a,{id:"1489596007"},[".data-add-new.jsx-1489596007{margin:10px 0;text-align:center;}",".v-space.jsx-1489596007{margin-top:5px;}"]))}var ft=function(e){if(e>9)throw new Error("There are at most 10 categories!");var t=Math.random()/3+.1,n=1-2*t-.2;return{x:Math.random()*n*2-n,y:Math.random()*n*2-n,sigma:t,angle:Math.random()*Math.PI,amplitude:Math.random(),n:100,category:e}},dt=function(){var e=3;return function(){return e++}}();function mt(e){var t=e.scatterplot,n=Object(a.useState)({1:ft(0),2:ft(1)}),o=Object(l.a)(n,2),i=o[0],c=o[1],d=Object(u.c)();Object(a.useEffect)((function(){null!==t&&(t.draw(Object.keys(i).map((function(e){return function(e){for(var t=e.x,n=void 0===t?0:t,a=e.y,r=void 0===a?0:a,o=e.sigma,i=e.angle,l=void 0===i?0:i,c=e.amplitude,s=void 0===c?2:c,u=e.n,d=e.category,m=[],p=0;p<u;++p)m.push([].concat(Object(f.a)(Ye(n,r,o,l,s)),[d,0]));return m}(i[e])})).reduce((function(e,t){return e.concat(t)}),[])),d(Me(Math.max.apply(Math,Object(f.a)(Object.keys(i).map((function(e){return i[e].category}))))+1)))}),[t,i]);var m=function(e){return function(t){c((function(n){return Object(P.a)({},n,Object(A.a)({},e,Object(P.a)({},n[e],{},t)))}))}},p=function(e){return c((function(t){t[e];return Object(De.a)(t,[e].map(Te.a))}))},v=Object.keys(i).map((function(e){return r.a.createElement($e,{key:e,clusterKey:e,cluster:i[e],setCluster:m(e),removeCluster:p})}));return r.a.createElement("div",{className:"jsx-4110324435"},r.a.createElement(je.d,null),r.a.createElement("p",{style:{textAlign:"center"},className:"jsx-4110324435 bp3-text-muted"},"Click on a cluster to show/hide options."),v,r.a.createElement("div",{className:"jsx-4110324435 data-add-new"},r.a.createElement(je.a,{intent:Ge.a.PRIMARY,onClick:function(){return e=function(){var e=new Set;Object.keys(i).forEach((function(t){return e.add(i[t].category)}));for(var t=0;t<10;++t)if(!e.has(t))return t;return 0}(),c((function(t){return Object(P.a)({},t,Object(A.a)({},dt(),ft(e)))}));var e}},"Add cluster")),r.a.createElement(je.d,null),r.a.createElement("span",{className:"jsx-4110324435 option-title bp3-text-muted"},"LOAD REAL DATA"),r.a.createElement(ut,{scatterplot:t}),r.a.createElement(s.a,{id:"4110324435"},[".data-add-new.jsx-4110324435{margin:10px 0;text-align:center;}"]))}var pt=n(117),vt=n.n(pt),ht=n(180);function bt(e){var t=e.patternKey,n=e.category,a=e.setIsOpen,o=e.isOpen,i=Object(u.d)((function(e){return e.categoryColors}),u.b);return r.a.createElement(je.a,{className:"pattern-button",minimal:!0,fill:!0,active:o,onClick:function(){return a(!o)}},r.a.createElement("div",{className:"jsx-542388820 pattern-header"},r.a.createElement("div",{className:"jsx-542388820 pattern-title"},r.a.createElement("b",{className:"jsx-542388820"},"Pattern: ")," #",t),r.a.createElement("div",{className:"jsx-542388820 pattern-category"},r.a.createElement("div",{style:{backgroundColor:i[n]},className:"jsx-542388820 pattern-category__color-box"})),r.a.createElement(s.a,{id:"927492146"},[".pattern-button .bp3-button-text{width:100%;}"]),r.a.createElement(s.a,{id:"3486257967"},[".pattern-header.jsx-542388820{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}",".pattern-title.jsx-542388820{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".pattern-category__color-box.jsx-542388820{float:left;width:20px;height:20px;margin:5px;border:1px solid rgba(0,0,0,.2);}"])))}var gt=n(84),xt=["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999","#0fc"];function yt(e,t){var n=Object(u.c)(),r=Object(u.d)((function(e){return e.categoryColors}),u.b),o=Object(a.useState)(r[e.category]),i=Object(l.a)(o,2),c=i[0],s=i[1];return[c,function(a){t({hsvColor:[a.hsv.h/360,a.hsv.s,a.hsv.v]}),n(function(e,t){return{type:"update category color",category:e,color:t}}(e.category,a.hex)),s(a.hex)}]}function wt(e){return"".concat(Math.round(100*e),"%")}function St(e){return"".concat(e.toPrecision(2),"s")}function Et(e){var t=e.pattern,n=e.setPattern,a=Ve("a",t.a,n),o=Object(l.a)(a,2),i=o[0],c=o[1],s=Ve("c1",t.c1,n),u=Object(l.a)(s,2),f=u[0],d=u[1],m=Ve("c2",t.c2,n),p=Object(l.a)(m,2),v=p[0],h=p[1],b=Ve("minValue",t.minValue,n),g=Object(l.a)(b,2),x=g[0],y=g[1],w=Ve("phaseShift",t.phaseShift,n),S=Object(l.a)(w,2),E=S[0],j=S[1],O=Ve("cyclesPerSecond",t.cyclesPerSecond,n),C=Object(l.a)(O,2),_=C[0],k=C[1],P=Ve("wavesPerCycle",t.wavesPerCycle,n),z=Object(l.a)(P,2),I=z[0],M=z[1],A=Ve("curve",t.curve,n),F=Object(l.a)(A,2),L=F[0],V=F[1],R=yt(t,n),N=Object(l.a)(R,2),D=N[0],T=N[1],G=Ve("hueVariation",t.hueVariation,n),Y=Object(l.a)(G,2),B=Y[0],W=Y[1],q=Ve("hueVariationPeriod",t.hueVariationPeriod,n),H=Object(l.a)(q,2),K=H[0],U=H[1],X=1===t.direction,J=1===t.invert;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"option-title bp3-text-muted"},"Wave Parameters"),r.a.createElement(je.f,null,r.a.createElement(je.j,{checked:X,label:"Direction",onChange:function(e){return n({direction:e.target.checked?1:-1})},innerLabel:"In",innerLabelChecked:"Out",alignIndicator:Oe.a.RIGHT})),r.a.createElement(je.f,null,r.a.createElement(je.j,{checked:J,label:"Invert",onChange:function(e){return n({invert:e.target.checked?1:0})},innerLabel:"No",innerLabelChecked:"Yes",alignIndicator:Oe.a.RIGHT})),r.a.createElement(je.f,{label:"a",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:1,labelPrecision:2,labelStepSize:1,value:i,onChange:c,fill:!0})),r.a.createElement(je.f,{label:"c1",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:1,labelPrecision:2,labelStepSize:1,value:f,onChange:d,fill:!0})),r.a.createElement(je.f,{label:"c2",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:1,labelPrecision:2,labelStepSize:1,value:v,onChange:h,fill:!0})),r.a.createElement(je.f,{label:"Min value",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:1,labelStepSize:1,labelRenderer:wt,value:x,onChange:y,fill:!0})),r.a.createElement(je.f,{label:"Phase shift",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:1,labelStepSize:1,value:E,onChange:j,fill:!0})),r.a.createElement(je.f,{label:"Cycles/s",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:5,labelPrecision:1,labelStepSize:5,value:_,onChange:k,fill:!0})),r.a.createElement(je.f,{label:"Waves/cycle",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:5,labelPrecision:1,labelStepSize:5,value:I,onChange:M,fill:!0})),r.a.createElement(je.f,{label:"Curve",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:-5,max:5,labelStepSize:10,value:L,onChange:V,fill:!0})),r.a.createElement("span",{className:"option-title bp3-text-muted"},"Color Parameters"),r.a.createElement(je.f,{label:"Color",inline:!0},r.a.createElement(gt.CirclePicker,{color:D,colors:xt,onChange:T,circleSize:14,circleSpacing:1,width:150})),r.a.createElement(je.f,{label:"Hue amp.",inline:!0},r.a.createElement(je.h,{stepSize:.005,min:0,max:.2,labelPrecision:2,labelStepSize:.2,labelRenderer:wt,value:B,onChange:W,fill:!0})),r.a.createElement(je.f,{label:"Hue period",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:5,labelStepSize:5,labelRenderer:St,value:K,onChange:U,fill:!0})))}function jt(e){return"".concat(Math.round(100*e),"%")}function Ot(e){return"".concat(e.toPrecision(2),"s")}function Ct(e){var t=e.pattern,n=e.setPattern,a=Ve("gamma1",t.gamma1,n),o=Object(l.a)(a,2),i=o[0],c=o[1],s=Ve("gamma2",t.gamma2,n),u=Object(l.a)(s,2),f=u[0],d=u[1],m=Ve("maxValue",t.maxValue,n),p=Object(l.a)(m,2),v=p[0],h=p[1],b=Ve("minValue",t.minValue,n),g=Object(l.a)(b,2),x=g[0],y=g[1],w=Ve("phaseShift",t.phaseShift,n),S=Object(l.a)(w,2),E=S[0],j=S[1],O=Ve("cyclesPerSecond",t.cyclesPerSecond,n),C=Object(l.a)(O,2),_=C[0],k=C[1],P=Ve("nSpokes",t.nSpokes,n),z=Object(l.a)(P,2),I=z[0],M=z[1],A=Ve("curve",t.curve,n),F=Object(l.a)(A,2),L=F[0],V=F[1],R=yt(t,n),N=Object(l.a)(R,2),D=N[0],T=N[1],G=Ve("hueVariation",t.hueVariation,n),Y=Object(l.a)(G,2),B=Y[0],W=Y[1],q=Ve("hueVariationPeriod",t.hueVariationPeriod,n),H=Object(l.a)(q,2),K=H[0],U=H[1],X=1===t.direction,J=1===t.invert;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"option-title bp3-text-muted"},"Rotation Parameters"),r.a.createElement(je.f,null,r.a.createElement(je.j,{checked:X,label:"Direction",onChange:function(e){return n({direction:e.target.checked?1:-1})},innerLabel:"Counter-clockwise",innerLabelChecked:"Clockwise",alignIndicator:Oe.a.RIGHT})),r.a.createElement(je.f,null,r.a.createElement(je.j,{checked:J,label:"Invert",onChange:function(e){return n({invert:e.target.checked?1:0})},innerLabel:"No",innerLabelChecked:"Yes",alignIndicator:Oe.a.RIGHT})),r.a.createElement(je.f,{label:"gamma1",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:25,labelPrecision:1,labelStepSize:25,value:i,onChange:c,fill:!0})),r.a.createElement(je.f,{label:"gamma2",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:25,labelPrecision:1,labelStepSize:25,value:f,onChange:d,fill:!0})),r.a.createElement(je.f,{label:"Max value",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:1,labelStepSize:1,value:v,onChange:function(e){e>x?h(e):v!==x&&h(x)},labelRenderer:jt,fill:!0})),r.a.createElement(je.f,{label:"Min value",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:1,labelStepSize:1,value:x,onChange:function(e){e<v?y(e):x!==v&&y(v)},labelRenderer:jt,fill:!0})),r.a.createElement(je.f,{label:"Phase shift",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:1,labelStepSize:1,value:E,onChange:j,fill:!0})),r.a.createElement(je.f,{label:"Cycles/s",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:5,labelPrecision:1,labelStepSize:5,value:_,onChange:k,fill:!0})),r.a.createElement(je.f,{label:'"Spokes"',inline:!0},r.a.createElement(je.h,{stepSize:1,min:1,max:10,labelStepSize:9,value:I,onChange:M,fill:!0})),r.a.createElement(je.f,{label:"Curve",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:-5,max:5,labelStepSize:10,value:L,onChange:V,fill:!0})),r.a.createElement("span",{className:"option-title bp3-text-muted"},"Color Parameters"),r.a.createElement(je.f,{label:"Color",inline:!0},r.a.createElement(gt.CirclePicker,{color:D,colors:xt,onChange:T,circleSize:14,circleSpacing:1,width:150})),r.a.createElement(je.f,{label:"Hue amp.",inline:!0},r.a.createElement(je.h,{stepSize:.005,min:0,max:.2,labelPrecision:2,labelStepSize:.2,labelRenderer:jt,value:B,onChange:W,fill:!0})),r.a.createElement(je.f,{label:"Hue period",inline:!0},r.a.createElement(je.h,{stepSize:.01,min:0,max:5,labelStepSize:5,labelRenderer:Ot,value:K,onChange:U,fill:!0})))}function _t(e){var t,n=e.patternKey,o=e.pattern,i=e.setPattern,c=Object(a.useState)(!1),u=Object(l.a)(c,2),f=u[0],d=u[1],m=Object(a.useRef)(null),p=o.type;p===D?t=r.a.createElement(Et,{pattern:o,setPattern:i}):p===T&&(t=r.a.createElement(Ct,{pattern:o,setPattern:i}));var v=function(){var e=Object(et.a)(Ze.a.mark((function e(){var t,n;return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==m.current){e.next=2;break}throw new Error("Import doesn't work for some reason");case 2:return t=m.current.files[0].text(),e.t0=JSON,e.next=6,t;case 6:e.t1=e.sent,n=e.t0.parse.call(e.t0,e.t1),i(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"jsx-553775580"},r.a.createElement(bt,{patternKey:n,category:o.category,setIsOpen:d,isOpen:f}),r.a.createElement(je.c,{isOpen:f},r.a.createElement(je.f,{label:"Type",inline:!0},r.a.createElement(je.g,{options:[{label:"Radar",value:T},{label:"Pulse",value:D}],onChange:function(e){var t=parseInt(e.target.value,10);i(Object(P.a)({type:t},G[t]))},value:p,fill:!0})),t,r.a.createElement("span",{className:"jsx-553775580 option-title bp3-text-muted"},"Import/Export"),r.a.createElement("div",{className:"jsx-553775580 pattern-buttons"},r.a.createElement(je.a,{onClick:function(){o.hsvColor,o.category;var e=Object(De.a)(o,["hsvColor","category"]),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"});Object(ht.saveAs)(t,"pattern.json")},className:"pattern-buttons__button",fill:!0},"Export pattern"),r.a.createElement(je.e,{buttonText:"Import pattern",inputProps:{onChange:v,ref:m,intent:Ge.a.PRIMARY,accept:"application/json"},fill:!0,className:"pattern-buttons__button"})),r.a.createElement(je.d,null)),r.a.createElement(s.a,{id:"3404686753"},[".pattern-buttons.jsx-553775580{text-align:center;margin:15px 0;}"]),r.a.createElement(s.a,{id:"3771710932"},[".pattern-buttons__button{margin:5px 0;}",".pattern-buttons__button.bp3-file-input{box-shadow:0 0 0 1px rgba(16,22,26,0.4);}",".pattern-buttons .bp3-file-upload-input::after{margin:0;width:100%;line-height:inherit;}"]))}var kt=function(){var e=3;return function(){return e++}}();function Pt(e){var t=vt()(e).toHsv();return[t.h/360,t.s,t.v]}function zt(e){var t=e.scatterplot,n=Object(u.d)((function(e){return e.categoryColors}),u.b),o=Object(a.useState)({1:Object(P.a)({},ze[0],{hsvColor:Pt(n[0])}),2:Object(P.a)({},ze[1],{hsvColor:Pt(n[1])})}),i=Object(l.a)(o,2),c=i[0],f=i[1],d=Object(u.d)((function(e){return e.maxCategories}));Object(a.useEffect)((function(){null!==t&&t.patternManager.setAll(Object.keys(c).map((function(e){return c[e]})))}),[t,c]);var m=function(e){return function(t){f((function(n){return Object(P.a)({},n,Object(A.a)({},e,Object(P.a)({},n[e],{},t)))}))}};Object(a.useEffect)((function(){if(d>0){var e=new Set(new Array(d).fill().map((function(e,t){return t})));Object.keys(c).forEach((function(t){var n=c[t];n.category>=d?function(e){f((function(t){t[e];return Object(De.a)(t,[e].map(Te.a))}))}(t):e.delete(n.category)})),e.forEach((function(e){return function(e){return f((function(t){return Object(P.a)({},t,Object(A.a)({},kt(),Object(P.a)({},ze[e],{hsvColor:Pt(n[e])})))}))}(e)}))}}),[d]);var p=Object.keys(c).map((function(e){return r.a.createElement(_t,{key:e,patternKey:e,pattern:c[e],setPattern:m(e)})}));return r.a.createElement("div",{className:"jsx-4110324435"},r.a.createElement(je.d,null),r.a.createElement("p",{style:{textAlign:"center"},className:"jsx-4110324435 bp3-text-muted"},"Click on a pattern to show/hide options."),p,r.a.createElement(s.a,{id:"4110324435"},[".data-add-new.jsx-4110324435{margin:10px 0;text-align:center;}"]))}function It(e){var t=e.scatterplot,n=Object(u.d)((function(e){return e.isDarkTheme}));return r.a.createElement(je.b,{className:"card-sidebar ".concat(n?"bp3-dark":""),elevation:2},r.a.createElement(je.l,{id:"sidebar-tabs"},r.a.createElement(je.k,{title:"Scatterplot",id:"scatterplot-options-tab",panel:r.a.createElement(Ne,{scatterplot:t})}),r.a.createElement(je.k,{title:"Data",id:"data-options-tab",panel:r.a.createElement(mt,{scatterplot:t})}),r.a.createElement(je.k,{title:"Patterns",id:"patterns-options-tab",panel:r.a.createElement(zt,{scatterplot:t})})),r.a.createElement(s.a,{id:"2537287085"},[".card-sidebar{width:300px;border-radius:0;overflow-y:scroll;overflow-x:hidden;}",".bp3-tab-list{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]))}function Mt(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{id:"1848306565"},["html,body,#root{margin:0;padding:0;width:100%;height:100%;}",".bp3-collapse-body{padding:10px 0;}",".bp3-form-group{margin-bottom:0px;}",".bp3-form-group.bp3-inline label.bp3-label{margin-right:20px;min-width:70px;}",".circle-picker{margin-top:5px;}",".option-title{font-weight:600;text-transform:uppercase;text-align:center;display:block;margin:10px 0 5px 0;}"]))}function At(){var e=Object(u.d)((function(e){return e.isLoading}));return r.a.createElement("div",{style:{display:e?"block":"none"},className:"jsx-4135138053 overlay"},r.a.createElement("div",{className:"jsx-4135138053 container"},r.a.createElement(je.i,{size:200}),r.a.createElement("span",{className:"jsx-4135138053 text bp3-text-muted"},"Loading")),r.a.createElement(s.a,{id:"4135138053"},[".overlay.jsx-4135138053{position:absolute;top:0;left:0;bottom:0;right:0;background-color:rgba(255,255,255,.2);-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);}",".container.jsx-4135138053{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);-ms-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0);width:200px;height:200px;padding:0px;border-radius:50%;background-color:rgba(255,255,255,.05);box-shadow:0 2px 6px 0 rgba(0,0,0,0.2);}",".text.jsx-4135138053{font-weight:600;text-transform:uppercase;font-size:2em;position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);-ms-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0);text-shadow:0px 0px 8px rgba(0,0,0,0.8);}"]))}var Ft=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],o=t[1],i=Object(u.d)((function(e){return e.isDarkTheme})),c=Object(u.d)((function(e){return e.categoryColors}),u.b),f=Object(a.useCallback)((function(e){!function(e,t,n){var a=e.getBoundingClientRect(),r=a.width,o=a.height,i=Ee({canvas:e,width:r,height:o,lassoMinDelay:10,lassoMinDist:2,pointSize:ke,showRecticle:!0,recticleColor:[1,1,.878431373,.33]});window.addEventListener("resize",(function(){var t=e.getBoundingClientRect();r=t.width,o=t.height,i.set({width:r,height:o})})),i.set({colorBy:"category",colors:n}),t(i)}(e,o,c)}),[o]),d="#000000";return r.a.createElement("div",{className:s.a.dynamic([["773189250",[i?d:"#ffffff"]]])+" App"},r.a.createElement(Mt,null),r.a.createElement("div",{className:s.a.dynamic([["773189250",[i?d:"#ffffff"]]])+" content"},r.a.createElement("div",{className:s.a.dynamic([["773189250",[i?d:"#ffffff"]]])+" canvas-wrapper"},r.a.createElement("canvas",{ref:f,className:s.a.dynamic([["773189250",[i?d:"#ffffff"]]])+" canvas"}))),r.a.createElement(It,{scatterplot:n}),r.a.createElement(At,null),r.a.createElement(s.a,{id:"773189250",dynamic:[i?d:"#ffffff"]},[".App.__jsx-style-dynamic-selector{background-color:".concat(i?d:"#ffffff",";width:100%;height:100%;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}"),".content.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;height:100%;position:relative;}",".canvas-wrapper.__jsx-style-dynamic-selector{position:absolute;top:0;right:0;bottom:0;left:0;}",".canvas.__jsx-style-dynamic-selector{position:absolute;width:100%;height:100%;}"]))},Lt=n(48);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Vt=Object(Lt.b)({categoryColors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0;if("update category color"===t.type){var n=Object(f.a)(e);return n[t.category]=t.color,n}return e},isDarkTheme:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return"toggle theme"===t.type?!e:e},isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"set loading"===t.type?t.value:e},maxCategories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return"set max categories"===t.type?t.value:e}}),Rt=Object(Lt.c)(Vt);i.a.render(r.a.createElement(u.a,{store:Rt},r.a.createElement(Ft,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[232,1,2]]]);
//# sourceMappingURL=main.e68815d3.chunk.js.map