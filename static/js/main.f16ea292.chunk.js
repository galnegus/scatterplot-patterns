(this["webpackJsonpwinglets-playground"]=this["webpackJsonpwinglets-playground"]||[]).push([[0],{132:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(8),a=n.n(i),l=n(4),s=n(10),u=n.n(s),c=n(39),f=n(20);function h(e,t,n,r,o){var i,a,l=2*Math.PI;do{i=Math.random(),a=Math.random()}while(i<=Number.EPSILON);var s=l*a,u=Math.sqrt(-2*Math.log(i)),c=u*Math.cos(s),f=u*Math.sin(s),h=Math.cos(r),p=Math.sin(r),d=h*p*(o-1);return[(c=(o*Math.pow(h,2)+Math.pow(p,2))*c+d*f)*n+e,(f=d*c+(Math.pow(h,2)+o*Math.pow(p,2))*f)*n+t]}function p(e){for(var t=e.x,n=void 0===t?0:t,r=e.y,o=void 0===r?0:r,i=e.sigma,a=e.angle,l=void 0===a?0:a,s=e.amplitude,u=void 0===s?2:s,c=e.n,p=e.category,d=[],v=0;v<c;++v)d.push([].concat(Object(f.a)(h(n,o,i,l,u)),[p,0]));return d}var d=n(135),v=n(9),g=n(17),y=n(16),m={showWinglets:!0,showContours:!1,lineWidth:1,a:.01,b:.06,n:1,contourDropoff:.08},b=Object(y.a)({useColors:!0,pointSize:5},m),w=["#DB2C6F","#2965CC","#29A634","#D99E0B","#D13913","#8F398F","#00B3A4","#9BBF30","#96622D","#7157D9"],x=["#F5F8FA","#F5F8FA","#F5F8FA","#F5F8FA","#F5F8FA","#F5F8FA","#F5F8FA","#F5F8FA","#F5F8FA","#F5F8FA"],j=Object(v.a)((function(e,t){return e.set({pointSize:t})}),500),_=Object(v.a)((function(e,t){return e({lineWidth:t})}),500),E=Object(v.a)((function(e,t){return e({a:t})}),500),M=Object(v.a)((function(e,t){return e({b:t})}),500),S=Object(v.a)((function(e,t){return e({n:t})}),500),A=Object(v.a)((function(e,t){return e({contourDropoff:t})}),500);function O(e){return"".concat(Math.round(100*e),"%")}function k(e){var t=e.scatterplot,n=Object(r.useState)(b.pointSize),i=Object(l.a)(n,2),a=i[0],s=i[1],u=Object(r.useState)(b.lineWidth),c=Object(l.a)(u,2),f=c[0],h=c[1],p=Object(r.useState)(b.a),v=Object(l.a)(p,2),y=v[0],m=v[1],k=Object(r.useState)(b.b),C=Object(l.a)(k,2),L=C[0],B=C[1],P=Object(r.useState)(b.n),z=Object(l.a)(P,2),R=z[0],F=z[1],I=Object(r.useState)(b.contourDropoff),T=Object(l.a)(I,2),D=T[0],N=T[1],W=function(e){null!==t&&(t.draw(),t.setWingletsOptions(e))};return o.a.createElement("div",null,o.a.createElement(d.d,null),o.a.createElement(d.e,null,o.a.createElement(d.g,{defaultChecked:b.showContours,label:"Show contours",onChange:function(e){return W({showContours:e.target.checked})},innerLabel:"no",innerLabelChecked:"yes",alignIndicator:g.a.RIGHT}),o.a.createElement(d.g,{defaultChecked:b.showWinglets,label:"Show winglets",onChange:function(e){return W({showWinglets:e.target.checked})},innerLabel:"no",innerLabelChecked:"yes",alignIndicator:g.a.RIGHT}),o.a.createElement(d.g,{defaultChecked:b.useColors,label:"Use colors",onChange:function(e){return t.set({colors:e.target.checked?w:x})},innerLabel:"no",innerLabelChecked:"yes",alignIndicator:g.a.RIGHT})),o.a.createElement(d.e,{label:"Point size",labelInfo:"(default: ".concat(b.pointSize,")")},o.a.createElement(d.f,{stepSize:.01,min:0,max:10,labelStepSize:2.5,value:a,onChange:function(e){s(e),j(t,e)},fill:!0})),o.a.createElement(d.e,{label:"Winglet line width",labelInfo:"(default: ".concat(b.lineWidth,")")},o.a.createElement(d.f,{stepSize:.05,min:0,max:5,labelStepSize:1.25,value:f,onChange:function(e){h(e),_(W,e)},fill:!0})),o.a.createElement(d.d,null),o.a.createElement(d.e,{label:"Contour drop off %",labelInfo:"(default: ".concat(O(b.contourDropoff),")")},o.a.createElement(d.f,{stepSize:.001,min:0,max:.2,labelStepSize:.05,value:D,onChange:function(e){N(e),A(W,e)},labelRenderer:O,fill:!0})),o.a.createElement(d.e,{label:o.a.createElement("span",{className:"bp3-text-muted"},"Winglet length = ",o.a.createElement("b",null,"a")," + ",o.a.createElement("b",null,"b")," * s(i)^",o.a.createElement("b",null,"n")),style:{textAlign:"center"}},o.a.createElement(d.e,{label:"a",labelInfo:"(default: ".concat(b.a,")"),style:{textAlign:"left"}},o.a.createElement(d.f,{stepSize:.002,min:0,max:.2,labelStepSize:.05,value:y,onChange:function(e){m(e),E(W,e)},fill:!0})),o.a.createElement(d.e,{label:"b",labelInfo:"(default: ".concat(b.b,")"),style:{textAlign:"left"}},o.a.createElement(d.f,{stepSize:.002,min:0,max:.2,labelStepSize:.05,value:L,onChange:function(e){B(e),M(W,e)},fill:!0})),o.a.createElement(d.e,{label:"n",labelInfo:"(default: ".concat(b.n,")"),style:{textAlign:"left"}},o.a.createElement(d.f,{stepSize:.03,min:0,max:3,labelStepSize:1,value:R,onChange:function(e){F(e),S(W,e)},fill:!0}))),o.a.createElement(d.d,null),o.a.createElement("p",{style:{textAlign:"center"}},o.a.createElement("b",null,"Note: "),o.a.createElement("span",{className:"bp3-text-muted"},"Each slider has a 500ms debounce to avoid clogging the system.")))}var C=n(49),L=n(48),B=n(18),P=n(11);function z(e){var t=e.clusterKey,n=e.category,r=e.setIsOpen,i=e.isOpen;return o.a.createElement(d.a,{className:"cluster-button",minimal:!0,fill:!0,active:i,onClick:function(){return r(!i)}},o.a.createElement("div",{className:"jsx-3670062821 cluster-header"},o.a.createElement("div",{className:"jsx-3670062821 cluster-title"},o.a.createElement("b",{className:"jsx-3670062821"},"Cluster: ")," #",t),o.a.createElement("div",{className:"jsx-3670062821 cluster-category"},o.a.createElement("div",{style:{backgroundColor:w[n]},className:"jsx-3670062821 cluster-category__color-box"})),o.a.createElement(u.a,{id:"1811696610"},[".cluster-button .bp3-button-text{width:100%;}"]),o.a.createElement(u.a,{id:"1213808302"},[".cluster-header.jsx-3670062821{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}",".cluster-title.jsx-3670062821{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}",".cluster-category__color-box.jsx-3670062821{float:left;width:20px;height:20px;margin:5px;border:1px solid rgba(0,0,0,.2);}"])))}var R=Object(v.a)((function(e,t){return e({x:t})}),500),F=Object(v.a)((function(e,t){return e({y:t})}),500),I=Object(v.a)((function(e,t){return e({sigma:t})}),500),T=Object(v.a)((function(e,t){return e({angle:t})}),500),D=Object(v.a)((function(e,t){return e({amplitude:t})}),500),N=Object(v.a)((function(e,t){return e({n:t})}),500),W=Object(v.a)((function(e,t){return e({category:t})}),500);function q(e){var t=e.clusterKey,n=e.cluster,i=e.setCluster,a=e.removeCluster,s=Object(r.useState)(n.x),c=Object(l.a)(s,2),f=c[0],h=c[1],p=Object(r.useState)(n.y),v=Object(l.a)(p,2),g=v[0],y=v[1],m=Object(r.useState)(n.sigma),b=Object(l.a)(m,2),w=b[0],x=b[1],j=Object(r.useState)(n.angle),_=Object(l.a)(j,2),E=_[0],M=_[1],S=Object(r.useState)(n.amplitude),A=Object(l.a)(S,2),O=A[0],k=A[1],C=Object(r.useState)(n.n),L=Object(l.a)(C,2),B=L[0],q=L[1],V=Object(r.useState)(n.category),G=Object(l.a)(V,2),U=G[0],$=G[1],X=Object(r.useState)(!1),Y=Object(l.a)(X,2),H=Y[0],J=Y[1];return o.a.createElement("div",{className:"jsx-2347825890"},o.a.createElement(z,{clusterKey:t,category:U,setIsOpen:J,isOpen:H}),o.a.createElement(d.c,{isOpen:H},o.a.createElement(d.e,{label:"Mean x position"},o.a.createElement(d.f,{stepSize:.01,min:-1,max:1,labelStepSize:.5,value:f,onChange:function(e){h(e),R(i,e)},fill:!0})),o.a.createElement(d.e,{label:"Mean y position"},o.a.createElement(d.f,{stepSize:.01,min:-1,max:1,labelStepSize:.5,value:g,onChange:function(e){y(e),F(i,e)},fill:!0})),o.a.createElement(d.e,{label:"Standard deviation"},o.a.createElement(d.f,{stepSize:.01,min:0,max:.8,labelStepSize:.2,value:w,onChange:function(e){x(e),I(i,e)},fill:!0})),o.a.createElement(d.e,{label:"Angle of rotation",labelInfo:"(in radians)"},o.a.createElement(d.f,{stepSize:.03,min:0,max:Math.PI,labelStepSize:1,value:E,onChange:function(e){M(e),T(i,e)},fill:!0})),o.a.createElement(d.e,{label:"Amplitude",labelInfo:"(x-radius / y-radius)"},o.a.createElement(d.f,{stepSize:.03,min:0,max:3,labelStepSize:1,value:O,onChange:function(e){k(e),D(i,e)},fill:!0})),o.a.createElement(d.e,{label:"Number of points"},o.a.createElement(d.f,{stepSize:10,min:1,max:1e4,labelStepSize:3333,value:B,onChange:function(e){q(e),N(i,e)},fill:!0})),o.a.createElement(d.e,{label:"Category"},o.a.createElement(d.f,{stepSize:1,min:0,max:9,labelStepSize:2,value:U,onChange:function(e){$(e),W(i,e)},fill:!0})),o.a.createElement("div",{className:"jsx-2347825890 cluster-remove"},o.a.createElement(d.a,{intent:P.a.DANGER,onClick:function(){return a(t)}},"Remove this cluster")),o.a.createElement(d.d,null)),o.a.createElement(u.a,{id:"2347825890"},[".cluster-remove.jsx-2347825890{margin:10px 0;text-align:center;}"]))}var V=function(e){if(e>9)throw new Error("There are at most 10 categories!");var t=Math.random()/3+.1,n=1-2*t-.2;return{x:Math.random()*n*2-n,y:Math.random()*n*2-n,sigma:t,angle:Math.random()*Math.PI,amplitude:Math.random(),n:100,category:e}},G=function(){var e=3;return function(){return e++}}();function U(e){var t=e.scatterplot,n=Object(r.useState)({1:V(0),2:V(1)}),i=Object(l.a)(n,2),a=i[0],s=i[1];Object(r.useEffect)((function(){null!==t&&t.draw(Object.keys(a).map((function(e){return p(a[e])})).reduce((function(e,t){return e.concat(t)}),[]))}),[t,a]);var c=function(e){return function(t){s((function(n){return Object(y.a)({},n,Object(B.a)({},e,Object(y.a)({},n[e],{},t)))}))}},f=function(e){return s((function(t){t[e];return Object(C.a)(t,[e].map(L.a))}))},h=Object.keys(a).map((function(e){return o.a.createElement(q,{key:e,clusterKey:e,cluster:a[e],setCluster:c(e),removeCluster:f})}));return o.a.createElement("div",{className:"jsx-4110324435"},o.a.createElement(d.d,null),o.a.createElement("p",{style:{textAlign:"center"},className:"jsx-4110324435 bp3-text-muted"},"Click on a cluster to show/hide options."),h,o.a.createElement("div",{className:"jsx-4110324435 data-add-new"},o.a.createElement(d.a,{intent:P.a.PRIMARY,onClick:function(){return e=function(){var e=new Set;Object.keys(a).forEach((function(t){return e.add(a[t].category)}));for(var t=0;t<10;++t)if(!e.has(t))return t;return 0}(),s((function(t){return Object(y.a)({},t,Object(B.a)({},G(),V(e)))}));var e}},"Add cluster")),o.a.createElement(u.a,{id:"4110324435"},[".data-add-new.jsx-4110324435{margin:10px 0;text-align:center;}"]))}function $(e){var t=e.scatterplot;return o.a.createElement(d.b,{className:"card-sidebar bp3-dark",elevation:4},o.a.createElement(d.i,{id:"sidebar-tabs"},o.a.createElement(d.h,{title:"Winglets options",id:"winglets-options-tab",panel:o.a.createElement(k,{scatterplot:t})}),o.a.createElement(d.h,{title:"Data options",id:"data-options-tab",panel:o.a.createElement(U,{scatterplot:t})})),o.a.createElement(u.a,{id:"1461674241"},[".card-sidebar{width:300px;border-radius:0;overflow-y:scroll;}",".bp3-tab-list{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}"]))}function X(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{id:"2781488782"},["html,body,#root{margin:0;padding:0;width:100%;height:100%;}"]))}function Y(e,t){var n=e.getBoundingClientRect(),r=n.width,o=n.height,i=b.pointSize,a=Object(c.a)({canvas:e,width:r,height:o,lassoMinDelay:10,lassoMinDist:2,pointSize:i,showRecticle:!0,recticleColor:[1,1,.878431373,.33],wingletsOptions:m});window.addEventListener("resize",(function(){var t=e.getBoundingClientRect();r=t.width,o=t.height,a.set({width:r,height:o})}));a.set({colorBy:"category",colors:w});var l=new Array(2).fill().map((function(e,t){return function(e,t){var n=Math.random()/3+.1,r=1-2*n-.2;return p({x:Math.random()*r*2-r,y:Math.random()*r*2-r,sigma:n,angle:Math.random()*Math.PI,amplitude:Math.random(),n:e,category:t})}(100,t)})).reduce((function(e,t){return e.concat(t)}),[]);a.draw(l),t(a)}var H=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],i=t[1],a=Object(r.useCallback)((function(e){Y(e,i)}),[i]);return o.a.createElement("div",{className:"jsx-2595699205 App"},o.a.createElement(X,null),o.a.createElement("div",{className:"jsx-2595699205 content"},o.a.createElement("div",{className:"jsx-2595699205 canvas-wrapper"},o.a.createElement("canvas",{ref:a,className:"jsx-2595699205 canvas"}))),o.a.createElement($,{scatterplot:n}),o.a.createElement(u.a,{id:"2595699205"},[".App.jsx-2595699205{background-color:#10161A;width:100%;height:100%;position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".content.jsx-2595699205{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;height:100%;position:relative;}",".canvas-wrapper.jsx-2595699205{position:absolute;top:0;right:0;bottom:0;left:0;}",".canvas.jsx-2595699205{position:absolute;width:100%;height:100%;}"]))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},39:function(e,t,n){"use strict";(function(e,r){var o=n(25),i=n.n(o),a=n(40),l=n(41),s=n(20),u=n(4),c=n(42),f=n(43),h=n.n(f);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var m="undefined"!=typeof Float32Array?Float32Array:Array;Math.PI;function b(){var e=new m(16);return m!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function w(e){var t=new m(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function x(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],l=t[5],s=t[6],u=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],v=t[13],g=t[14],y=t[15],m=n*l-r*a,b=n*s-o*a,w=n*u-i*a,x=r*s-o*l,j=r*u-i*l,_=o*u-i*s,E=c*v-f*d,M=c*g-h*d,S=c*y-p*d,A=f*g-h*v,O=f*y-p*v,k=h*y-p*g,C=m*k-b*O+w*A+x*S-j*M+_*E;return C?(C=1/C,e[0]=(l*k-s*O+u*A)*C,e[1]=(o*O-r*k-i*A)*C,e[2]=(v*_-g*j+y*x)*C,e[3]=(h*j-f*_-p*x)*C,e[4]=(s*S-a*k-u*M)*C,e[5]=(n*k-o*S+i*M)*C,e[6]=(g*w-d*_-y*b)*C,e[7]=(c*_-h*w+p*b)*C,e[8]=(a*O-l*S+u*E)*C,e[9]=(r*S-n*O-i*E)*C,e[10]=(d*j-v*w+y*m)*C,e[11]=(f*w-c*j-p*m)*C,e[12]=(l*M-a*A-s*E)*C,e[13]=(n*A-r*M+o*E)*C,e[14]=(v*b-d*x-g*m)*C,e[15]=(c*x-f*b+h*m)*C,e):null}function j(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],l=t[4],s=t[5],u=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],v=t[12],g=t[13],y=t[14],m=t[15],b=n[0],w=n[1],x=n[2],j=n[3];return e[0]=b*r+w*l+x*f+j*v,e[1]=b*o+w*s+x*h+j*g,e[2]=b*i+w*u+x*p+j*y,e[3]=b*a+w*c+x*d+j*m,b=n[4],w=n[5],x=n[6],j=n[7],e[4]=b*r+w*l+x*f+j*v,e[5]=b*o+w*s+x*h+j*g,e[6]=b*i+w*u+x*p+j*y,e[7]=b*a+w*c+x*d+j*m,b=n[8],w=n[9],x=n[10],j=n[11],e[8]=b*r+w*l+x*f+j*v,e[9]=b*o+w*s+x*h+j*g,e[10]=b*i+w*u+x*p+j*y,e[11]=b*a+w*c+x*d+j*m,b=n[12],w=n[13],x=n[14],j=n[15],e[12]=b*r+w*l+x*f+j*v,e[13]=b*o+w*s+x*h+j*g,e[14]=b*i+w*u+x*p+j*y,e[15]=b*a+w*c+x*d+j*m,e}function _(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function E(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M(e,t,n){var r,o,i,a=n[0],l=n[1],s=n[2],u=Math.sqrt(a*a+l*l+s*s);return u<1e-6?null:(a*=u=1/u,l*=u,s*=u,r=Math.sin(t),i=1-(o=Math.cos(t)),e[0]=a*a*i+o,e[1]=l*a*i+s*r,e[2]=s*a*i-l*r,e[3]=0,e[4]=a*l*i-s*r,e[5]=l*l*i+o,e[6]=s*l*i+a*r,e[7]=0,e[8]=a*s*i+l*r,e[9]=l*s*i-a*r,e[10]=s*s*i+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function S(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function A(e,t){var n=t[0],r=t[1],o=t[2],i=t[4],a=t[5],l=t[6],s=t[8],u=t[9],c=t[10];return e[0]=Math.sqrt(n*n+r*r+o*o),e[1]=Math.sqrt(i*i+a*a+l*l),e[2]=Math.sqrt(s*s+u*u+c*c),e}function O(){var e=new m(3);return m!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function k(e,t,n){var r=new m(3);return r[0]=e,r[1]=t,r[2]=n,r}function C(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],l=n[1],s=n[2];return e[0]=o*s-i*l,e[1]=i*a-r*s,e[2]=r*l-o*a,e}var L=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)};!function(){var e=O()}();function B(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,e[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,e[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,e[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,e}!function(){var e=function(){var e=new m(4);return m!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();function P(){var e=new m(4);return m!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function z(e,t,n,r){var o=t[0],i=t[1],a=t[2],l=t[3],s=n[0],u=n[1],c=n[2],f=n[3],h=void 0,p=void 0,d=void 0,v=void 0,g=void 0;return o*s+i*u+a*c+l*f<0&&(-p,-s,-u,-c,-f),1-p>1e-6?(Math.acos(p),Math.sin(h),Math.sin((1-r)*h)/d,Math.sin(r*h)/d):(1-r,r),e[0]=v*o+g*s,e[1]=v*i+g*u,e[2]=v*a+g*c,e[3]=v*l+g*f,e}var R=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=o*a,e[3]=i*a),e};(function(){var e=O(),t=k(1,0,0),n=k(0,1,0)})(),function(){var e=P(),t=P()}(),function(){var e=function(){var e=new m(9);return m!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}()}();function F(e,t){var n=e[0],r=e[1],o=t[0],i=t[1],a=n*n+r*r;a>0&&(a=1/Math.sqrt(a));var l=o*o+i*i;l>0&&(l=1/Math.sqrt(l));var s=(n*o+r*i)*a*l;return s>1?0:s<-1?Math.PI:Math.acos(s)}!function(){var e=function(){var e=new m(2);return m!=Float32Array&&(e[0]=0,e[1]=0),e}()}();var I=[0,0,0,1],T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new Float32Array(16),o=new Float32Array(16),i=new Float32Array(16),a=b(),l=function(){return A(r,a)[0]},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(u.a)(e,2),n=t[0],r=void 0===n?0:n,o=t[1],i=void 0===o?0:o,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;a=b(),f([-r,-i]),p(s),h(1/l)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(u.a)(e,2),n=t[0],i=void 0===n?0:n,l=t[1],s=void 0===l?0:l;r[0]=i,r[1]=s,r[2]=0;var c=_(o,r);j(a,c,a)},h=function(e,t){if(!(e<=0)){r[0]=e,r[1]=e,r[2]=1;var n=E(o,r),l=t?[].concat(Object(s.a)(t),[0]):I,u=_(r,l);j(a,u,j(a,n,j(a,x(i,u),a)))}},p=function(e){var t=b();M(t,e,[0,0,1]),j(a,t,a)};return c(e,t,n),{get translation(){return S(r,a).slice(0,2)},get target(){return B(r,I,x(i,a))},get scaling(){return l()},get distance(){return 1/l()},get rotation(){return Math.acos(a[0])},get view(){return a},lookAt:c,translate:f,pan:f,rotate:p,scale:h,zoom:h,reset:function(){c(e,t,n)},set:function(e){!e||e.length<16||(a=e)}}},D={},N=function(e){return e?D[e]:D},W=function(){Object.keys(D).forEach((function(e){D[e]=!1}))};function q(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}W(),window.addEventListener("keydown",(function(e){var t=e.key;D[t]=!0}),!1),window.addEventListener("keyup",(function(e){var t=e.key;D[t]=!1}),!1),window.addEventListener("blur",W,!1);var V=q;function G(e){return"function"==typeof e}function U(e){return"object"==typeof e&&null!==e}function $(e){return void 0===e}q.EventEmitter=q,q.prototype._events=void 0,q.prototype._maxListeners=void 0,q.defaultMaxListeners=10,q.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},q.prototype.emit=function(e){var t,n,r,o,i,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||U(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if($(n=this._events[e]))return!1;if(G(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(U(n))for(o=Array.prototype.slice.call(arguments,1),r=(a=n.slice()).length,i=0;i<r;i++)a[i].apply(this,o);return!0},q.prototype.addListener=function(e,t){var n;if(!G(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,G(t.listener)?t.listener:t),this._events[e]?U(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,U(this._events[e])&&!this._events[e].warned&&(n=$(this._maxListeners)?q.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},q.prototype.on=q.prototype.addListener,q.prototype.once=function(e,t){if(!G(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},q.prototype.removeListener=function(e,t){var n,r,o,i;if(!G(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,r=-1,n===t||G(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(U(n)){for(i=o;i-- >0;)if(n[i]===t||n[i].listener&&n[i].listener===t){r=i;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},q.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(G(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},q.prototype.listeners=function(e){return this._events&&this._events[e]?G(this._events[e])?[this._events[e]]:this._events[e].slice():[]},q.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(G(t))return 1;if(t)return t.length}return 0},q.listenerCount=function(e,t){return e.listenerCount(t)};var X=function(e,t){var n=new V;if(n[0]=0,n[1]=0,n.prev=[0,0],n.flush=function(){n.prev[0]=n[0],n.prev[1]=n[1]},n.dispose=function(){n.removeAllListeners("move"),t.removeEventListener("mousemove",r)},"undefined"==typeof window)return n;t=t||e||window;var r=(e=e||document.body)===document.body||e===window?function(e){n.prev[0]=n[0],n.prev[1]=n[1],n[0]=e.clientX,n[1]=e.clientY,n.emit("move",e)}:function(t){n.prev[0]=n[0],n.prev[1]=n[1];var r=e.getBoundingClientRect();n[0]=t.clientX-r.left,n[1]=t.clientY-r.top,n.emit("move",t)};return t.addEventListener("mousemove",r,!1),n};var Y=["left","middle","right"],H=function(e,t){var n=new V;return n.left=!1,n.right=!1,n.middle=!1,n.dispose=function(){n.left=!1,n.right=!1,n.middle=!1,e&&(e.removeEventListener("contextmenu",i,!1),e.removeEventListener("mousedown",r,!1),window.removeEventListener("mouseup",o,!1))},"undefined"!=typeof window&&((e=e||window).addEventListener("mousedown",r,!1),window.addEventListener("mouseup",o,!1),t&&e.addEventListener("contextmenu",i,!1)),n;function r(e){if(n.right=!1,n[Y[e.button]]=!0,n.emit("down",e),t){if(!e.preventDefault)return!1;e.preventDefault(),e.stopPropagation()}}function o(e){n.right=!1,n[Y[e.button]]=!1,n.emit("up",e),t&&e.preventDefault&&(e.preventDefault(),e.stopPropagation())}function i(e){return e.preventDefault&&e.preventDefault()&&!1}};var J,K,Z,Q,ee,te=ie,ne=ie,re=function(e,t,n){le(e,Z,t,n),"DOMMouseScroll"==Z&&le(e,"MozMousePixelScroll",t,n)},oe="";function ie(e,t,n){ae(e,Z,t,n),"DOMMouseScroll"==Z&&ae(e,"MozMousePixelScroll",t,n)}function ae(e,t,n,r){e[J](oe+t,"wheel"==Z?n:function(e){!e&&(e=window.event);var t={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,deltaY:0,deltaZ:0,clientX:e.clientX,clientY:e.clientY,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){e.stopImmediatePropagation&&e.stopImmediatePropagation()}};return"mousewheel"==Z?(t.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(t.deltaX=-.025*e.wheelDeltaX)):t.deltaY=e.detail,n(t)},r||!1)}function le(e,t,n,r){e[K](oe+t,n,r||!1)}Q="undefined"!=typeof window&&window,ee="undefined"!=typeof document&&document,Q&&Q.addEventListener?(J="addEventListener",K="removeEventListener"):(J="attachEvent",K="detachEvent",oe="on"),Z=ee?"onwheel"in ee.createElement("div")?"wheel":void 0!==ee.onmousewheel?"mousewheel":"DOMMouseScroll":"wheel",te.addWheelListener=ne,te.removeWheelListener=re;var se=te.addWheelListener,ue=te.removeWheelListener,ce=function(e,t){var n=new V;return n.flush=r,n.dispose=function(){ue(e,o,!1)},r(),"undefined"==typeof window?n:(e=e||window,se(e,o,!1),n);function r(){n[0]=n[1]=n[2]=0}function o(e){var r=1===e.deltaMode?12:1;n[0]+=r*(e.deltaX||0),n[1]+=r*(e.deltaY||0),n[2]+=r*(e.deltaZ||0),n.emit("scroll",n),t&&e.preventDefault&&(e.preventDefault(),e.stopPropagation&&e.stopPropagation())}};var fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.distance,r=void 0===n?1:n,o=t.target,i=void 0===o?[0,0]:o,a=t.rotation,l=void 0===a?0:a,s=t.isFixed,u=void 0!==s&&s,c=t.isPan,f=void 0===c||c,h=t.panSpeed,p=void 0===h?1:h,d=t.isRotate,v=void 0===d||d,g=t.rotateSpeed,y=void 0===g?1:g,m=t.isZoom,b=void 0===m||m,w=t.zoomSpeed,x=void 0===w?1:w,j=T(i,r,l),_=!1,E=X(e),M=H(e),S=ce(e,b),A=e.height/window.devicePixelRatio,O=e.width/window.devicePixelRatio,k=O/A,C=!1;return j.config=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isFixed,n=void 0===t?null:t,r=e.isPan,o=void 0===r?null:r,i=e.isRotate,a=void 0===i?null:i,l=e.isZoom,s=void 0===l?null:l,c=e.panSpeed,h=void 0===c?null:c,d=e.rotateSpeed,g=void 0===d?null:d,m=e.zoomSpeed,w=void 0===m?null:m;u=null!==n?n:u,f=null!==o?o:f,v=null!==a?a:v,b=null!==s?s:b,p=+h>0?h:p,y=+g>0?g:y,x=+w>0?w:x},j.dispose=function(){S.dispose(),M.dispose(),E.dispose(),j=void 0,S=void 0,M=void 0,E=void 0},j.refresh=function(){A=e.height/window.devicePixelRatio,O=e.width/window.devicePixelRatio,k=O/A},j.tick=function(){if(u)return!1;C=N("Alt"),_=!1;var e=E,t=e[0],n=e[1],r=E.prev,o=r[0],i=r[1];if(f&&M.left&&!C&&(j.pan([p*(t-o)/O*2*k,p*(i-n)/A*2]),_=!0),b&&S[1]){var a=x*Math.exp(S[1]/A),l=(t/O*2-1)*k,s=1-n/A*2;j.scale(1/a,[l,s]),_=!0}if(v&&M.left&&C){var c=O/2,h=A/2,d=o-c,g=h-i,m=t-c,w=h-n,L=F([d,g],[m,w]),B=d*w-m*g;j.rotate(y*L*Math.sign(B)),_=!0}return S.flush(),E.flush(),_},j};function he(e,t,n,r,o,i){if(!(o-r<=n)){var a=r+o>>1;(function e(t,n,r,o,i,a){for(;i>o;){if(i-o>600){var l=i-o+1,s=r-o+1,u=Math.log(l),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(l-c)/l)*(s-l/2<0?-1:1);e(t,n,r,Math.max(o,Math.floor(r-s*c/l+f)),Math.min(i,Math.floor(r+(l-s)*c/l+f)),a)}var h=n[2*r+a],p=o,d=i;for(pe(t,n,o,r),n[2*i+a]>h&&pe(t,n,o,i);p<d;){for(pe(t,n,p,d),p++,d--;n[2*p+a]<h;)p++;for(;n[2*d+a]>h;)d--}n[2*o+a]===h?pe(t,n,o,d):pe(t,n,++d,i),d<=r&&(o=d+1),r<=d&&(i=d-1)}})(e,t,a,r,o,i%2),he(e,t,n,r,a-1,i+1),he(e,t,n,a+1,o,i+1)}}function pe(e,t,n,r){de(e,n,r),de(t,2*n,2*r),de(t,2*n+1,2*r+1)}function de(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ve(e,t,n,r){var o=e-n,i=t-r;return o*o+i*i}var ge=function(e){return e[0]},ye=function(e){return e[1]},me=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ge,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ye,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;Object(a.a)(this,e),this.nodeSize=o,this.points=t;for(var l=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new l(t.length),u=this.coords=new i(2*t.length),c=0;c<t.length;c++)s[c]=c,u[2*c]=n(t[c]),u[2*c+1]=r(t[c]);he(s,u,o,0,s.length-1,0)}return Object(l.a)(e,[{key:"range",value:function(e,t,n,r){return function(e,t,n,r,o,i,a){for(var l,s,u=[0,e.length-1,0],c=[];u.length;){var f=u.pop(),h=u.pop(),p=u.pop();if(h-p<=a)for(var d=p;d<=h;d++)l=t[2*d],s=t[2*d+1],l>=n&&l<=o&&s>=r&&s<=i&&c.push(e[d]);else{var v=Math.floor((p+h)/2);l=t[2*v],s=t[2*v+1],l>=n&&l<=o&&s>=r&&s<=i&&c.push(e[v]);var g=(f+1)%2;(0===f?n<=l:r<=s)&&(u.push(p),u.push(v-1),u.push(g)),(0===f?o>=l:i>=s)&&(u.push(v+1),u.push(h),u.push(g))}}return c}(this.ids,this.coords,e,t,n,r,this.nodeSize)}},{key:"within",value:function(e,t,n){return function(e,t,n,r,o,i){for(var a=[0,e.length-1,0],l=[],s=o*o;a.length;){var u=a.pop(),c=a.pop(),f=a.pop();if(c-f<=i)for(var h=f;h<=c;h++)ve(t[2*h],t[2*h+1],n,r)<=s&&l.push(e[h]);else{var p=Math.floor((f+c)/2),d=t[2*p],v=t[2*p+1];ve(d,v,n,r)<=s&&l.push(e[p]);var g=(u+1)%2;(0===u?n-o<=d:r-o<=v)&&(a.push(f),a.push(p-1),a.push(g)),(0===u?n+o>=d:r+o>=v)&&(a.push(p+1),a.push(c),a.push(g))}}return l}(this.ids,this.coords,e,t,n,this.nodeSize)}}]),e}();function be(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var we="object"==typeof e&&e&&e.Object===Object&&e,xe="object"==typeof self&&self&&self.Object===Object&&self,je=we||xe||Function("return this")(),_e=function(){return je.Date.now()},Ee=je.Symbol,Me=Object.prototype,Se=Me.hasOwnProperty,Ae=Me.toString,Oe=Ee?Ee.toStringTag:void 0;var ke=Object.prototype.toString;var Ce=Ee?Ee.toStringTag:void 0;function Le(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ce&&Ce in Object(e)?function(e){var t=Se.call(e,Oe),n=e[Oe];try{e[Oe]=void 0}catch(e){}var r=Ae.call(e);return t?e[Oe]=n:delete e[Oe],r}(e):function(e){return ke.call(e)}(e)}function Be(e){return null!=e&&"object"==typeof e}function Pe(e){return"symbol"==typeof e||Be(e)&&"[object Symbol]"==Le(e)}var ze=/^\s+|\s+$/g,Re=/^[-+]0x[0-9a-f]+$/i,Fe=/^0b[01]+$/i,Ie=/^0o[0-7]+$/i,Te=parseInt;function De(e){if("number"==typeof e)return e;if(Pe(e))return NaN;if(be(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=be(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ze,"");var n=Fe.test(e);return n||Ie.test(e)?Te(e.slice(2),n?2:8):Re.test(e)?NaN:+e}var Ne=Math.max,We=Math.min;function qe(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return be(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),function(e,t,n){var r,o,i,a,l,s,u=0,c=!1,f=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,i=o;return r=o=void 0,u=t,a=e.apply(i,n)}function d(e){var n=e-s;return void 0===s||n>=t||n<0||f&&e-u>=i}function v(){var e=_e();if(d(e))return g(e);l=setTimeout(v,function(e){var n=t-(e-s);return f?We(n,i-(e-u)):n}(e))}function g(e){return l=void 0,h&&r?p(e):(r=o=void 0,a)}function y(){var e=_e(),n=d(e);if(r=arguments,o=this,s=e,n){if(void 0===l)return function(e){return u=e,l=setTimeout(v,t),c?p(e):a}(s);if(f)return clearTimeout(l),l=setTimeout(v,t),p(s)}return void 0===l&&(l=setTimeout(v,t)),a}return t=De(t)||0,be(n)&&(c=!!n.leading,i=(f="maxWait"in n)?Ne(De(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=s=o=l=void 0},y.flush=function(){return void 0===l?a:g(_e())},y}(e,t,{leading:r,maxWait:t,trailing:o})}var Ve=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.requestAnimationFrame,r=!1;return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];if(!r)return n((function(){var n=e.apply(void 0,i);t&&t(n),r=!1}))}},Ge="\nprecision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}",Ue="\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\nuniform float aspectRatio;\n\nuniform float width;\nuniform int miter;\n\nattribute vec3 prevPosition;\nattribute vec3 currPosition;\nattribute vec3 nextPosition;\nattribute float offsetScale;\n\nvoid main() {\n  vec2 aspectVec = vec2(aspectRatio, 1.0);\n  mat4 projViewModel = projection * view * model;\n  vec4 prevProjected = projViewModel * vec4(prevPosition, 1.0);\n  vec4 currProjected = projViewModel * vec4(currPosition, 1.0);\n  vec4 nextProjected = projViewModel * vec4(nextPosition, 1.0);\n\n  // get 2D screen space with W divide and aspect correction\n  vec2 prevScreen = prevProjected.xy / prevProjected.w * aspectVec;\n  vec2 currScreen = currProjected.xy / currProjected.w * aspectVec;\n  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;\n\n  // starting point uses (next - current)\n  vec2 dir = vec2(0.0);\n  if (currScreen == prevScreen) {\n    dir = normalize(nextScreen - currScreen);\n  }\n  // ending point uses (current - previous)\n  else if (currScreen == nextScreen) {\n    dir = normalize(currScreen - prevScreen);\n  }\n  // somewhere in middle, needs a join\n  else {\n    // get directions from (C - B) and (B - A)\n    vec2 dirA = normalize((currScreen - prevScreen));\n    if (miter == 1) {\n      vec2 dirB = normalize((nextScreen - currScreen));\n      // now compute the miter join normal and length\n      vec2 tangent = normalize(dirA + dirB);\n      vec2 perp = vec2(-dirA.y, dirA.x);\n      vec2 miter = vec2(-tangent.y, tangent.x);\n      dir = tangent;\n    } else {\n      dir = dirA;\n    }\n  }\n\n  vec2 normal = vec2(-dir.y, dir.x) * width;\n  normal.x /= aspectRatio;\n  vec4 offset = vec4(normal * offsetScale, 0.0, 0.0);\n  gl_Position = currProjected + offset;\n}",$e=Array.prototype,Xe=$e.push,Ye=$e.unshift,He=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Je=Float32Array.BYTES_PER_ELEMENT,Ke=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0;r<e-1;r++){var o=t+2*r,i=o+1,a=o+2,l=o+3;n.push(o,i,a,a,i,l)}return n},Ze=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=[],o=new Array(2*t),i=0,a=e.length/t;i<a;i++){for(var l=i*t,s=0;s<t;s++){var u=e[l+s];o[s]=u,o[s+t]=u*n}Xe.apply(r,o)}return r},Qe=function(e,t,n){for(var r=new Array(n),o=t*n,i=0;i<n;i++)r[i]=e[o+i];return Xe.apply(e,r),e},et=function(e,t,n){for(var r=new Array(n),o=t*n,i=0;i<n;i++)r[i]=e[o+i];return Ye.apply(e,r),e},tt=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=[],i=new Array(n).fill(r),a=0,l=e.length/t;a<l;a++){for(var s=a*t,u=0;u<t;u++)i[u]=e[s+u];Xe.apply(o,i)}return o},nt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.projection,r=void 0===n?He:n,o=t.model,i=void 0===o?He:o,a=t.view,l=void 0===a?He:a,s=t.points,u=void 0===s?[]:s,c=t.widths,f=void 0===c?[]:c,h=t.color,p=void 0===h?[.8,.5,0,1]:h,d=t.width,v=void 0===d?1:d,g=t.miter,y=void 0===g?1:g,m=t.is2d,b=void 0!==m&&m,w=t.zPos2d,x=void 0===w?0:w;if(e){var j,_,E,M,S,A,O,k,C,L,B,P=b?2:3,z=function(){O=e.buffer(),k=e.buffer(),C={prevPosition:{buffer:function(){return O},offset:0,stride:3*Je},currPosition:{buffer:function(){return O},offset:3*Je*2,stride:3*Je},nextPosition:{buffer:function(){return O},offset:3*Je*4,stride:3*Je},offsetScale:function(){return k}},L=e.elements(),B=e({attributes:C,depth:{enable:!b},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},uniforms:{projection:e.prop("projection"),model:e.prop("model"),view:e.prop("view"),aspectRatio:function(e){return e.viewportWidth/e.viewportHeight},color:function(){return p},width:function(e){var t=e.viewportWidth;return v/t*window.devicePixelRatio},miter:y},elements:function(){return L},vert:Ue,frag:Ge})},R=function(){F(),z()},F=function(){u=null,E=null,M=null,S=null,A=null,O.destroy(),k.destroy(),L.destroy()},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;u=e,P=(b=n)?2:3,j=Math.floor(u.length/P),_=j+2,t.length===j&&(f=t),u&&u.length>1?(u.length%P>0&&console.warn("The length of points (".concat(j,") does not match the dimensions (").concat(P,"). Incomplete points are ignored.")),E=u.slice(0,j*P),b&&(E=tt(E,2,3,x)),f.length!==j&&(f=new Array(j).fill(1)),Qe(E,j-1,3),et(E,0,3),M=new Float32Array(Ze(E,3)),S=Ze(f,1,-1),A=Ke(j,0),O({usage:"dynamic",type:"float",length:3*_*2*Je,data:M}),k({usage:"dynamic",type:"float",length:1*j*2*Je,data:S}),L({primitive:"triangles",usage:"dynamic",type:"uint16",data:A})):R()};return z(),u&&u.length>1&&I(u),{clear:R,destroy:F,draw:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.projection,n=e.model,o=e.view;t&&(r=t),n&&(i=n),o&&(l=o),u&&u.length>1&&B({projection:r,model:i,view:l})},getPoints:function(){return u},setPoints:I,getData:function(){return{points:M,widths:S}},getBuffer:function(){return{points:O,widths:k}},getStyle:function(){return{color:p,miter:y,width:v}},setStyle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.miter,r=e.width;t&&(p=t),n&&(y=n),+r>0&&(v=r)}}}console.error("Regl instance is undefined.")},rt=te.addWheelListener,ot=te.removeWheelListener,it=function(e,t){var n=new V;return n.flush=r,n.dispose=function(){ot(e,o,!1)},r(),"undefined"==typeof window?n:(e=e||window,rt(e,o,!1),n);function r(){n[0]=n[1]=n[2]=0}function o(e){var r=1===e.deltaMode?12:1;n[0]+=r*(e.deltaX||0),n[1]+=r*(e.deltaY||0),n[2]+=r*(e.deltaZ||0),n.emit("scroll",n),t&&e.preventDefault&&(e.preventDefault(),e.stopPropagation&&e.stopPropagation())}};var at="\nprecision mediump float;\n\nuniform sampler2D texture;\n\nvarying vec2 uv;\n\nvoid main () {\n  gl_FragColor = texture2D(texture, uv);\n}\n",lt="\nprecision mediump float;\n\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\n\nattribute vec2 position;\n\nvarying vec2 uv;\n\nvoid main () {\n  uv = position;\n  gl_Position = projection * view * model * vec4(1.0 - 2.0 * position, 0, 1);\n}\n",st="\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n\nprecision mediump float;\n\nvarying vec4 color;\n\nvoid main() {\n  float r = 0.0, delta = 0.0, alpha = 1.0;\n  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n  r = dot(cxy, cxy);\n\n  #ifdef GL_OES_standard_derivatives\n    delta = fwidth(r);\n    alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n  #endif\n\n  gl_FragColor = vec4(color.rgb, alpha * color.a);\n}\n",ut='\nprecision mediump float;\n\nuniform sampler2D colorTex;\nuniform float colorTexRes;\nuniform sampler2D stateTex;\nuniform float stateTexRes;\nuniform float pointSize;\nuniform float pointSizeExtra;\nuniform float numPoints;\nuniform float globalState;\nuniform float isColoredByCategory;\nuniform float isColoredByValue;\nuniform float maxColor;\nuniform float numColorStates;\nuniform float scaling;\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\n\nattribute float stateIndex;\n\n// variables to send to the fragment shader\nvarying vec4 color;\n\nvoid main() {\n  // First get the state\n  float eps = 0.5 / stateTexRes;\n  float stateRowIndex = floor((stateIndex + eps) / stateTexRes);\n  vec2 stateTexIndex = vec2(\n    (stateIndex / stateTexRes) - stateRowIndex + eps,\n    stateRowIndex / stateTexRes\n  );\n\n  vec4 state = texture2D(stateTex, stateTexIndex);\n\n  gl_Position = projection * view * model * vec4(state.x, state.y, 0.0, 1.0);\n\n  // Determine color index\n  float colorIndexCat = state.z * isColoredByCategory;\n  float colorIndexVal = floor(state.w * maxColor) * isColoredByValue;\n  float colorIndex = colorIndexCat + colorIndexVal;\n  // Multiply by the number of color states per color\n  // I.e., normal, active, hover, background, etc.\n  colorIndex *= numColorStates;\n  // Half a "pixel" or "texel" in texture coordinates\n  eps = 0.5 / colorTexRes;\n  float colorLinearIndex = colorIndex + globalState;\n  // Need to add cEps here to avoid floating point issue that can lead to\n  // dramatic changes in which color is loaded as floor(3/2.9) = 1 but\n  // floor(3/3.0001) = 0!\n  float colorRowIndex = floor((colorLinearIndex + eps) / colorTexRes);\n\n  vec2 colorTexIndex = vec2(\n    (colorLinearIndex / colorTexRes) - colorRowIndex + eps,\n    colorRowIndex / colorTexRes\n  );\n\n  color = texture2D(colorTex, colorTexIndex);\n\n  // The final scaling consists of linear scaling in [0, 1] and log scaling\n  // in [1, [\n  float finalScaling = min(1.0, scaling) + log2(max(1.0, scaling));\n\n  gl_PointSize = pointSize * finalScaling + pointSizeExtra;\n}\n';function ct(e){if(!be(e))return!1;var t=Le(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var ft=je["__core-js_shared__"],ht=function(){var e=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var pt=Function.prototype.toString;function dt(e){if(null!=e){try{return pt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var vt=/^\[object .+?Constructor\]$/,gt=Function.prototype,yt=Object.prototype,mt=gt.toString,bt=yt.hasOwnProperty,wt=RegExp("^"+mt.call(bt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xt(e){return!(!be(e)||function(e){return!!ht&&ht in e}(e))&&(ct(e)?wt:vt).test(dt(e))}function jt(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return xt(n)?n:void 0}var _t=function(){try{var e=jt(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();function Et(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}var Mt=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),l=a.length;l--;){var s=a[e?l:++o];if(!1===n(i[s],s,i))break}return t}}();function St(e){return Be(e)&&"[object Arguments]"==Le(e)}var At=Object.prototype,Ot=At.hasOwnProperty,kt=At.propertyIsEnumerable,Ct=St(function(){return arguments}())?St:function(e){return Be(e)&&Ot.call(e,"callee")&&!kt.call(e,"callee")},Lt=Array.isArray;var Bt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Pt=Bt&&"object"==typeof r&&r&&!r.nodeType&&r,zt=Pt&&Pt.exports===Bt?je.Buffer:void 0,Rt=(zt?zt.isBuffer:void 0)||function(){return!1},Ft=/^(?:0|[1-9]\d*)$/;function It(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Ft.test(e))&&e>-1&&e%1==0&&e<t}function Tt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}var Dt={};Dt["[object Float32Array]"]=Dt["[object Float64Array]"]=Dt["[object Int8Array]"]=Dt["[object Int16Array]"]=Dt["[object Int32Array]"]=Dt["[object Uint8Array]"]=Dt["[object Uint8ClampedArray]"]=Dt["[object Uint16Array]"]=Dt["[object Uint32Array]"]=!0,Dt["[object Arguments]"]=Dt["[object Array]"]=Dt["[object ArrayBuffer]"]=Dt["[object Boolean]"]=Dt["[object DataView]"]=Dt["[object Date]"]=Dt["[object Error]"]=Dt["[object Function]"]=Dt["[object Map]"]=Dt["[object Number]"]=Dt["[object Object]"]=Dt["[object RegExp]"]=Dt["[object Set]"]=Dt["[object String]"]=Dt["[object WeakMap]"]=!1;var Nt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Wt=Nt&&"object"==typeof r&&r&&!r.nodeType&&r,qt=Wt&&Wt.exports===Nt&&we.process,Vt=function(){try{return Wt&&Wt.require&&Wt.require("util").types||qt&&qt.binding&&qt.binding("util")}catch(Q){}}(),Gt=Vt&&Vt.isTypedArray,Ut=Gt?function(e){return function(t){return e(t)}}(Gt):function(e){return Be(e)&&Tt(e.length)&&!!Dt[Le(e)]},$t=Object.prototype.hasOwnProperty;function Xt(e,t){var n=Lt(e),r=!n&&Ct(e),o=!n&&!r&&Rt(e),i=!n&&!r&&!o&&Ut(e),a=n||r||o||i,l=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],s=l.length;for(var u in e)!t&&!$t.call(e,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||It(u,s))||l.push(u);return l}var Yt=Object.prototype;var Ht=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),Jt=Object.prototype.hasOwnProperty;function Kt(e){if(!function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Yt)}(e))return Ht(e);var t=[];for(var n in Object(e))Jt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Zt(e){return null!=e&&Tt(e.length)&&!ct(e)}function Qt(e){return Zt(e)?Xt(e):Kt(e)}var en=function(e,t){return function(n,r){if(null==n)return n;if(!Zt(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}((function(e,t){return e&&Mt(e,t,Qt)}));function tn(e,t,n,r){return en(e,(function(e,o,i){t(r,e,n(e),i)})),r}function nn(e,t){return e===t||e!=e&&t!=t}function rn(e,t){for(var n=e.length;n--;)if(nn(e[n][0],t))return n;return-1}var on=Array.prototype.splice;function an(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}an.prototype.clear=function(){this.__data__=[],this.size=0},an.prototype.delete=function(e){var t=this.__data__,n=rn(t,e);return!(n<0)&&(n==t.length-1?t.pop():on.call(t,n,1),--this.size,!0)},an.prototype.get=function(e){var t=this.__data__,n=rn(t,e);return n<0?void 0:t[n][1]},an.prototype.has=function(e){return rn(this.__data__,e)>-1},an.prototype.set=function(e,t){var n=this.__data__,r=rn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var ln=jt(je,"Map"),sn=jt(Object,"create");var un=Object.prototype.hasOwnProperty;var cn=Object.prototype.hasOwnProperty;function fn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function hn(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function pn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}fn.prototype.clear=function(){this.__data__=sn?sn(null):{},this.size=0},fn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},fn.prototype.get=function(e){var t=this.__data__;if(sn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return un.call(t,e)?t[e]:void 0},fn.prototype.has=function(e){var t=this.__data__;return sn?void 0!==t[e]:cn.call(t,e)},fn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=sn&&void 0===t?"__lodash_hash_undefined__":t,this},pn.prototype.clear=function(){this.size=0,this.__data__={hash:new fn,map:new(ln||an),string:new fn}},pn.prototype.delete=function(e){var t=hn(this,e).delete(e);return this.size-=t?1:0,t},pn.prototype.get=function(e){return hn(this,e).get(e)},pn.prototype.has=function(e){return hn(this,e).has(e)},pn.prototype.set=function(e,t){var n=hn(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function dn(e){var t=this.__data__=new an(e);this.size=t.size}dn.prototype.clear=function(){this.__data__=new an,this.size=0},dn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},dn.prototype.get=function(e){return this.__data__.get(e)},dn.prototype.has=function(e){return this.__data__.has(e)},dn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof an){var r=n.__data__;if(!ln||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new pn(r)}return n.set(e,t),this.size=n.size,this};function vn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new pn;++t<n;)this.add(e[t])}function gn(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function yn(e,t){return e.has(t)}vn.prototype.add=vn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},vn.prototype.has=function(e){return this.__data__.has(e)};function mn(e,t,n,r,o,i){var a=1&n,l=e.length,s=t.length;if(l!=s&&!(a&&s>l))return!1;var u=i.get(e);if(u&&i.get(t))return u==t;var c=-1,f=!0,h=2&n?new vn:void 0;for(i.set(e,t),i.set(t,e);++c<l;){var p=e[c],d=t[c];if(r)var v=a?r(d,p,c,t,e,i):r(p,d,c,e,t,i);if(void 0!==v){if(v)continue;f=!1;break}if(h){if(!gn(t,(function(e,t){if(!yn(h,t)&&(p===e||o(p,e,n,r,i)))return h.push(t)}))){f=!1;break}}else if(p!==d&&!o(p,d,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f}var bn=je.Uint8Array;function wn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function xn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var jn=Ee?Ee.prototype:void 0,_n=jn?jn.valueOf:void 0;function En(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}var Mn=Object.prototype.propertyIsEnumerable,Sn=Object.getOwnPropertySymbols,An=Sn?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}(Sn(e),(function(t){return Mn.call(e,t)})))}:function(){return[]};function On(e){return function(e,t,n){var r=t(e);return Lt(e)?r:En(r,n(e))}(e,Qt,An)}var kn=Object.prototype.hasOwnProperty;var Cn=jt(je,"DataView"),Ln=jt(je,"Promise"),Bn=jt(je,"Set"),Pn=jt(je,"WeakMap"),zn=dt(Cn),Rn=dt(ln),Fn=dt(Ln),In=dt(Bn),Tn=dt(Pn),Dn=Le;(Cn&&"[object DataView]"!=Dn(new Cn(new ArrayBuffer(1)))||ln&&"[object Map]"!=Dn(new ln)||Ln&&"[object Promise]"!=Dn(Ln.resolve())||Bn&&"[object Set]"!=Dn(new Bn)||Pn&&"[object WeakMap]"!=Dn(new Pn))&&(Dn=function(e){var t=Le(e),n="[object Object]"==t?e.constructor:void 0,r=n?dt(n):"";if(r)switch(r){case zn:return"[object DataView]";case Rn:return"[object Map]";case Fn:return"[object Promise]";case In:return"[object Set]";case Tn:return"[object WeakMap]"}return t});var Nn=Dn,Wn=Object.prototype.hasOwnProperty;function qn(e,t,n,r,o,i){var a=Lt(e),l=Lt(t),s=a?"[object Array]":Nn(e),u=l?"[object Array]":Nn(t),c="[object Object]"==(s="[object Arguments]"==s?"[object Object]":s),f="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),h=s==u;if(h&&Rt(e)){if(!Rt(t))return!1;a=!0,c=!1}if(h&&!c)return i||(i=new dn),a||Ut(e)?mn(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new bn(e),new bn(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return nn(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=wn;case"[object Set]":var s=1&r;if(l||(l=xn),e.size!=t.size&&!s)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=mn(l(e),l(t),r,o,i,a);return a.delete(e),c;case"[object Symbol]":if(_n)return _n.call(e)==_n.call(t)}return!1}(e,t,s,n,r,o,i);if(!(1&n)){var p=c&&Wn.call(e,"__wrapped__"),d=f&&Wn.call(t,"__wrapped__");if(p||d){var v=p?e.value():e,g=d?t.value():t;return i||(i=new dn),o(v,g,n,r,i)}}return!!h&&(i||(i=new dn),function(e,t,n,r,o,i){var a=1&n,l=On(e),s=l.length;if(s!=On(t).length&&!a)return!1;for(var u=s;u--;){var c=l[u];if(!(a?c in t:kn.call(t,c)))return!1}var f=i.get(e);if(f&&i.get(t))return f==t;var h=!0;i.set(e,t),i.set(t,e);for(var p=a;++u<s;){var d=e[c=l[u]],v=t[c];if(r)var g=a?r(v,d,c,t,e,i):r(d,v,c,e,t,i);if(!(void 0===g?d===v||o(d,v,n,r,i):g)){h=!1;break}p||(p="constructor"==c)}if(h&&!p){var y=e.constructor,m=t.constructor;y!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m)&&(h=!1)}return i.delete(e),i.delete(t),h}(e,t,n,r,o,i))}function Vn(e,t,n,r,o){return e===t||(null==e||null==t||!Be(e)&&!Be(t)?e!=e&&t!=t:qn(e,t,n,r,Vn,o))}function Gn(e){return e==e&&!be(e)}function Un(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}function $n(e){var t=function(e){for(var t=Qt(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,Gn(o)]}return t}(e);return 1==t.length&&t[0][2]?Un(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var l=n[o];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<i;){var s=(l=n[o])[0],u=e[s],c=l[1];if(a&&l[2]){if(void 0===u&&!(s in e))return!1}else{var f=new dn;if(r)var h=r(u,c,s,e,t,f);if(!(void 0===h?Vn(c,u,3,r,f):h))return!1}}return!0}(n,e,t)}}var Xn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yn=/^\w*$/;function Hn(e,t){if(Lt(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Pe(e))||Yn.test(e)||!Xn.test(e)||null!=t&&e in Object(t)}function Jn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Jn.Cache||pn),n}Jn.Cache=pn;var Kn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zn=/\\(\\)?/g,Qn=function(e){var t=Jn(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Kn,(function(e,n,r,o){t.push(r?o.replace(Zn,"$1"):n||e)})),t}));var er=Ee?Ee.prototype:void 0,tr=er?er.toString:void 0;function nr(e){if("string"==typeof e)return e;if(Lt(e))return function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(e,nr)+"";if(Pe(e))return tr?tr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function rr(e,t){return Lt(e)?e:Hn(e,t)?[e]:Qn(function(e){return null==e?"":nr(e)}(e))}function or(e){if("string"==typeof e||Pe(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ir(e,t){for(var n=0,r=(t=rr(t,e)).length;null!=e&&n<r;)e=e[or(t[n++])];return n&&n==r?e:void 0}function ar(e,t){return null!=e&&t in Object(e)}function lr(e,t){return null!=e&&function(e,t,n){for(var r=-1,o=(t=rr(t,e)).length,i=!1;++r<o;){var a=or(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Tt(o)&&It(a,o)&&(Lt(e)||Ct(e))}(e,t,ar)}function sr(e,t){return Hn(e)&&Gn(t)?Un(or(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:ir(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?lr(n,e):Vn(t,r,3)}}function ur(e){return e}function cr(e){return Hn(e)?function(e){return function(t){return null==t?void 0:t[e]}}(or(e)):function(e){return function(t){return ir(t,e)}}(e)}var fr=Object.prototype.hasOwnProperty,hr=function(e,t){return function(n,r){var o=Lt(n)?Et:tn,i=t?t():{};return o(n,e,function(e){return"function"==typeof e?e:null==e?ur:"object"==typeof e?Lt(e)?sr(e[0],e[1]):$n(e):cr(e)}(r),i)}}((function(e,t,n){fr.call(e,n)?e[n].push(t):function(e,t,n){"__proto__"==t&&_t?_t(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}(e,n,[t])})),pr=Ee?Ee.isConcatSpreadable:void 0;function dr(e){return Lt(e)||Ct(e)||!!(pr&&e&&e[pr])}function vr(e){return null!=e&&e.length?function e(t,n,r,o,i){var a=-1,l=t.length;for(r||(r=dr),i||(i=[]);++a<l;){var s=t[a];n>0&&r(s)?n>1?e(s,n-1,r,o,i):En(i,s):o||(i[i.length]=s)}return i}(e,1):[]}function gr(e,t){return e.reduce((function(e,n){return e+n[t]}),0)/e.length}function yr(e){var t=e.length,n=g(function(e){var t=gr(e,0),n=gr(e,1),r=e.length,o=0,i=0;return e.forEach((function(e){o+=Math.pow(e[0]-t,2),i+=Math.pow(e[1]-n,2)})),[Math.sqrt(1/(r-1)*o),Math.sqrt(1/(r-1)*i)]}(e),2),r=n[0],o=n[1];return[Math.pow(t,-1/6)*r,Math.pow(t,-1/6)*o]}function mr(e,t,n){for(var r=t.xMin,o=t.xMax,i=t.yMin,a=t.yMax,l=Array(n).fill().map((function(){return Array(n).fill()})),s=(o-r)/(n-1),u=(a-i)/(n-1),c=[],f=[],h=0;h<n;++h)c.push(r+h*s),f.push(i+h*u);for(var p=yr(e),d=function(t){for(var r=function(n){l[t][n]=e.reduce((function(e,r){return e+function(e){var t=g(e,2),n=t[0],r=t[1];return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*(n*n+r*r))}(function(e,t){return[e[0]/t[0],e[1]/t[1]]}(function(e,t){var n=g(e,2),r=n[0],o=n[1],i=g(t,2);return[i[0]-r,i[1]-o]}([c[n],f[t]],r),p))}),0)/(e.length*p[0]*p[1])},o=0;o<n;++o)r(o)},v=0;v<n;++v)d(v);return l}function br(e,t,n){return e<t?(n-e)/(t-e):(e-n)/(e-t)}function wr(){this.successCallback=null,this.verbose=!1,this.polygons=!1,this.polygons_full=!1,this.linearRing=!0,this.noQuadTree=!1,this.noFrame=!1}function xr(e,t,n,r){var o=[];return e.polygons.forEach((function(e){e.forEach((function(e){e[0]+=t,e[1]+=n})),r.linearRing&&e.push(e[0]),o.push(e)})),o}function jr(e,t,n,r){return 0===n?(e+=1,t+=r[0][1]):1===n?e+=r[0][0]:2===n?t+=r[0][1]:3===n&&(e+=r[0][0],t+=1),[e,t]}function _r(e,t,n){return 0===n?e++:1===n||(2===n?t++:3===n&&(e++,t++)),[e,t]}function Er(e,t,n,r,o){var i=r,a=o,l=0,s=0;if(this.x=t,this.y=n,this.lowerBound=null,this.upperBound=null,this.childA=null,this.childB=null,this.childC=null,this.childD=null,1===r&&1===o)this.lowerBound=Math.min(e[n][t],e[n][t+1],e[n+1][t+1],e[n+1][t]),this.upperBound=Math.max(e[n][t],e[n][t+1],e[n+1][t+1],e[n+1][t]);else{if(r>1){for(;0!==i;)i>>=1,l++;r===1<<l-1&&l--,i=1<<l-1}if(o>1){for(;0!==a;)a>>=1,s++;o===1<<s-1&&s--,a=1<<s-1}this.childA=new Er(e,t,n,i,a),this.lowerBound=this.childA.lowerBound,this.upperBound=this.childA.upperBound,r-i>0&&(this.childB=new Er(e,t+i,n,r-i,a),this.lowerBound=Math.min(this.lowerBound,this.childB.lowerBound),this.upperBound=Math.max(this.upperBound,this.childB.upperBound),o-a>0&&(this.childC=new Er(e,t+i,n+a,r-i,o-a),this.lowerBound=Math.min(this.lowerBound,this.childC.lowerBound),this.upperBound=Math.max(this.upperBound,this.childC.upperBound))),o-a>0&&(this.childD=new Er(e,t,n+a,i,o-a),this.lowerBound=Math.min(this.lowerBound,this.childD.lowerBound),this.upperBound=Math.max(this.upperBound,this.childD.upperBound))}}function Mr(e){var t,n;if(!e)throw new Error("data is required");if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Error("data must be scalar field, i.e. array of arrays");if(e.length<2)throw new Error("data must contain at least two rows");if((n=e[0].length)<2)throw new Error("data must contain at least two columns");for(t=1;t<e.length;t++){if(!Array.isArray(e[t]))throw new Error("Row "+t+" is not an array");if(e[t].length!=n)throw new Error("unequal row lengths detected, please provide a regular grid")}this.data=e,this.root=new Er(e,0,0,e[0].length-1,e.length-1)}function Sr(e,t,n){var r,o,i,a=!1,l=!1,s=null,u=null,c=null,f=null,h=null,p=[];if(!e)throw new Error("data is required");if(null==t)throw new Error("threshold is required");if(n&&"object"!=typeof n)throw new Error("options must be an object");if(r=function(e){var t,n,r,o,i;for(o=new wr,e=e||{},i=Object.keys(o),t=0;t<i.length;t++)null!=(r=e[n=i[t]])&&(o[n]=r);return o.polygons_full=!o.polygons,o.interpolate=br,o}(n),e instanceof Mr)s=e,u=e.root,c=e.data,r.noQuadTree||(a=!0);else{if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Error("input is neither array of arrays nor object retrieved from 'QuadTree()'");c=e}if(Array.isArray(t)){for(l=!0,r.noQuadTree||(a=!0),o=0;o<t.length;o++)if(isNaN(+t[o]))throw new Error("threshold["+o+"] is not a number")}else{if(isNaN(+t))throw new Error("threshold must be a number or array of numbers");t=[t]}return a&&!u&&(s=new Mr(c),u=s.root,c=s.data),r.verbose&&(r.polygons?console.log("MarchingSquaresJS-isoLines: returning single lines (polygons) for each grid cell"):console.log("MarchingSquaresJS-isoLines: returning line paths (polygons) for entire data grid"),l&&console.log("MarchingSquaresJS-isoLines: multiple lines requested, returning array of line paths instead of lines for a single threshold")),t.forEach((function(e,t){if(h=[],r.threshold=e,r.verbose&&console.log("MarchingSquaresJS-isoLines: computing iso lines for threshold "+e),r.polygons)if(a)u.cellsBelowThreshold(r.threshold,!0).forEach((function(e){h=h.concat(xr(Ar(c,e.x,e.y,r),e.x,e.y,r))}));else for(i=0;i<c.length-1;++i)for(t=0;t<c[0].length-1;++t)h=h.concat(xr(Ar(c,t,i,r),t,i,r));else{for(f=[],t=0;t<c[0].length-1;++t)f[t]=[];if(a)u.cellsBelowThreshold(r.threshold,!1).forEach((function(e){f[e.x][e.y]=Ar(c,e.x,e.y,r)}));else for(t=0;t<c[0].length-1;++t)for(i=0;i<c.length-1;++i)f[t][i]=Ar(c,t,i,r);h=function(e,t,n){var r,o,i,a,l,s,u,c,f,h,p,d,v,g,y,m=[],b=e.length-1,w=e[0].length-1,x=["right","bottom","left","top"],j=[0,-1,0,1],_=[-1,0,1,0],E={bottom:1,left:2,top:3,right:0};return n.noFrame||function(e,t){var n,r,o,i,a;for(n=!0,r=e[0].length,o=e.length,a=0;a<o;a++)if(e[a][0]>=t||e[a][r-1]>=t){n=!1;break}if(n&&(e[o-1][0]>=t||e[o-1][r-1]>=t)&&(n=!1),n)for(i=0;i<r-1;i++)if(e[0][i]>=t||e[o-1][i]>t){n=!1;break}return n}(e,n.threshold)&&(n.linearRing?m.push([[0,0],[0,b],[w,b],[w,0],[0,0]]):m.push([[0,0],[0,b],[w,b],[w,0]])),t.forEach((function(e,M){e.forEach((function(e,S){for(r=null,o=0;o<4;o++)if(r=x[o],"object"==typeof e.edges[r]){for(l=[],i=e.edges[r],s=r,u=M,c=S,f=!1,h=[M+i.path[0][0],S+i.path[0][1]],l.push(h);!f&&"object"==typeof(a=t[u][c]).edges[s];)if(i=a.edges[s],delete a.edges[s],(p=i.path[1])[0]+=u,p[1]+=c,l.push(p),s=i.move.enter,u+=i.move.x,c+=i.move.y,void 0===t[u]||void 0===t[u][c]){if(!n.linearRing)break;if(d=0,v=0,u===w?(u--,d=0):u<0?(u++,d=2):c===b?(c--,d=3):c<0&&(c++,d=1),u===M&&c===S&&d===E[r]){f=!0,s=r;break}for(;;){if(g=!1,v>4)throw new Error("Direction change counter overflow! This should never happen!");if(void 0!==t[u]&&void 0!==t[u][c]&&(a=t[u][c],y=x[d],"object"==typeof a.edges[y])){i=a.edges[y],l.push(jr(u,c,d,i.path)),s=y,g=!0;break}if(g)break;if(l.push(_r(u,c,d)),c+=_[d],void 0!==t[u+=j[d]]&&void 0!==t[u][c]||(0===d&&c<0||1===d&&u<0||2===d&&c===b||3===d&&u===w)&&(u-=j[d],c-=_[d],d=(d+1)%4,v++),u===M&&c===S&&d===E[r]){f=!0,s=r;break}}}!n.linearRing||l[l.length-1][0]===h[0]&&l[l.length-1][1]===h[1]||l.push(h),m.push(l)}}))})),m}(c,f,r)}l?p.push(h):p=h,"function"==typeof r.successCallback&&r.successCallback(p,e)})),p}function Ar(e,t,n,r){var o,i,a,l,s,u,c=0,f=e[n+1][t],h=e[n+1][t+1],p=e[n][t+1],d=e[n][t],v=r.threshold;if(!(isNaN(d)||isNaN(p)||isNaN(h)||isNaN(f))){switch(c|=f>=v?8:0,c|=h>=v?4:0,c|=p>=v?2:0,u={cval:c=+(c|=d>=v?1:0),polygons:[],edges:{},x0:d,x1:p,x2:h,x3:f},c){case 0:r.polygons&&u.polygons.push([[0,0],[0,1],[1,1],[1,0]]);break;case 15:break;case 14:o=r.interpolate(d,f,v),l=r.interpolate(d,p,v),r.polygons_full&&(u.edges.left={path:[[0,o],[l,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&u.polygons.push([[0,0],[0,o],[l,0]]);break;case 13:l=r.interpolate(d,p,v),i=r.interpolate(p,h,v),r.polygons_full&&(u.edges.bottom={path:[[l,0],[1,i]],move:{x:1,y:0,enter:"left"}}),r.polygons&&u.polygons.push([[l,0],[1,i],[1,0]]);break;case 11:i=r.interpolate(p,h,v),a=r.interpolate(f,h,v),r.polygons_full&&(u.edges.right={path:[[1,i],[a,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&u.polygons.push([[1,i],[a,1],[1,1]]);break;case 7:o=r.interpolate(d,f,v),a=r.interpolate(f,h,v),r.polygons_full&&(u.edges.top={path:[[a,1],[0,o]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&u.polygons.push([[a,1],[0,o],[0,1]]);break;case 1:o=r.interpolate(d,f,v),l=r.interpolate(d,p,v),r.polygons_full&&(u.edges.bottom={path:[[l,0],[0,o]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&u.polygons.push([[l,0],[0,o],[0,1],[1,1],[1,0]]);break;case 2:l=r.interpolate(d,p,v),i=r.interpolate(p,h,v),r.polygons_full&&(u.edges.right={path:[[1,i],[l,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&u.polygons.push([[0,0],[0,1],[1,1],[1,i],[l,0]]);break;case 4:i=r.interpolate(p,h,v),a=r.interpolate(f,h,v),r.polygons_full&&(u.edges.top={path:[[a,1],[1,i]],move:{x:1,y:0,enter:"left"}}),r.polygons&&u.polygons.push([[0,0],[0,1],[a,1],[1,i],[1,0]]);break;case 8:o=r.interpolate(d,f,v),a=r.interpolate(f,h,v),r.polygons_full&&(u.edges.left={path:[[0,o],[a,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&u.polygons.push([[0,0],[0,o],[a,1],[1,1],[1,0]]);break;case 12:o=r.interpolate(d,f,v),i=r.interpolate(p,h,v),r.polygons_full&&(u.edges.left={path:[[0,o],[1,i]],move:{x:1,y:0,enter:"left"}}),r.polygons&&u.polygons.push([[0,0],[0,o],[1,i],[1,0]]);break;case 9:l=r.interpolate(d,p,v),a=r.interpolate(f,h,v),r.polygons_full&&(u.edges.bottom={path:[[l,0],[a,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&u.polygons.push([[l,0],[a,1],[1,1],[1,0]]);break;case 3:o=r.interpolate(d,f,v),i=r.interpolate(p,h,v),r.polygons_full&&(u.edges.right={path:[[1,i],[0,o]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&u.polygons.push([[0,o],[0,1],[1,1],[1,i]]);break;case 6:l=r.interpolate(d,p,v),a=r.interpolate(f,h,v),r.polygons_full&&(u.edges.top={path:[[a,1],[l,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&u.polygons.push([[0,0],[0,1],[a,1],[l,0]]);break;case 10:o=r.interpolate(d,f,v),i=r.interpolate(p,h,v),l=r.interpolate(d,p,v),a=r.interpolate(f,h,v),s=(d+p+h+f)/4,r.polygons_full&&(s<v?(u.edges.left={path:[[0,o],[a,1]],move:{x:0,y:1,enter:"bottom"}},u.edges.right={path:[[1,i],[l,0]],move:{x:0,y:-1,enter:"top"}}):(u.edges.right={path:[[1,i],[a,1]],move:{x:0,y:1,enter:"bottom"}},u.edges.left={path:[[0,o],[l,0]],move:{x:0,y:-1,enter:"top"}})),r.polygons&&(s<v?u.polygons.push([[0,0],[0,o],[a,1],[1,1],[1,i],[l,0]]):(u.polygons.push([[0,0],[0,o],[l,0]]),u.polygons.push([[a,1],[1,1],[1,i]])));break;case 5:o=r.interpolate(d,f,v),i=r.interpolate(p,h,v),l=r.interpolate(d,p,v),a=r.interpolate(f,h,v),s=(d+p+h+f)/4,r.polygons_full&&(s<v?(u.edges.bottom={path:[[l,0],[0,o]],move:{x:-1,y:0,enter:"right"}},u.edges.top={path:[[a,1],[1,i]],move:{x:1,y:0,enter:"left"}}):(u.edges.top={path:[[a,1],[0,o]],move:{x:-1,y:0,enter:"right"}},u.edges.bottom={path:[[l,0],[1,i]],move:{x:1,y:0,enter:"left"}})),r.polygons&&(s<v?u.polygons.push([[0,o],[0,1],[a,1],[1,i],[1,0],[l,0]]):(u.polygons.push([[0,o],[0,1],[a,1]]),u.polygons.push([[l,0],[1,i],[1,0]])))}return u}}function Or(e,t,n,r,o){var i=g(function(e,t,n){var r=g(e,2),o=r[0],i=r[1],a=t.xMin,l=t.xMax,s=t.yMin,u=(o-a)/(l-a)*(n-1),c=(i-s)/(t.yMax-s)*(n-1);return[Math.floor(u),Math.ceil(u),Math.floor(c),Math.ceil(c)]}(t,o,e.length),4),a=i[0],l=i[1],s=i[2],u=i[3];return function(e,t,n,r,o,i,a,l,s,u){return(o*(t-s)*(r-u)+i*(s-e)*(r-u)+a*(t-s)*(u-n)+l*(s-e)*(u-n))/((t-e)*(r-n))}(n[a],n[l],r[s],r[u],e[s][a],e[s][l],e[u][a],e[u][l],t[0],t[1])}function kr(e,t){for(var n=0,r=e.length-1;n!==r;){var o=Math.ceil((n+r)/2);e[o]>t?r=o-1:n=o}return e.length-n+(e[n]<t?-1:0)}function Cr(e,t,n,r){for(var o=t.xMin,i=t.xMax,a=t.yMin,l=t.yMax,s=function(e,t,n){for(var r=t.xMin,o=t.xMax,i=t.yMin,a=t.yMax,l=e.length,s=(o-r)/(l-1),u=(a-i)/(l-1),c=[],f=[],h=0;h<l;++h)c.push(r+h*s),f.push(i+h*u);return n.map((function(n){return Or(e,n,c,f,t)}))}(e,t,n).sort((function(e,t){return e-t})),u=s[Math.floor(.01*s.length)],c=(s[Math.floor(.9*s.length)]-u)/20,f=new Array(20).fill().map((function(e,t){return u+t*c})),h=new Mr(e),p=null,d=null,v=kr(s,f[0]),g=Sr(h,f[0],{noFrame:!0}),y=1;y<20;++y){var m=kr(s,f[y]),b=1-m/v;if(1===g.length&&(p=g[0]),d=g[0],b>=r.contourDropoff)break;v=m,g=Sr(h,f[y],{noFrame:!0})}null===p&&(p=d,console.error("Can't find contour. Using best available one, (may look bad)."));for(var w=(i-o)/(e.length-1),x=(l-a)/(e.length-1),j=0;j<p.length;++j)p[j][0]=o+p[j][0]*w,p[j][1]=a+p[j][1]*x;return p}Er.prototype.cellsInBand=function(e,t,n){var r=[];return n=void 0===n||n,this.lowerBound>t||this.upperBound<e?r:(this.childA||this.childB||this.childC||this.childD?(this.childA&&(r=r.concat(this.childA.cellsInBand(e,t,n))),this.childB&&(r=r.concat(this.childB.cellsInBand(e,t,n))),this.childD&&(r=r.concat(this.childD.cellsInBand(e,t,n))),this.childC&&(r=r.concat(this.childC.cellsInBand(e,t,n)))):(n||this.lowerBound<=e||this.upperBound>=t)&&r.push({x:this.x,y:this.y}),r)},Er.prototype.cellsBelowThreshold=function(e,t){var n=[];return t=void 0===t||t,this.lowerBound>e?n:(this.childA||this.childB||this.childC||this.childD?(this.childA&&(n=n.concat(this.childA.cellsBelowThreshold(e,t))),this.childB&&(n=n.concat(this.childB.cellsBelowThreshold(e,t))),this.childD&&(n=n.concat(this.childD.cellsBelowThreshold(e,t))),this.childC&&(n=n.concat(this.childC.cellsBelowThreshold(e,t)))):(t||this.upperBound>=e)&&n.push({x:this.x,y:this.y}),n)};var Lr=Br;function Br(e){var t=this;if(t instanceof Br||(t=new Br),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function Pr(e,t,n){var r=t===e.head?new Fr(n,null,t,e):new Fr(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function zr(e,t){e.tail=new Fr(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Rr(e,t){e.head=new Fr(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Fr(e,t,n,r){if(!(this instanceof Fr))return new Fr(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}Br.Node=Fr,Br.create=Br,Br.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},Br.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},Br.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},Br.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)zr(this,arguments[e]);return this.length},Br.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Rr(this,arguments[e]);return this.length},Br.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},Br.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},Br.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},Br.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},Br.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},Br.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},Br.prototype.map=function(e,t){t=t||this;for(var n=new Br,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},Br.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Br,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},Br.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var o=0;null!==r;o++)n=e(n,r.value,o),r=r.next;return n},Br.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var o=this.length-1;null!==r;o--)n=e(n,r.value,o),r=r.prev;return n},Br.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},Br.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},Br.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new Br;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,o=this.head;null!==o&&r<e;r++)o=o.next;for(;null!==o&&r<t;r++,o=o.next)n.push(o.value);return n},Br.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new Br;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,o=this.tail;null!==o&&r>t;r--)o=o.prev;for(;null!==o&&r>e;r--,o=o.prev)n.push(o.value);return n},Br.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,r=this.head;null!==r&&n<e;n++)r=r.next;var o=[];for(n=0;r&&n<t;n++)o.push(r.value),r=this.removeNode(r);for(null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev),n=0;n<(arguments.length<=2?0:arguments.length-2);n++)r=Pr(this,r,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return o},Br.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{!function(e){e.prototype[Symbol.iterator]=i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))}(Br)}catch(Q){}function Ir(e,t,n,r){var o=e-n,i=t-r;return o*o+i*i}function Tr(e,t){return(e%t+t)%t}function Dr(e,t){var n=g(e,2),r=n[0],o=n[1],i=g(t,2),a=r-i[0],l=o-i[1];return Math.sqrt(a*a+l*l)}function Nr(e,t,n,r,o,i){var a=new Lr,l=[n[0]-e[t][0],n[1]-e[t][1]],s=e[t];a.push(s[0]+l[0]),a.push(s[1]+l[1]),function(e,t,n,r,o){for(var i,a,l,s=n/2,u=e[t],c=t;s>.001;){if(s-(l=Dr(i=e[a=Tr(c-1,e.length)],u))>=0)s-=l,u=i,c=a;else{var f=(i[0]-u[0])/l,h=(i[1]-u[1])/l;i[0]=u[0]+f*s,i[1]=u[1]+h*s,s=0}o.unshift(i[1]+r[1]),o.unshift(i[0]+r[0])}}(e,t,r,l,a),function(e,t,n,r,o){for(var i,a,l,s=n/2,u=e[t],c=t;s>.001;){if(s-(l=Dr(i=e[a=(c+1)%e.length],u))>=0)s-=l,u=i,c=a;else{var f=(i[0]-u[0])/l,h=(i[1]-u[1])/l;i[0]=u[0]+f*s,i[1]=u[1]+h*s,s=0}o.push(i[0]+r[0]),o.push(i[1]+r[1])}}(e,t,r,l,a);var u=a.shift(),c=a.shift();a.unshift(c,u,c,u);var f=a.pop(),h=a.pop();a.push(h,f,h,f);var p=o.length;o.push.apply(o,y(a));var d=o.length-2;i.push(p,d)}function Wr(e,t,n,r){return t+Math.pow(e[3],r)*n}function qr(e,t,n,r){for(var o=new Array(t.length*t[0].length),i=t[0].length,a=0;a<t.length;++a)for(var l=0;l<t[a].length;++l)o[a*i+l]={position:t[a][l],contour:t[a],index:l};for(var s=new me(o,(function(e){return e.position[0]}),(function(e){return e.position[1]}),64),u=n.map((function(e){return function(e,t){for(var n=g(t,2),r=n[0],o=n[1],i=[0,e.ids.length-1,0],a=Number.MAX_VALUE,l=Number.MAX_VALUE,s=null;i.length;){var u=i.pop(),c=i.pop(),f=i.pop();if(c-f<=e.nodeSize)for(var h=f;h<=c;h++){var p=Ir(e.coords[2*h],e.coords[2*h+1],r,o);p<=a&&(s=e.ids[h],a=p,l=Math.sqrt(a))}else{var d=f+c>>1,v=e.coords[2*d],y=e.coords[2*d+1],m=Ir(v,y,r,o);m<=a&&(s=e.ids[d],a=m,l=Math.sqrt(a)),(0===u?r-l<=v:o-l<=y)&&(i.push(f),i.push(d-1),i.push(1-u)),(0===u?r+l>=v:o+l>=y)&&(i.push(d+1),i.push(c),i.push(1-u))}}return e.points[s]}(s,e)})),c=[],f=[],h=0;h<n.length;++h)Nr(u[h].contour,u[h].index,n[h],Wr(n[h],r.a,r.b,r.n),c,f);var p=function(e,t){for(var n,r=[],o=0;o<e.length;o+=2){r.push(0),n=(e[o+1]-e[o]-2)/2;for(var i=0;i<n;++i)r.push(t);r.push(0)}return r}(f,r.lineWidth);return nt(e,{widths:p,is2d:!0,points:c})}function Vr(e,t){var n=g(e,2),r=n[0],o=n[1],i=g(t,2),a=r-i[0],l=o-i[1];return Math.sqrt(a*a+l*l)}var Gr=[.1,.19,.31,.47,.65,.86,1.1,1.37,1.67,2],Ur=[[255,255,255,1],[240,240,240,1],[217,217,217,1],[189,189,189,1],[150,150,150,1],[115,115,115,1],[82,82,82,1],[37,37,37,1],[0,0,0,1]];function $r(e){var t=[0,0];return e.forEach((function(e){t[0]+=e[0],t[1]+=e[1]})),t[0]/=e.length,t[1]/=e.length,t}function Xr(e,t,n){for(var r=g(t,2),o=r[0],i=r[1],a=new Array(e.length),l=0;l<e.length;++l)a[l]=[n*(e[l][0]-o)+o,n*(e[l][1]-i)+i];return a}function Yr(e,t){var n=g(e,4),r=n[0],o=n[1],i=n[2],a=n[3];if(t>1)throw new Error("k must be < 1");return[r*t,o*t,i*t,a]}var Hr={showWinglets:!0,showContours:!1,lineWidth:1,a:.01,b:.08,n:1,contourDropoff:.05},Jr={showWinglets:"draw",showContours:"draw",lineWidth:"process",a:"process",b:"process",n:"process",contourDropoff:"process"},Kr=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.regl=t,this.categories=[],this.pointsByCategory={},this.kdeGridsByCategory={},this.contourLines={},this.wingletLines={},this.colors=Ur,this.appliedColors=null,this.bbox=null,this.mvp=null,this.options=v({},Hr,n)}return function(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}(e,[{key:"draw",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=t;t||this.mvp?(t?this.mvp=t:n=this.mvp,this.categories.forEach((function(t){if(e.options.showContours)for(var r=0;r<e.contourLines[t].length;++r)e.contourLines[t][r].draw(n);e.options.showWinglets&&e.wingletLines[t].draw(n)}))):console.error("winglets.draw() missing mvp")}},{key:"processPoints",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.contourLines={},this.wingletLines={},this.categories.forEach((function(n){var r=e.pointsByCategory[n];!t&&e.kdeGridsByCategory[n]||(e.kdeGridsByCategory[n]=mr(r,e.bbox,100));var o=Cr(e.kdeGridsByCategory[n],e.bbox,r,e.options),i=$r(r),a=[];e.contourLines[n]=new Array(Gr.length).fill().map((function(){return nt(e.regl,{width:1,is2d:!0})})),Gr.forEach((function(t,r){var l=Xr(o,i,t);a.push(l),e.contourLines[n][r].setPoints(vr(l))})),e.wingletLines[n]=qr(e.regl,a,r,e.options)})),this.applyColors(!0)}},{key:"setPoints",value:function(e){(function(e){var t=function(e){for(var t={},n=0;n<e.length;++n)t[e[n][2]]=(t[e[n][2]]||0)+1;return t}(e),n=Object.keys(t);if(n.length<2)e.forEach((function(e){return e[3]=1}));else{var r,o,i,a,l={};n.forEach((function(t){l[t]=new Array(e.length).fill(0)}));for(var s=0;s<e.length;++s)for(var u=s+1;u<e.length;++u)r=Vr(e[s],e[u]),l[e[u][2]][s]+=r,l[e[s][2]][u]+=r;for(var c=0;c<e.length;++c){o=l[e[c][2]][c]/(t[e[c][2]]-1);for(var f=[],h=0;h<n.length;++h)n[h]!==String(e[c][2])&&f.push(l[n[h]][c]/t[n[h]]);i=Math.min.apply(Math,f),a=(1+(a=t[e[c][2]]>1?(i-o)/Math.max(o,i):0))/2,e[c][3]=a}}})(e),this.bbox=function(e,t){for(var n=Number.MAX_VALUE,r=Number.MIN_VALUE,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=0;a<e.length;++a)e[a][0]<n&&(n=e[a][0]),e[a][0]>r&&(r=e[a][0]),e[a][1]<o&&(o=e[a][1]),e[a][1]>i&&(i=e[a][1]);return{xMin:n-t,xMax:r+t,yMin:o-t,yMax:i+t}}(e,.1),this.pointsByCategory=hr(e,2),this.categories=Object.keys(this.pointsByCategory),this.kdeGridsByCategory={},this.processPoints(!0)}},{key:"setColors",value:function(e){this.colors=e,this.applyColors()}},{key:"applyColors",value:function(){var e=this;(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.appliedColors!==this.colors&&0!==this.categories.length)&&(this.categories.forEach((function(t){for(var n=0;n<e.contourLines[t].length;++n)e.contourLines[t][n].setStyle({color:Yr(e.colors[4*t],.5)||Yr(Ur[t],.5)||[255,255,255,1]});e.wingletLines[t].setStyle({color:e.colors[4*t]||Ur[t]||[255,255,255,1]})})),this.appliedColors=this.colors)}},{key:"setOptions",value:function(e){this.options=v({},this.options,e);var t={draw:!1,process:!1};Object.keys(e).forEach((function(e){t[Jr[e]]=!0})),t.process&&this.processPoints(!1),this.draw()}},{key:"destroy",value:function(){var e=this;this.categories.forEach((function(t){for(var n=0;n<e.contourLines[t].length;++n)e.contourLines[t][n].destroy();e.wingletLines[t].destroy()}))}}]),e}(),Zr=Float32Array.BYTES_PER_ELEMENT,Qr=["OES_standard_derivatives","OES_texture_float"],eo=[0,0,0,1],to=[[.66,.66,.66,1],[0,.55,1,1],[1,1,1,1],eo],no=[0,0],ro=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),oo=[0,.666666667,1,1],io=[1,1,1,.5],ao=function(e,t){return e>t?e:t},lo=function(e){return!!e&&Qr.reduce((function(t,n){return e.hasExtension(n)?t:(console.warn("WebGL: ".concat(n," extension not supported. Scatterplot might not render properly")),!1)}),!0)},so=function(e){var t=e.getContext("webgl"),n=[];return Qr.forEach((function(e){t.getExtension(e)?n.push(e):console.warn("WebGL: ".concat(e," extension not supported. Scatterplot might not render properly"))})),h()({gl:t,extensions:n})},uo=function(e,t,n,r){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))},co=function(e){for(var t=1/0,n=-1/0,r=1/0,o=-1/0,i=0;i<e.length;i+=2)t=e[i]<t?e[i]:t,n=e[i]>n?e[i]:n,r=e[i+1]<r?e[i+1]:r,o=e[i+1]>o?e[i+1]:o;return[t,r,n,o]},fo=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return"#".concat(t).concat(t).concat(n).concat(n).concat(r).concat(r)})).substring(1).match(/.{2}/g).map((function(e){return parseInt(e,16)/Math.pow(255,t)}))},ho=function(e){return e>=0&&e<=1},po=function(e){return Array.isArray(e)&&e.every(ho)},vo=function(){for(var e,t,n,r,o=g(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],2),i=o[0],a=o[1],l=arguments.length>1?arguments[1]:void 0,s=!1,u=0,c=l.length-2;u<l.length;u+=2)e=l[u],t=l[u+1],n=l[c],t>a!=(r=l[c+1])>a&&i<(n-e)*(a-t)/(r-t)+e&&(s=!s),c=u;return s},go=function(e){return Number.isInteger(e)&&e>=0&&e<=255},yo=function(e){return Array.isArray(e)&&e.every(go)},mo=function(e){return 3===e.length&&(po(e)||yo(e))},bo=function(e){return 4===e.length&&(po(e)||yo(e))},wo=function(e,t){return e>t?e:t},xo=function(e,t){return e<t?e:t},jo=function(e){return e.map((function(t){return t/e.reduce(ao,-1/0)}))},_o=function(e,t){return bo(e)?t&&!po(e)?jo(e):e:mo(e)?y(t?jo(e):e).concat([Math.pow(255,!t)]):function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)}(e)?function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y(fo(e,t)).concat([Math.pow(255,!t)])}(e,t):(console.warn("Only HEX, RGB, and RGBA are handled by this function. Returning white instead."),t?[1,1,1,1]:[255,255,255,255])};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.regl,n=e.background,r=void 0===n?eo:n,o=e.backgroundImage,i=void 0===o?null:o,a=e.canvas,l=void 0===a?document.createElement("canvas"):a,s=e.colorBy,u=void 0===s?null:s,f=e.colors,h=void 0===f?to:f,p=e.lassoColor,d=void 0===p?oo:p,v=e.lassoMinDelay,m=void 0===v?15:v,b=e.lassoMinDist,_=void 0===b?4:b,M=e.showRecticle,S=void 0!==M&&M,A=e.recticleColor,O=void 0===A?io:A,k=e.pointSize,C=void 0===k?6:k,L=e.pointSizeSelected,P=void 0===L?2:L,z=e.pointOutlineWidth,R=void 0===z?2:z,F=e.width,I=void 0===F?100:F,T=e.height,D=void 0===T?100:T,N=e.target,W=void 0===N?no:N,q=e.distance,V=void 0===q?1:q,G=e.rotation,U=void 0===G?0:G,$=e.view,X=void 0===$?ro:$,Y=e.wingletsOptions,H=void 0===Y?void 0:Y,J=Object(c.a)(),K=new Float32Array(16),Z=[0,0];lo(t);var Q,ee,te,ne,re,oe,ie,ae,le,se,ue,ce,he,pe,de,ve,ge=_o(r,!0),ye=i,be=l,we=h,xe=I,je=D,_e=C,Ee=P,Me=R,Se=t||so(l),Ae=!1,Oe=!1,ke=[0,0],Ce=0,Le=[],Be=_o(d,!0),Pe=+m,ze=+_,Re=[],Fe=[],Ie=1,Te=S,De=_o(O,!0),Ne=0,We=0,Ge=u,Ue=!1,$e=!1,Xe=1,Ye=!1,He=null,Je=function(){return[(t=Z[0],t/xe*2-1),(e=Z[1],1+e/je*-2)];var e,t},Ke=function(){var e=g(Je(),2),t=[e[0],e[1],1,1];return B(t,t,x(K,j(K,oe,j(K,Q.view,ie)))),t.slice(0,2)},Ze=function(){var e,t=g(Ke(),2),n=t[0],r=t[1],o=Q.scaling,i=2*_e*(xo(1,o)+Math.log2(wo(1,o)))*window.devicePixelRatio,a=i/xe,l=i/je,s=re.range(n-a,r-l,n+a,r+l),u=i;return s.forEach((function(t){var o=g(re.points[t],2),i=o[0],a=o[1],l=uo(i,a,n,r);l<u&&(u=l,e=t)})),u<_e/xe*2?e:-1},Qe=function(){var e,t,n,r,o=Z.slice();ne?uo.apply(void 0,y(o).concat(y(ne)))>ze&&((e=Re).push.apply(e,y(Je())),(t=Fe).push.apply(t,y(Ke())),ne=o,Re.length>2&&ee.setPoints(Re)):((n=Re).push.apply(n,y(Je())),(r=Fe).push.apply(r,y(Ke())),ne=o)},et=qe(Qe,Pe,!0),tt=function(){Le.length&&(J.publish("deselect"),Le=[],Dt())},rt=function(e){Le=e,ce({usage:"dynamic",type:"float",data:new Float32Array(Le)}),J.publish("select",{points:Le}),Dt()},ot=function(e){var t=be.getBoundingClientRect();return Z[0]=e.clientX-t.left,Z[1]=e.clientY-t.top,Z.concat()},ct=function(){var e,t,n,r,o,i=(n=co(e=Fe),r=(t=re).range.apply(t,y(n)),o=[],r.forEach((function(t){vo(re.points[t],e)&&o.push(t)})),o);rt(i),Re=[],Fe=[],ne=void 0,ee.clear()},ft=function(e){$e&&(Ae=!0,ke=ot(e),(Oe=e.shiftKey)&&Q.config({isFixed:!0}))},ht=function(){$e&&(Ae=!1,Oe&&(Oe=!1,Q.config({isFixed:!1}),ct()))},pt=function(e){if($e){var t=ot(e);if(!(uo.apply(void 0,y(t).concat(y(ke)))>=4)){var n=Ze();n>=0&&rt([n])}}},dt=function(){tt()},vt=function(e){if($e){if(ot(e),Ye&&!Oe){var t=Ze();qt(t)}Oe&&et(),Ae&&Dt()}},gt=function(){$e&&(de=void 0,Ye=!1,ht(),Dt())},yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=e.length;We=Math.max(2,Math.ceil(Math.sqrt(t)));var n=new Float32Array(4*Math.pow(We,2));return e.forEach((function(e,t){n[4*t]=e[0],n[4*t+1]=e[1],n[4*t+2]=e[2],n[4*t+3]=t%4>0||1===Xe?e[3]:Xe})),Se.texture({data:n,shape:[We,We,4],type:"float"})},mt=function(){oe=E([],[1/(xe/je),1,1]),ie=E([],[Ie,1,1])},bt=function(){return pe},wt=function(){return We},xt=function(){return ce},jt=function(){return _e*window.devicePixelRatio},_t=function(){return 0},Et=function(){return se},Mt=function(){return Ne},St=function(){return oe},At=function(){return Q.view},Ot=function(){return ie},kt=function(){return Q.scaling},Ct=function(){return 1*("category"===Ge)},Lt=function(){return 1*("value"===Ge)},Bt=function(){return we.length/4-1},Pt=function(){return 4},zt=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Se({frag:st,vert:ut,blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:!1},attributes:{stateIndex:{buffer:n,size:1}},uniforms:{projection:St,model:Ot,view:At,scaling:kt,pointSize:jt,pointSizeExtra:e,globalState:r,colorTex:bt,colorTexRes:wt,stateTex:Et,stateTexRes:Mt,isColoredByCategory:Ct,isColoredByValue:Lt,maxColor:Bt,numColorStates:Pt},count:t,primitive:"points"})},Rt=zt(_t,(function(){return Ce}),(function(){return ue})),Ft=zt(_t,(function(){return 1}),(function(){return he}),2),It=Se({frag:at,vert:lt,attributes:{position:[0,1,0,0,1,0,0,1,1,1,1,0]},uniforms:{projection:St,model:Ot,view:At,texture:function(){return ye}},count:6}),Tt=function(e){$e=!1,Ce=e.length,se=function(e){var t=e.length;Ne=Math.max(2,Math.ceil(Math.sqrt(t)));for(var n=new Float32Array(4*Math.pow(Ne,2)),r=0;r<t;++r)n[4*r]=e[r][0],n[4*r+1]=e[r][1],n[4*r+2]=e[r][2]||0,n[4*r+3]=e[r][3]||0;return Se.texture({data:n,shape:[Ne,Ne,4],type:"float"})}(e),ue({usage:"static",type:"float",data:function(e){for(var t=new Float32Array(e),n=0;n<e;++n)t[n]=n;return t}(Ce)}),re=new me(e,(function(e){return e[0]}),(function(e){return e[1]}),16),$e=!0,He.setPoints(e)},Dt=Ve((function(e,t){var n;e&&Tt(e),$e&&(Se.clear({color:[0,0,0,0],depth:1}),Ue=Q.tick(),ye&&It(),Rt(),Ae||!Te&&!t||function(){if(de>=0){var e=g(re.points[de].slice(0,2),2),t=[e[0],e[1],0,1];j(K,oe,j(K,Q.view,ie)),B(t,t,K),ae.setPoints([-1,t[1],1,t[1]]),le.setPoints([t[0],1,t[0],-1]),ae.draw(),le.draw(),zt((function(){return(Ee+2*Me)*window.devicePixelRatio}),(function(){return 1}),he,1)(),zt((function(){return(Ee+Me)*window.devicePixelRatio}),(function(){return 1}),he,3)()}}(),de>=0&&Ft(),Le.length&&(n=Le.length,zt((function(){return(Ee+2*Me)*window.devicePixelRatio}),(function(){return n}),xt,1)(),zt((function(){return(Ee+Me)*window.devicePixelRatio}),(function(){return n}),xt,3)(),zt((function(){return Ee}),(function(){return n}),xt,1)()),ee.draw(),He.draw({model:ie,view:Q.view,projection:oe}),Ue&&J.publish("view",Q.view))})),Nt=function(){Se.poll()},Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.background,n=void 0===t?null:t,r=e.backgroundImage,o=void 0===r?ye:r,i=e.colorBy,a=void 0===i?Ge:i,l=e.colors,s=void 0===l?null:l,u=e.opacity,c=void 0===u?null:u,f=e.lassoColor,h=void 0===f?null:f,p=e.lassoMinDelay,d=void 0===p?null:p,v=e.lassoMinDist,g=void 0===v?null:v,m=e.showRecticle,b=void 0===m?null:m,w=e.recticleColor,x=void 0===w?null:w,j=e.pointOutlineWidth,_=void 0===j?null:j,E=e.pointSize,M=void 0===E?null:E,S=e.pointSizeSelected,A=void 0===S?null:S,O=e.height,k=void 0===O?null:O,C=e.width,L=void 0===C?null:C,B=e.aspectRatio,P=void 0===B?null:B;!function(e){e&&(ge=_o(e,!0))}(n),function(e){ye=e||null}(o),function(e){switch(e){case"category":Ge="category";break;case"value":Ge="value";break;default:Ge=null}}(a),function(e){if(e&&e.length){var t=[];try{e.forEach((function(e){if(!Array.isArray(e)||mo(e)||bo(e)){var n=_o(e,!0),r=y(n.slice(0,3)).concat([1]);t.push(n,r,r)}else for(var o=0;o<3;o++)t.push(_o(e[o],!0));t.push(ge)}))}catch(e){console.error(e,"Invalid format. Please specify an array of colors or a nested array of accents per colors.")}we=t,He.setColors(we);try{pe=yt()}catch(e){we=to,pe=yt(),console.error("Invalid colors. Switching back to default colors.")}}}(s),function(e){!+e||+e<=0||(Xe=+e,pe=yt())}(c),function(e){e&&(Be=_o(e,!0),ee.setStyle({color:Be}))}(h),function(e){+e&&(et=qe(Qe,Pe=+e,!0))}(d),function(e){+e&&(ze=+e)}(g),function(e){null!==e&&(Te=e)}(b),function(e){e&&(De=_o(e,!0),ae.setStyle({color:De}),le.setStyle({color:De}))}(x),function(e){!+e||+e<0||(Me=+e)}(_),function(e){!+e||+e<=0||(_e=+e)}(M),function(e){!+e||+e<0||(Ee=+e)}(A),function(e){!+e||+e<=0||(je=+e,be.height=je*window.devicePixelRatio)}(k),function(e){!+e||+e<=0||(xe=+e,be.width=xe*window.devicePixelRatio)}(L),function(e){+e<=0||(Ie=e)}(P),mt(),Q.refresh(),Nt(),Dt()},qt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;if(e>=0){n=!0;var r=e!==de;de=e,he.subdata([e]),r&&J.publish("pointover",de)}else n=de,de=void 0,+n>=0&&J.publish("pointout",n);n&&Dt(null,t)},Vt=function(e){switch(e.key){case"Escape":tt()}},Gt=function(){Ye=!0},Ut=function(){qt(),Ye=!1,Dt()};return mt(),Q=fe(be),X?Q.set(w(X)):Q.lookAt(y(W),V,U),ee=nt(Se,{color:Be,width:3,is2d:!0}),ae=nt(Se,{color:De,width:1,is2d:!0}),le=nt(Se,{color:De,width:1,is2d:!0}),te=it(be),He=new Kr(Se,H),te.on("scroll",(function(){Dt()})),ue=Se.buffer(),ce=Se.buffer(),he=Se.buffer({usage:"dynamic",type:"float",length:Zr}),pe=yt(),Wt({width:xe,height:je}),window.addEventListener("keyup",Vt,!1),window.addEventListener("blur",gt,!1),window.addEventListener("mousedown",ft,!1),window.addEventListener("mouseup",ht,!1),window.addEventListener("mousemove",vt,!1),be.addEventListener("mouseenter",Gt,!1),be.addEventListener("mouseleave",Ut,!1),be.addEventListener("click",pt,!1),be.addEventListener("dblclick",dt,!1),{deselect:tt,destroy:function(){window.removeEventListener("keyup",Vt,!1),window.removeEventListener("blur",gt,!1),window.removeEventListener("mousedown",ft,!1),window.removeEventListener("mouseup",ht,!1),window.removeEventListener("mousemove",vt,!1),be.removeEventListener("mouseenter",Gt,!1),be.removeEventListener("mouseleave",Ut,!1),be.removeEventListener("click",pt,!1),be.removeEventListener("dblclick",dt,!1),be=void 0,Q=void 0,Se=void 0,ee.destroy(),te.dispose(),J.clear(),He.destroy()},draw:Dt,get:function(e){return"background"===e?ge:"backgroundImage"===e?ye:"colorBy"===e?Ge:"colors"===e?we:"lassoColor"===e?Be:"showRecticle"===e?Te:"recticleColor"===e?De:"opacity"===e?Xe:"pointOutlineWidth"===e?Me:"pointSize"===e?_e:"pointSizeSelected"===e?Ee:"width"===e?xe:"height"===e?je:"aspectRatio"===e?Ie:"canvas"===e?be:"regl"===e?Se:"version"===e?"0.0.1":void 0},hover:qt,refresh:Nt,reset:(ve=function(){X?Q.set(w(X)):Q.lookAt(y(W),V,U),J.publish("view",Q.view)},function(){var e=ve.apply(void 0,arguments);return Dt(),e}),select:rt,set:Wt,subscribe:J.subscribe,unsubscribe:J.unsubscribe,setWingletsOptions:function(e){He.setOptions(e)}}}}).call(this,n(13),n(104)(e))},95:function(e,t,n){e.exports=n(132)}},[[95,1,2]]]);
//# sourceMappingURL=main.f16ea292.chunk.js.map