(this["webpackJsonpwinglets-playground"]=this["webpackJsonpwinglets-playground"]||[]).push([[0],{133:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(6),a=n.n(i),s=n(10),l=n.n(s),u=n(33),c=n(13);function h(t,e,n,r,o){var i,a,s=2*Math.PI;do{i=Math.random(),a=Math.random()}while(i<=Number.EPSILON);var l=s*a,u=Math.sqrt(-2*Math.log(i)),c=u*Math.cos(l),h=u*Math.sin(l),f=Math.cos(r),p=Math.sin(r),d=f*p*(o-1);return[(c=(o*Math.pow(f,2)+Math.pow(p,2))*c+d*h)*n+t,(h=d*c+(Math.pow(f,2)+o*Math.pow(p,2))*h)*n+e]}var f=n(137);function p(){return o.a.createElement("div",{className:"jsx-3482750863 settings"},o.a.createElement(f.a,{large:!0,icon:"cog",onClick:function(){return console.log("HEJ")}},"Settings"),o.a.createElement(l.a,{id:"3482750863"},[".settings.jsx-3482750863{position:absolute;top:0;right:0;margin:20px;}"]))}var d=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,{id:"2150112547"},["html,body,#root{margin:0;padding:0;width:100%;height:100%;}","body{margin:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen', 'Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue', sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}","code{font-family:source-code-pro,Menlo,Monaco,Consolas,'Courier New', monospace;}"]))};function v(t){var e=t.getBoundingClientRect(),n=e.width,r=e.height,o=Object(u.a)({canvas:t,width:n,height:r,lassoMinDelay:10,lassoMinDist:2,pointSize:5,showRecticle:!0,recticleColor:[1,1,.878431373,.33]});window.addEventListener("resize",(function(){var e=t.getBoundingClientRect();n=e.width,r=e.height,o.set({width:n,height:r})}));var i=function(t,e){var n=Math.random()/3+.1,r=1-2*n-.2;return function(t){for(var e=t.x,n=void 0===e?0:e,r=t.y,o=void 0===r?0:r,i=t.sigma,a=t.angle,s=void 0===a?0:a,l=t.amplitude,u=void 0===l?2:l,f=t.n,p=t.category,d=[],v=0;v<f;++v)d.push([].concat(Object(c.a)(h(n,o,i,s,u)),[p,0]));return d}({x:Math.random()*r*2-r,y:Math.random()*r*2-r,sigma:n,angle:Math.random()*Math.PI,amplitude:Math.random(),n:t,category:e})};o.set({colorBy:"category",colors:["#fccde5","#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#d9d9d9","#bc80bd"]});var a=new Array(2).fill().map((function(t,e){return i(100,e)})).reduce((function(t,e){return t.concat(e)}),[]);o.draw(a)}var g=function(){var t=Object(r.useCallback)((function(t){v(t)}),[]);return o.a.createElement("div",{className:"jsx-3445361636 App"},o.a.createElement(d,null),o.a.createElement("div",{className:"jsx-3445361636 canvas-wrapper"},o.a.createElement("canvas",{ref:t,className:"jsx-3445361636 canvas"})),o.a.createElement(p,null),o.a.createElement(l.a,{id:"3445361636"},[".App.jsx-3445361636{background-color:#000;width:100%;height:100%;position:relative;}",".canvas-wrapper.jsx-3445361636{position:absolute;top:0;right:0;bottom:0;left:0;}",".canvas.jsx-3445361636{position:absolute;width:100%;height:100%;}"]))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},33:function(t,e,n){"use strict";(function(t,r){var o=n(18),i=n.n(o),a=n(34),s=n(35),l=n(13),u=n(21),c=n(36),h=n(37),f=n.n(h);function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){d(t,e,n[e])}))}return t}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var w="undefined"!=typeof Float32Array?Float32Array:Array;Math.PI;function m(){var t=new w(16);return w!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function b(t){var e=new w(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function x(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],p=e[11],d=e[12],v=e[13],g=e[14],y=e[15],w=n*s-r*a,m=n*l-o*a,b=n*u-i*a,x=r*l-o*s,_=r*u-i*s,j=o*u-i*l,M=c*v-h*d,E=c*g-f*d,A=c*y-p*d,S=h*g-f*v,L=h*y-p*v,k=f*y-p*g,B=w*k-m*L+b*S+x*A-_*E+j*M;return B?(B=1/B,t[0]=(s*k-l*L+u*S)*B,t[1]=(o*L-r*k-i*S)*B,t[2]=(v*j-g*_+y*x)*B,t[3]=(f*_-h*j-p*x)*B,t[4]=(l*A-a*k-u*E)*B,t[5]=(n*k-o*A+i*E)*B,t[6]=(g*b-d*j-y*m)*B,t[7]=(c*j-f*b+p*m)*B,t[8]=(a*L-s*A+u*M)*B,t[9]=(r*A-n*L-i*M)*B,t[10]=(d*_-v*b+y*w)*B,t[11]=(h*b-c*_-p*w)*B,t[12]=(s*E-a*S-l*M)*B,t[13]=(n*S-r*E+o*M)*B,t[14]=(v*m-d*x-g*w)*B,t[15]=(c*x-h*m+f*w)*B,t):null}function _(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],f=e[9],p=e[10],d=e[11],v=e[12],g=e[13],y=e[14],w=e[15],m=n[0],b=n[1],x=n[2],_=n[3];return t[0]=m*r+b*s+x*h+_*v,t[1]=m*o+b*l+x*f+_*g,t[2]=m*i+b*u+x*p+_*y,t[3]=m*a+b*c+x*d+_*w,m=n[4],b=n[5],x=n[6],_=n[7],t[4]=m*r+b*s+x*h+_*v,t[5]=m*o+b*l+x*f+_*g,t[6]=m*i+b*u+x*p+_*y,t[7]=m*a+b*c+x*d+_*w,m=n[8],b=n[9],x=n[10],_=n[11],t[8]=m*r+b*s+x*h+_*v,t[9]=m*o+b*l+x*f+_*g,t[10]=m*i+b*u+x*p+_*y,t[11]=m*a+b*c+x*d+_*w,m=n[12],b=n[13],x=n[14],_=n[15],t[12]=m*r+b*s+x*h+_*v,t[13]=m*o+b*l+x*f+_*g,t[14]=m*i+b*u+x*p+_*y,t[15]=m*a+b*c+x*d+_*w,t}function j(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function M(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(t,e,n){var r,o,i,a=n[0],s=n[1],l=n[2],u=Math.sqrt(a*a+s*s+l*l);return u<1e-6?null:(a*=u=1/u,s*=u,l*=u,r=Math.sin(e),i=1-(o=Math.cos(e)),t[0]=a*a*i+o,t[1]=s*a*i+l*r,t[2]=l*a*i-s*r,t[3]=0,t[4]=a*s*i-l*r,t[5]=s*s*i+o,t[6]=l*s*i+a*r,t[7]=0,t[8]=a*l*i+s*r,t[9]=s*l*i-a*r,t[10]=l*l*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function A(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function S(t,e){var n=e[0],r=e[1],o=e[2],i=e[4],a=e[5],s=e[6],l=e[8],u=e[9],c=e[10];return t[0]=Math.sqrt(n*n+r*r+o*o),t[1]=Math.sqrt(i*i+a*a+s*s),t[2]=Math.sqrt(l*l+u*u+c*c),t}function L(){var t=new w(3);return w!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function k(t,e,n){var r=new w(3);return r[0]=t,r[1]=e,r[2]=n,r}function B(t,e,n){var r=e[0],o=e[1],i=e[2],a=n[0],s=n[1],l=n[2];return t[0]=o*l-i*s,t[1]=i*a-r*l,t[2]=r*s-o*a,t}var O=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)};!function(){var t=L()}();function P(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,t[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,t[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,t[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,t}!function(){var t=function(){var t=new w(4);return w!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();function C(){var t=new w(4);return w!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function R(t,e,n,r){var o=e[0],i=e[1],a=e[2],s=e[3],l=n[0],u=n[1],c=n[2],h=n[3],f=void 0,p=void 0,d=void 0,v=void 0,g=void 0;return o*l+i*u+a*c+s*h<0&&(-p,-l,-u,-c,-h),1-p>1e-6?(Math.acos(p),Math.sin(f),Math.sin((1-r)*f)/d,Math.sin(r*f)/d):(1-r,r),t[0]=v*o+g*l,t[1]=v*i+g*u,t[2]=v*a+g*c,t[3]=v*s+g*h,t}var T=function(t,e){var n=e[0],r=e[1],o=e[2],i=e[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=o*a,t[3]=i*a),t};(function(){var t=L(),e=k(1,0,0),n=k(0,1,0)})(),function(){var t=C(),e=C()}(),function(){var t=function(){var t=new w(9);return w!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}()}();function I(t,e){var n=t[0],r=t[1],o=e[0],i=e[1],a=n*n+r*r;a>0&&(a=1/Math.sqrt(a));var s=o*o+i*i;s>0&&(s=1/Math.sqrt(s));var l=(n*o+r*i)*a*s;return l>1?0:l<-1?Math.PI:Math.acos(l)}!function(){var t=function(){var t=new w(2);return w!=Float32Array&&(t[0]=0,t[1]=0),t}()}();var z=[0,0,0,1],D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new Float32Array(16),o=new Float32Array(16),i=new Float32Array(16),a=m(),s=function(){return S(r,a)[0]},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=Object(u.a)(t,2),n=e[0],r=void 0===n?0:n,o=e[1],i=void 0===o?0:o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;a=m(),h([-r,-i]),p(l),f(1/s)},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=Object(u.a)(t,2),n=e[0],i=void 0===n?0:n,s=e[1],l=void 0===s?0:s;r[0]=i,r[1]=l,r[2]=0;var c=j(o,r);_(a,c,a)},f=function(t,e){if(!(t<=0)){r[0]=t,r[1]=t,r[2]=1;var n=M(o,r),s=e?[].concat(Object(l.a)(e),[0]):z,u=j(r,s);_(a,u,_(a,n,_(a,x(i,u),a)))}},p=function(t){var e=m();E(e,t,[0,0,1]),_(a,e,a)};return c(t,e,n),{get translation(){return A(r,a).slice(0,2)},get target(){return P(r,z,x(i,a))},get scaling(){return s()},get distance(){return 1/s()},get rotation(){return Math.acos(a[0])},get view(){return a},lookAt:c,translate:h,pan:h,rotate:p,scale:f,zoom:f,reset:function(){c(t,e,n)},set:function(t){!t||t.length<16||(a=t)}}},F={},N=function(t){return t?F[t]:F},q=function(){Object.keys(F).forEach((function(t){F[t]=!1}))};function W(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}q(),window.addEventListener("keydown",(function(t){var e=t.key;F[e]=!0}),!1),window.addEventListener("keyup",(function(t){var e=t.key;F[e]=!1}),!1),window.addEventListener("blur",q,!1);var V=W;function U(t){return"function"==typeof t}function $(t){return"object"==typeof t&&null!==t}function G(t){return void 0===t}W.EventEmitter=W,W.prototype._events=void 0,W.prototype._maxListeners=void 0,W.defaultMaxListeners=10,W.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},W.prototype.emit=function(t){var e,n,r,o,i,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||$(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var s=new Error('Uncaught, unspecified "error" event. ('+e+")");throw s.context=e,s}if(G(n=this._events[t]))return!1;if(U(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if($(n))for(o=Array.prototype.slice.call(arguments,1),r=(a=n.slice()).length,i=0;i<r;i++)a[i].apply(this,o);return!0},W.prototype.addListener=function(t,e){var n;if(!U(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,U(e.listener)?e.listener:e),this._events[t]?$(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,$(this._events[t])&&!this._events[t].warned&&(n=G(this._maxListeners)?W.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},W.prototype.on=W.prototype.addListener,W.prototype.once=function(t,e){if(!U(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},W.prototype.removeListener=function(t,e){var n,r,o,i;if(!U(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(n=this._events[t]).length,r=-1,n===e||U(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if($(n)){for(i=o;i-- >0;)if(n[i]===e||n[i].listener&&n[i].listener===e){r=i;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},W.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(U(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},W.prototype.listeners=function(t){return this._events&&this._events[t]?U(this._events[t])?[this._events[t]]:this._events[t].slice():[]},W.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(U(e))return 1;if(e)return e.length}return 0},W.listenerCount=function(t,e){return t.listenerCount(e)};var X=function(t,e){var n=new V;if(n[0]=0,n[1]=0,n.prev=[0,0],n.flush=function(){n.prev[0]=n[0],n.prev[1]=n[1]},n.dispose=function(){n.removeAllListeners("move"),e.removeEventListener("mousemove",r)},"undefined"==typeof window)return n;e=e||t||window;var r=(t=t||document.body)===document.body||t===window?function(t){n.prev[0]=n[0],n.prev[1]=n[1],n[0]=t.clientX,n[1]=t.clientY,n.emit("move",t)}:function(e){n.prev[0]=n[0],n.prev[1]=n[1];var r=t.getBoundingClientRect();n[0]=e.clientX-r.left,n[1]=e.clientY-r.top,n.emit("move",e)};return e.addEventListener("mousemove",r,!1),n};var Y=["left","middle","right"],J=function(t,e){var n=new V;return n.left=!1,n.right=!1,n.middle=!1,n.dispose=function(){n.left=!1,n.right=!1,n.middle=!1,t&&(t.removeEventListener("contextmenu",i,!1),t.removeEventListener("mousedown",r,!1),window.removeEventListener("mouseup",o,!1))},"undefined"!=typeof window&&((t=t||window).addEventListener("mousedown",r,!1),window.addEventListener("mouseup",o,!1),e&&t.addEventListener("contextmenu",i,!1)),n;function r(t){if(n.right=!1,n[Y[t.button]]=!0,n.emit("down",t),e){if(!t.preventDefault)return!1;t.preventDefault(),t.stopPropagation()}}function o(t){n.right=!1,n[Y[t.button]]=!1,n.emit("up",t),e&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())}function i(t){return t.preventDefault&&t.preventDefault()&&!1}};var H,Z,Q,K,tt,et=it,nt=it,rt=function(t,e,n){st(t,Q,e,n),"DOMMouseScroll"==Q&&st(t,"MozMousePixelScroll",e,n)},ot="";function it(t,e,n){at(t,Q,e,n),"DOMMouseScroll"==Q&&at(t,"MozMousePixelScroll",e,n)}function at(t,e,n,r){t[H](ot+e,"wheel"==Q?n:function(t){!t&&(t=window.event);var e={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaY:0,deltaZ:0,clientX:t.clientX,clientY:t.clientY,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(){t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){t.stopImmediatePropagation&&t.stopImmediatePropagation()}};return"mousewheel"==Q?(e.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(e.deltaX=-.025*t.wheelDeltaX)):e.deltaY=t.detail,n(e)},r||!1)}function st(t,e,n,r){t[Z](ot+e,n,r||!1)}K="undefined"!=typeof window&&window,tt="undefined"!=typeof document&&document,K&&K.addEventListener?(H="addEventListener",Z="removeEventListener"):(H="attachEvent",Z="detachEvent",ot="on"),Q=tt?"onwheel"in tt.createElement("div")?"wheel":void 0!==tt.onmousewheel?"mousewheel":"DOMMouseScroll":"wheel",et.addWheelListener=nt,et.removeWheelListener=rt;var lt=et.addWheelListener,ut=et.removeWheelListener,ct=function(t,e){var n=new V;return n.flush=r,n.dispose=function(){ut(t,o,!1)},r(),"undefined"==typeof window?n:(t=t||window,lt(t,o,!1),n);function r(){n[0]=n[1]=n[2]=0}function o(t){var r=1===t.deltaMode?12:1;n[0]+=r*(t.deltaX||0),n[1]+=r*(t.deltaY||0),n[2]+=r*(t.deltaZ||0),n.emit("scroll",n),e&&t.preventDefault&&(t.preventDefault(),t.stopPropagation&&t.stopPropagation())}};var ht=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.distance,r=void 0===n?1:n,o=e.target,i=void 0===o?[0,0]:o,a=e.rotation,s=void 0===a?0:a,l=e.isFixed,u=void 0!==l&&l,c=e.isPan,h=void 0===c||c,f=e.panSpeed,p=void 0===f?1:f,d=e.isRotate,v=void 0===d||d,g=e.rotateSpeed,y=void 0===g?1:g,w=e.isZoom,m=void 0===w||w,b=e.zoomSpeed,x=void 0===b?1:b,_=D(i,r,s),j=!1,M=X(t),E=J(t),A=ct(t,m),S=t.height/window.devicePixelRatio,L=t.width/window.devicePixelRatio,k=L/S,B=!1;return _.config=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.isFixed,n=void 0===e?null:e,r=t.isPan,o=void 0===r?null:r,i=t.isRotate,a=void 0===i?null:i,s=t.isZoom,l=void 0===s?null:s,c=t.panSpeed,f=void 0===c?null:c,d=t.rotateSpeed,g=void 0===d?null:d,w=t.zoomSpeed,b=void 0===w?null:w;u=null!==n?n:u,h=null!==o?o:h,v=null!==a?a:v,m=null!==l?l:m,p=+f>0?f:p,y=+g>0?g:y,x=+b>0?b:x},_.dispose=function(){A.dispose(),E.dispose(),M.dispose(),_=void 0,A=void 0,E=void 0,M=void 0},_.refresh=function(){S=t.height/window.devicePixelRatio,L=t.width/window.devicePixelRatio,k=L/S},_.tick=function(){if(u)return!1;B=N("Alt"),j=!1;var t=M,e=t[0],n=t[1],r=M.prev,o=r[0],i=r[1];if(h&&E.left&&!B&&(_.pan([p*(e-o)/L*2*k,p*(i-n)/S*2]),j=!0),m&&A[1]){var a=x*Math.exp(A[1]/S),s=(e/L*2-1)*k,l=1-n/S*2;_.scale(1/a,[s,l]),j=!0}if(v&&E.left&&B){var c=L/2,f=S/2,d=o-c,g=f-i,w=e-c,b=f-n,O=I([d,g],[w,b]),P=d*b-w*g;_.rotate(y*O*Math.sign(P)),j=!0}return A.flush(),M.flush(),j},_};function ft(t,e,n,r,o,i){if(!(o-r<=n)){var a=r+o>>1;(function t(e,n,r,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,l=r-o+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(e,n,r,Math.max(o,Math.floor(r-l*c/s+h)),Math.min(i,Math.floor(r+(s-l)*c/s+h)),a)}var f=n[2*r+a],p=o,d=i;for(pt(e,n,o,r),n[2*i+a]>f&&pt(e,n,o,i);p<d;){for(pt(e,n,p,d),p++,d--;n[2*p+a]<f;)p++;for(;n[2*d+a]>f;)d--}n[2*o+a]===f?pt(e,n,o,d):pt(e,n,++d,i),d<=r&&(o=d+1),r<=d&&(i=d-1)}})(t,e,a,r,o,i%2),ft(t,e,n,r,a-1,i+1),ft(t,e,n,a+1,o,i+1)}}function pt(t,e,n,r){dt(t,n,r),dt(e,2*n,2*r),dt(e,2*n+1,2*r+1)}function dt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function vt(t,e,n,r){var o=t-n,i=e-r;return o*o+i*i}var gt=function(t){return t[0]},yt=function(t){return t[1]},wt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gt,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yt,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;Object(a.a)(this,t),this.nodeSize=o,this.points=e;for(var s=e.length<65536?Uint16Array:Uint32Array,l=this.ids=new s(e.length),u=this.coords=new i(2*e.length),c=0;c<e.length;c++)l[c]=c,u[2*c]=n(e[c]),u[2*c+1]=r(e[c]);ft(l,u,o,0,l.length-1,0)}return Object(s.a)(t,[{key:"range",value:function(t,e,n,r){return function(t,e,n,r,o,i,a){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var h=u.pop(),f=u.pop(),p=u.pop();if(f-p<=a)for(var d=p;d<=f;d++)s=e[2*d],l=e[2*d+1],s>=n&&s<=o&&l>=r&&l<=i&&c.push(t[d]);else{var v=Math.floor((p+f)/2);s=e[2*v],l=e[2*v+1],s>=n&&s<=o&&l>=r&&l<=i&&c.push(t[v]);var g=(h+1)%2;(0===h?n<=s:r<=l)&&(u.push(p),u.push(v-1),u.push(g)),(0===h?o>=s:i>=l)&&(u.push(v+1),u.push(f),u.push(g))}}return c}(this.ids,this.coords,t,e,n,r,this.nodeSize)}},{key:"within",value:function(t,e,n){return function(t,e,n,r,o,i){for(var a=[0,t.length-1,0],s=[],l=o*o;a.length;){var u=a.pop(),c=a.pop(),h=a.pop();if(c-h<=i)for(var f=h;f<=c;f++)vt(e[2*f],e[2*f+1],n,r)<=l&&s.push(t[f]);else{var p=Math.floor((h+c)/2),d=e[2*p],v=e[2*p+1];vt(d,v,n,r)<=l&&s.push(t[p]);var g=(u+1)%2;(0===u?n-o<=d:r-o<=v)&&(a.push(h),a.push(p-1),a.push(g)),(0===u?n+o>=d:r+o>=v)&&(a.push(p+1),a.push(c),a.push(g))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}}]),t}();function mt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var bt="object"==typeof t&&t&&t.Object===Object&&t,xt="object"==typeof self&&self&&self.Object===Object&&self,_t=bt||xt||Function("return this")(),jt=function(){return _t.Date.now()},Mt=_t.Symbol,Et=Object.prototype,At=Et.hasOwnProperty,St=Et.toString,Lt=Mt?Mt.toStringTag:void 0;var kt=Object.prototype.toString;var Bt=Mt?Mt.toStringTag:void 0;function Ot(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Bt&&Bt in Object(t)?function(t){var e=At.call(t,Lt),n=t[Lt];try{t[Lt]=void 0}catch(t){}var r=St.call(t);return e?t[Lt]=n:delete t[Lt],r}(t):function(t){return kt.call(t)}(t)}function Pt(t){return null!=t&&"object"==typeof t}function Ct(t){return"symbol"==typeof t||Pt(t)&&"[object Symbol]"==Ot(t)}var Rt=/^\s+|\s+$/g,Tt=/^[-+]0x[0-9a-f]+$/i,It=/^0b[01]+$/i,zt=/^0o[0-7]+$/i,Dt=parseInt;function Ft(t){if("number"==typeof t)return t;if(Ct(t))return NaN;if(mt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=mt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Rt,"");var n=It.test(t);return n||zt.test(t)?Dt(t.slice(2),n?2:8):Tt.test(t)?NaN:+t}var Nt=Math.max,qt=Math.min;function Wt(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return mt(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),function(t,e,n){var r,o,i,a,s,l,u=0,c=!1,h=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=r,i=o;return r=o=void 0,u=e,a=t.apply(i,n)}function d(t){var n=t-l;return void 0===l||n>=e||n<0||h&&t-u>=i}function v(){var t=jt();if(d(t))return g(t);s=setTimeout(v,function(t){var n=e-(t-l);return h?qt(n,i-(t-u)):n}(t))}function g(t){return s=void 0,f&&r?p(t):(r=o=void 0,a)}function y(){var t=jt(),n=d(t);if(r=arguments,o=this,l=t,n){if(void 0===s)return function(t){return u=t,s=setTimeout(v,e),c?p(t):a}(l);if(h)return clearTimeout(s),s=setTimeout(v,e),p(l)}return void 0===s&&(s=setTimeout(v,e)),a}return e=Ft(e)||0,mt(n)&&(c=!!n.leading,i=(h="maxWait"in n)?Nt(Ft(n.maxWait)||0,e):i,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=o=s=void 0},y.flush=function(){return void 0===s?a:g(jt())},y}(t,e,{leading:r,maxWait:e,trailing:o})}var Vt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.requestAnimationFrame,r=!1;return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];if(!r)return n((function(){var n=t.apply(void 0,i);e&&e(n),r=!1}))}},Ut="\nprecision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}",$t="\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\nuniform float aspectRatio;\n\nuniform float width;\nuniform int miter;\n\nattribute vec3 prevPosition;\nattribute vec3 currPosition;\nattribute vec3 nextPosition;\nattribute float offsetScale;\n\nvoid main() {\n  vec2 aspectVec = vec2(aspectRatio, 1.0);\n  mat4 projViewModel = projection * view * model;\n  vec4 prevProjected = projViewModel * vec4(prevPosition, 1.0);\n  vec4 currProjected = projViewModel * vec4(currPosition, 1.0);\n  vec4 nextProjected = projViewModel * vec4(nextPosition, 1.0);\n\n  // get 2D screen space with W divide and aspect correction\n  vec2 prevScreen = prevProjected.xy / prevProjected.w * aspectVec;\n  vec2 currScreen = currProjected.xy / currProjected.w * aspectVec;\n  vec2 nextScreen = nextProjected.xy / nextProjected.w * aspectVec;\n\n  // starting point uses (next - current)\n  vec2 dir = vec2(0.0);\n  if (currScreen == prevScreen) {\n    dir = normalize(nextScreen - currScreen);\n  }\n  // ending point uses (current - previous)\n  else if (currScreen == nextScreen) {\n    dir = normalize(currScreen - prevScreen);\n  }\n  // somewhere in middle, needs a join\n  else {\n    // get directions from (C - B) and (B - A)\n    vec2 dirA = normalize((currScreen - prevScreen));\n    if (miter == 1) {\n      vec2 dirB = normalize((nextScreen - currScreen));\n      // now compute the miter join normal and length\n      vec2 tangent = normalize(dirA + dirB);\n      vec2 perp = vec2(-dirA.y, dirA.x);\n      vec2 miter = vec2(-tangent.y, tangent.x);\n      dir = tangent;\n    } else {\n      dir = dirA;\n    }\n  }\n\n  vec2 normal = vec2(-dir.y, dir.x) * width;\n  normal.x /= aspectRatio;\n  vec4 offset = vec4(normal * offsetScale, 0.0, 0.0);\n  gl_Position = currProjected + offset;\n}",Gt=Array.prototype,Xt=Gt.push,Yt=Gt.unshift,Jt=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Ht=Float32Array.BYTES_PER_ELEMENT,Zt=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0;r<t-1;r++){var o=e+2*r,i=o+1,a=o+2,s=o+3;n.push(o,i,a,a,i,s)}return n},Qt=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=[],o=new Array(2*e),i=0,a=t.length/e;i<a;i++){for(var s=i*e,l=0;l<e;l++){var u=t[s+l];o[l]=u,o[l+e]=u*n}Xt.apply(r,o)}return r},Kt=function(t,e,n){for(var r=new Array(n),o=e*n,i=0;i<n;i++)r[i]=t[o+i];return Xt.apply(t,r),t},te=function(t,e,n){for(var r=new Array(n),o=e*n,i=0;i<n;i++)r[i]=t[o+i];return Yt.apply(t,r),t},ee=function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=[],i=new Array(n).fill(r),a=0,s=t.length/e;a<s;a++){for(var l=a*e,u=0;u<e;u++)i[u]=t[l+u];Xt.apply(o,i)}return o},ne=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.projection,r=void 0===n?Jt:n,o=e.model,i=void 0===o?Jt:o,a=e.view,s=void 0===a?Jt:a,l=e.points,u=void 0===l?[]:l,c=e.widths,h=void 0===c?[]:c,f=e.color,p=void 0===f?[.8,.5,0,1]:f,d=e.width,v=void 0===d?1:d,g=e.miter,y=void 0===g?1:g,w=e.is2d,m=void 0!==w&&w,b=e.zPos2d,x=void 0===b?0:b;if(t){var _,j,M,E,A,S,L,k,B,O,P,C=m?2:3,R=function(){L=t.buffer(),k=t.buffer(),B={prevPosition:{buffer:function(){return L},offset:0,stride:3*Ht},currPosition:{buffer:function(){return L},offset:3*Ht*2,stride:3*Ht},nextPosition:{buffer:function(){return L},offset:3*Ht*4,stride:3*Ht},offsetScale:function(){return k}},O=t.elements(),P=t({attributes:B,depth:{enable:!m},blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},uniforms:{projection:t.prop("projection"),model:t.prop("model"),view:t.prop("view"),aspectRatio:function(t){return t.viewportWidth/t.viewportHeight},color:function(){return p},width:function(t){var e=t.viewportWidth;return v/e*window.devicePixelRatio},miter:y},elements:function(){return O},vert:$t,frag:Ut})},T=function(){I(),R()},I=function(){u=null,M=null,E=null,A=null,S=null,L.destroy(),k.destroy(),O.destroy()},z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;u=t,C=(m=n)?2:3,_=Math.floor(u.length/C),j=_+2,e.length===_&&(h=e),u&&u.length>1?(u.length%C>0&&console.warn("The length of points (".concat(_,") does not match the dimensions (").concat(C,"). Incomplete points are ignored.")),M=u.slice(0,_*C),m&&(M=ee(M,2,3,x)),h.length!==_&&(h=new Array(_).fill(1)),Kt(M,_-1,3),te(M,0,3),E=new Float32Array(Qt(M,3)),A=Qt(h,1,-1),S=Zt(_,0),L({usage:"dynamic",type:"float",length:3*j*2*Ht,data:E}),k({usage:"dynamic",type:"float",length:1*_*2*Ht,data:A}),O({primitive:"triangles",usage:"dynamic",type:"uint16",data:S})):T()};return R(),u&&u.length>1&&z(u),{clear:T,destroy:I,draw:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.projection,n=t.model,o=t.view;e&&(r=e),n&&(i=n),o&&(s=o),u&&u.length>1&&P({projection:r,model:i,view:s})},getPoints:function(){return u},setPoints:z,getData:function(){return{points:E,widths:A}},getBuffer:function(){return{points:L,widths:k}},getStyle:function(){return{color:p,miter:y,width:v}},setStyle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=t.miter,r=t.width;e&&(p=e),n&&(y=n),+r>0&&(v=r)}}}console.error("Regl instance is undefined.")},re=et.addWheelListener,oe=et.removeWheelListener,ie=function(t,e){var n=new V;return n.flush=r,n.dispose=function(){oe(t,o,!1)},r(),"undefined"==typeof window?n:(t=t||window,re(t,o,!1),n);function r(){n[0]=n[1]=n[2]=0}function o(t){var r=1===t.deltaMode?12:1;n[0]+=r*(t.deltaX||0),n[1]+=r*(t.deltaY||0),n[2]+=r*(t.deltaZ||0),n.emit("scroll",n),e&&t.preventDefault&&(t.preventDefault(),t.stopPropagation&&t.stopPropagation())}};var ae="\nprecision mediump float;\n\nuniform sampler2D texture;\n\nvarying vec2 uv;\n\nvoid main () {\n  gl_FragColor = texture2D(texture, uv);\n}\n",se="\nprecision mediump float;\n\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\n\nattribute vec2 position;\n\nvarying vec2 uv;\n\nvoid main () {\n  uv = position;\n  gl_Position = projection * view * model * vec4(1.0 - 2.0 * position, 0, 1);\n}\n",le="\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n\nprecision mediump float;\n\nvarying vec4 color;\n\nvoid main() {\n  float r = 0.0, delta = 0.0, alpha = 1.0;\n  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n  r = dot(cxy, cxy);\n\n  #ifdef GL_OES_standard_derivatives\n    delta = fwidth(r);\n    alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n  #endif\n\n  gl_FragColor = vec4(color.rgb, alpha * color.a);\n}\n",ue='\nprecision mediump float;\n\nuniform sampler2D colorTex;\nuniform float colorTexRes;\nuniform sampler2D stateTex;\nuniform float stateTexRes;\nuniform float pointSize;\nuniform float pointSizeExtra;\nuniform float numPoints;\nuniform float globalState;\nuniform float isColoredByCategory;\nuniform float isColoredByValue;\nuniform float maxColor;\nuniform float numColorStates;\nuniform float scaling;\nuniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\n\nattribute float stateIndex;\n\n// variables to send to the fragment shader\nvarying vec4 color;\n\nvoid main() {\n  // First get the state\n  float eps = 0.5 / stateTexRes;\n  float stateRowIndex = floor((stateIndex + eps) / stateTexRes);\n  vec2 stateTexIndex = vec2(\n    (stateIndex / stateTexRes) - stateRowIndex + eps,\n    stateRowIndex / stateTexRes\n  );\n\n  vec4 state = texture2D(stateTex, stateTexIndex);\n\n  gl_Position = projection * view * model * vec4(state.x, state.y, 0.0, 1.0);\n\n  // Determine color index\n  float colorIndexCat = state.z * isColoredByCategory;\n  float colorIndexVal = floor(state.w * maxColor) * isColoredByValue;\n  float colorIndex = colorIndexCat + colorIndexVal;\n  // Multiply by the number of color states per color\n  // I.e., normal, active, hover, background, etc.\n  colorIndex *= numColorStates;\n  // Half a "pixel" or "texel" in texture coordinates\n  eps = 0.5 / colorTexRes;\n  float colorLinearIndex = colorIndex + globalState;\n  // Need to add cEps here to avoid floating point issue that can lead to\n  // dramatic changes in which color is loaded as floor(3/2.9) = 1 but\n  // floor(3/3.0001) = 0!\n  float colorRowIndex = floor((colorLinearIndex + eps) / colorTexRes);\n\n  vec2 colorTexIndex = vec2(\n    (colorLinearIndex / colorTexRes) - colorRowIndex + eps,\n    colorRowIndex / colorTexRes\n  );\n\n  color = texture2D(colorTex, colorTexIndex);\n\n  // The final scaling consists of linear scaling in [0, 1] and log scaling\n  // in [1, [\n  float finalScaling = min(1.0, scaling) + log2(max(1.0, scaling));\n\n  gl_PointSize = pointSize * finalScaling + pointSizeExtra;\n}\n';function ce(t){if(!mt(t))return!1;var e=Ot(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var he=_t["__core-js_shared__"],fe=function(){var t=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var pe=Function.prototype.toString;function de(t){if(null!=t){try{return pe.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var ve=/^\[object .+?Constructor\]$/,ge=Function.prototype,ye=Object.prototype,we=ge.toString,me=ye.hasOwnProperty,be=RegExp("^"+we.call(me).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xe(t){return!(!mt(t)||function(t){return!!fe&&fe in t}(t))&&(ce(t)?be:ve).test(de(t))}function _e(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return xe(n)?n:void 0}var je=function(){try{var t=_e(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();function Me(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var a=t[o];e(r,a,n(a),t)}return r}var Ee=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++o];if(!1===n(i[l],l,i))break}return e}}();function Ae(t){return Pt(t)&&"[object Arguments]"==Ot(t)}var Se=Object.prototype,Le=Se.hasOwnProperty,ke=Se.propertyIsEnumerable,Be=Ae(function(){return arguments}())?Ae:function(t){return Pt(t)&&Le.call(t,"callee")&&!ke.call(t,"callee")},Oe=Array.isArray;var Pe="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ce=Pe&&"object"==typeof r&&r&&!r.nodeType&&r,Re=Ce&&Ce.exports===Pe?_t.Buffer:void 0,Te=(Re?Re.isBuffer:void 0)||function(){return!1},Ie=/^(?:0|[1-9]\d*)$/;function ze(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Ie.test(t))&&t>-1&&t%1==0&&t<e}function De(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}var Fe={};Fe["[object Float32Array]"]=Fe["[object Float64Array]"]=Fe["[object Int8Array]"]=Fe["[object Int16Array]"]=Fe["[object Int32Array]"]=Fe["[object Uint8Array]"]=Fe["[object Uint8ClampedArray]"]=Fe["[object Uint16Array]"]=Fe["[object Uint32Array]"]=!0,Fe["[object Arguments]"]=Fe["[object Array]"]=Fe["[object ArrayBuffer]"]=Fe["[object Boolean]"]=Fe["[object DataView]"]=Fe["[object Date]"]=Fe["[object Error]"]=Fe["[object Function]"]=Fe["[object Map]"]=Fe["[object Number]"]=Fe["[object Object]"]=Fe["[object RegExp]"]=Fe["[object Set]"]=Fe["[object String]"]=Fe["[object WeakMap]"]=!1;var Ne="object"==typeof exports&&exports&&!exports.nodeType&&exports,qe=Ne&&"object"==typeof r&&r&&!r.nodeType&&r,We=qe&&qe.exports===Ne&&bt.process,Ve=function(){try{return qe&&qe.require&&qe.require("util").types||We&&We.binding&&We.binding("util")}catch(K){}}(),Ue=Ve&&Ve.isTypedArray,$e=Ue?function(t){return function(e){return t(e)}}(Ue):function(t){return Pt(t)&&De(t.length)&&!!Fe[Ot(t)]},Ge=Object.prototype.hasOwnProperty;function Xe(t,e){var n=Oe(t),r=!n&&Be(t),o=!n&&!r&&Te(t),i=!n&&!r&&!o&&$e(t),a=n||r||o||i,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],l=s.length;for(var u in t)!e&&!Ge.call(t,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ze(u,l))||s.push(u);return s}var Ye=Object.prototype;var Je=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),He=Object.prototype.hasOwnProperty;function Ze(t){if(!function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ye)}(t))return Je(t);var e=[];for(var n in Object(t))He.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Qe(t){return null!=t&&De(t.length)&&!ce(t)}function Ke(t){return Qe(t)?Xe(t):Ze(t)}var tn=function(t,e){return function(n,r){if(null==n)return n;if(!Qe(n))return t(n,r);for(var o=n.length,i=e?o:-1,a=Object(n);(e?i--:++i<o)&&!1!==r(a[i],i,a););return n}}((function(t,e){return t&&Ee(t,e,Ke)}));function en(t,e,n,r){return tn(t,(function(t,o,i){e(r,t,n(t),i)})),r}function nn(t,e){return t===e||t!=t&&e!=e}function rn(t,e){for(var n=t.length;n--;)if(nn(t[n][0],e))return n;return-1}var on=Array.prototype.splice;function an(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}an.prototype.clear=function(){this.__data__=[],this.size=0},an.prototype.delete=function(t){var e=this.__data__,n=rn(e,t);return!(n<0)&&(n==e.length-1?e.pop():on.call(e,n,1),--this.size,!0)},an.prototype.get=function(t){var e=this.__data__,n=rn(e,t);return n<0?void 0:e[n][1]},an.prototype.has=function(t){return rn(this.__data__,t)>-1},an.prototype.set=function(t,e){var n=this.__data__,r=rn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var sn=_e(_t,"Map"),ln=_e(Object,"create");var un=Object.prototype.hasOwnProperty;var cn=Object.prototype.hasOwnProperty;function hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function fn(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function pn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}hn.prototype.clear=function(){this.__data__=ln?ln(null):{},this.size=0},hn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},hn.prototype.get=function(t){var e=this.__data__;if(ln){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return un.call(e,t)?e[t]:void 0},hn.prototype.has=function(t){var e=this.__data__;return ln?void 0!==e[t]:cn.call(e,t)},hn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ln&&void 0===e?"__lodash_hash_undefined__":e,this},pn.prototype.clear=function(){this.size=0,this.__data__={hash:new hn,map:new(sn||an),string:new hn}},pn.prototype.delete=function(t){var e=fn(this,t).delete(t);return this.size-=e?1:0,e},pn.prototype.get=function(t){return fn(this,t).get(t)},pn.prototype.has=function(t){return fn(this,t).has(t)},pn.prototype.set=function(t,e){var n=fn(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function dn(t){var e=this.__data__=new an(t);this.size=e.size}dn.prototype.clear=function(){this.__data__=new an,this.size=0},dn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},dn.prototype.get=function(t){return this.__data__.get(t)},dn.prototype.has=function(t){return this.__data__.has(t)},dn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof an){var r=n.__data__;if(!sn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new pn(r)}return n.set(t,e),this.size=n.size,this};function vn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new pn;++e<n;)this.add(t[e])}function gn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function yn(t,e){return t.has(e)}vn.prototype.add=vn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},vn.prototype.has=function(t){return this.__data__.has(t)};function wn(t,e,n,r,o,i){var a=1&n,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=i.get(t);if(u&&i.get(e))return u==e;var c=-1,h=!0,f=2&n?new vn:void 0;for(i.set(t,e),i.set(e,t);++c<s;){var p=t[c],d=e[c];if(r)var v=a?r(d,p,c,e,t,i):r(p,d,c,t,e,i);if(void 0!==v){if(v)continue;h=!1;break}if(f){if(!gn(e,(function(t,e){if(!yn(f,e)&&(p===t||o(p,t,n,r,i)))return f.push(e)}))){h=!1;break}}else if(p!==d&&!o(p,d,n,r,i)){h=!1;break}}return i.delete(t),i.delete(e),h}var mn=_t.Uint8Array;function bn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function xn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var _n=Mt?Mt.prototype:void 0,jn=_n?_n.valueOf:void 0;function Mn(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}var En=Object.prototype.propertyIsEnumerable,An=Object.getOwnPropertySymbols,Sn=An?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}(An(t),(function(e){return En.call(t,e)})))}:function(){return[]};function Ln(t){return function(t,e,n){var r=e(t);return Oe(t)?r:Mn(r,n(t))}(t,Ke,Sn)}var kn=Object.prototype.hasOwnProperty;var Bn=_e(_t,"DataView"),On=_e(_t,"Promise"),Pn=_e(_t,"Set"),Cn=_e(_t,"WeakMap"),Rn=de(Bn),Tn=de(sn),In=de(On),zn=de(Pn),Dn=de(Cn),Fn=Ot;(Bn&&"[object DataView]"!=Fn(new Bn(new ArrayBuffer(1)))||sn&&"[object Map]"!=Fn(new sn)||On&&"[object Promise]"!=Fn(On.resolve())||Pn&&"[object Set]"!=Fn(new Pn)||Cn&&"[object WeakMap]"!=Fn(new Cn))&&(Fn=function(t){var e=Ot(t),n="[object Object]"==e?t.constructor:void 0,r=n?de(n):"";if(r)switch(r){case Rn:return"[object DataView]";case Tn:return"[object Map]";case In:return"[object Promise]";case zn:return"[object Set]";case Dn:return"[object WeakMap]"}return e});var Nn=Fn,qn=Object.prototype.hasOwnProperty;function Wn(t,e,n,r,o,i){var a=Oe(t),s=Oe(e),l=a?"[object Array]":Nn(t),u=s?"[object Array]":Nn(e),c="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),h="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),f=l==u;if(f&&Te(t)){if(!Te(e))return!1;a=!0,c=!1}if(f&&!c)return i||(i=new dn),a||$e(t)?wn(t,e,n,r,o,i):function(t,e,n,r,o,i,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new mn(t),new mn(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return nn(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=bn;case"[object Set]":var l=1&r;if(s||(s=xn),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=2,a.set(t,e);var c=wn(s(t),s(e),r,o,i,a);return a.delete(t),c;case"[object Symbol]":if(jn)return jn.call(t)==jn.call(e)}return!1}(t,e,l,n,r,o,i);if(!(1&n)){var p=c&&qn.call(t,"__wrapped__"),d=h&&qn.call(e,"__wrapped__");if(p||d){var v=p?t.value():t,g=d?e.value():e;return i||(i=new dn),o(v,g,n,r,i)}}return!!f&&(i||(i=new dn),function(t,e,n,r,o,i){var a=1&n,s=Ln(t),l=s.length;if(l!=Ln(e).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in e:kn.call(e,c)))return!1}var h=i.get(t);if(h&&i.get(e))return h==e;var f=!0;i.set(t,e),i.set(e,t);for(var p=a;++u<l;){var d=t[c=s[u]],v=e[c];if(r)var g=a?r(v,d,c,e,t,i):r(d,v,c,t,e,i);if(!(void 0===g?d===v||o(d,v,n,r,i):g)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var y=t.constructor,w=e.constructor;y!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w)&&(f=!1)}return i.delete(t),i.delete(e),f}(t,e,n,r,o,i))}function Vn(t,e,n,r,o){return t===e||(null==t||null==e||!Pt(t)&&!Pt(e)?t!=t&&e!=e:Wn(t,e,n,r,Vn,o))}function Un(t){return t==t&&!mt(t)}function $n(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}function Gn(t){var e=function(t){for(var e=Ke(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,Un(o)]}return e}(t);return 1==e.length&&e[0][2]?$n(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var o=n.length,i=o,a=!r;if(null==t)return!i;for(t=Object(t);o--;){var s=n[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<i;){var l=(s=n[o])[0],u=t[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in t))return!1}else{var h=new dn;if(r)var f=r(u,c,l,t,e,h);if(!(void 0===f?Vn(c,u,3,r,h):f))return!1}}return!0}(n,t,e)}}var Xn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yn=/^\w*$/;function Jn(t,e){if(Oe(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ct(t))||Yn.test(t)||!Xn.test(t)||null!=e&&t in Object(e)}function Hn(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Hn.Cache||pn),n}Hn.Cache=pn;var Zn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qn=/\\(\\)?/g,Kn=function(t){var e=Hn(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Zn,(function(t,n,r,o){e.push(r?o.replace(Qn,"$1"):n||t)})),e}));var tr=Mt?Mt.prototype:void 0,er=tr?tr.toString:void 0;function nr(t){if("string"==typeof t)return t;if(Oe(t))return function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}(t,nr)+"";if(Ct(t))return er?er.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function rr(t,e){return Oe(t)?t:Jn(t,e)?[t]:Kn(function(t){return null==t?"":nr(t)}(t))}function or(t){if("string"==typeof t||Ct(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ir(t,e){for(var n=0,r=(e=rr(e,t)).length;null!=t&&n<r;)t=t[or(e[n++])];return n&&n==r?t:void 0}function ar(t,e){return null!=t&&e in Object(t)}function sr(t,e){return null!=t&&function(t,e,n){for(var r=-1,o=(e=rr(e,t)).length,i=!1;++r<o;){var a=or(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&De(o)&&ze(a,o)&&(Oe(t)||Be(t))}(t,e,ar)}function lr(t,e){return Jn(t)&&Un(e)?$n(or(t),e):function(n){var r=function(t,e,n){var r=null==t?void 0:ir(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?sr(n,t):Vn(e,r,3)}}function ur(t){return t}function cr(t){return Jn(t)?function(t){return function(e){return null==e?void 0:e[t]}}(or(t)):function(t){return function(e){return ir(e,t)}}(t)}var hr=Object.prototype.hasOwnProperty,fr=function(t,e){return function(n,r){var o=Oe(n)?Me:en,i=e?e():{};return o(n,t,function(t){return"function"==typeof t?t:null==t?ur:"object"==typeof t?Oe(t)?lr(t[0],t[1]):Gn(t):cr(t)}(r),i)}}((function(t,e,n){hr.call(t,n)?t[n].push(e):function(t,e,n){"__proto__"==e&&je?je(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}(t,n,[e])})),pr=Mt?Mt.isConcatSpreadable:void 0;function dr(t){return Oe(t)||Be(t)||!!(pr&&t&&t[pr])}function vr(t){return null!=t&&t.length?function t(e,n,r,o,i){var a=-1,s=e.length;for(r||(r=dr),i||(i=[]);++a<s;){var l=e[a];n>0&&r(l)?n>1?t(l,n-1,r,o,i):Mn(i,l):o||(i[i.length]=l)}return i}(t,1):[]}function gr(t,e){return t.reduce((function(t,n){return t+n[e]}),0)/t.length}function yr(t){var e=t.length,n=g(function(t){var e=gr(t,0),n=gr(t,1),r=t.length,o=0,i=0;return t.forEach((function(t){o+=Math.pow(t[0]-e,2),i+=Math.pow(t[1]-n,2)})),[Math.sqrt(1/(r-1)*o),Math.sqrt(1/(r-1)*i)]}(t),2),r=n[0],o=n[1];return[Math.pow(e,-1/6)*r,Math.pow(e,-1/6)*o]}function wr(t,e,n){for(var r=e.xMin,o=e.xMax,i=e.yMin,a=e.yMax,s=Array(n).fill().map((function(){return Array(n).fill()})),l=(o-r)/(n-1),u=(a-i)/(n-1),c=[],h=[],f=0;f<n;++f)c.push(r+f*l),h.push(i+f*u);for(var p=yr(t),d=function(e){for(var r=function(n){s[e][n]=t.reduce((function(t,r){return t+function(t){var e=g(t,2),n=e[0],r=e[1];return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*(n*n+r*r))}(function(t,e){return[t[0]/e[0],t[1]/e[1]]}(function(t,e){var n=g(t,2),r=n[0],o=n[1],i=g(e,2);return[i[0]-r,i[1]-o]}([c[n],h[e]],r),p))}),0)/(t.length*p[0]*p[1])},o=0;o<n;++o)r(o)},v=0;v<n;++v)d(v);return s}function mr(t,e,n){return t<e?(n-t)/(e-t):(t-n)/(t-e)}function br(){this.successCallback=null,this.verbose=!1,this.polygons=!1,this.polygons_full=!1,this.linearRing=!0,this.noQuadTree=!1,this.noFrame=!1}function xr(t,e,n,r){var o=[];return t.polygons.forEach((function(t){t.forEach((function(t){t[0]+=e,t[1]+=n})),r.linearRing&&t.push(t[0]),o.push(t)})),o}function _r(t,e,n,r){return 0===n?(t+=1,e+=r[0][1]):1===n?t+=r[0][0]:2===n?e+=r[0][1]:3===n&&(t+=r[0][0],e+=1),[t,e]}function jr(t,e,n){return 0===n?t++:1===n||(2===n?e++:3===n&&(t++,e++)),[t,e]}function Mr(t,e,n,r,o){var i=r,a=o,s=0,l=0;if(this.x=e,this.y=n,this.lowerBound=null,this.upperBound=null,this.childA=null,this.childB=null,this.childC=null,this.childD=null,1===r&&1===o)this.lowerBound=Math.min(t[n][e],t[n][e+1],t[n+1][e+1],t[n+1][e]),this.upperBound=Math.max(t[n][e],t[n][e+1],t[n+1][e+1],t[n+1][e]);else{if(r>1){for(;0!==i;)i>>=1,s++;r===1<<s-1&&s--,i=1<<s-1}if(o>1){for(;0!==a;)a>>=1,l++;o===1<<l-1&&l--,a=1<<l-1}this.childA=new Mr(t,e,n,i,a),this.lowerBound=this.childA.lowerBound,this.upperBound=this.childA.upperBound,r-i>0&&(this.childB=new Mr(t,e+i,n,r-i,a),this.lowerBound=Math.min(this.lowerBound,this.childB.lowerBound),this.upperBound=Math.max(this.upperBound,this.childB.upperBound),o-a>0&&(this.childC=new Mr(t,e+i,n+a,r-i,o-a),this.lowerBound=Math.min(this.lowerBound,this.childC.lowerBound),this.upperBound=Math.max(this.upperBound,this.childC.upperBound))),o-a>0&&(this.childD=new Mr(t,e,n+a,i,o-a),this.lowerBound=Math.min(this.lowerBound,this.childD.lowerBound),this.upperBound=Math.max(this.upperBound,this.childD.upperBound))}}function Er(t){var e,n;if(!t)throw new Error("data is required");if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error("data must be scalar field, i.e. array of arrays");if(t.length<2)throw new Error("data must contain at least two rows");if((n=t[0].length)<2)throw new Error("data must contain at least two columns");for(e=1;e<t.length;e++){if(!Array.isArray(t[e]))throw new Error("Row "+e+" is not an array");if(t[e].length!=n)throw new Error("unequal row lengths detected, please provide a regular grid")}this.data=t,this.root=new Mr(t,0,0,t[0].length-1,t.length-1)}function Ar(t,e,n){var r,o,i,a=!1,s=!1,l=null,u=null,c=null,h=null,f=null,p=[];if(!t)throw new Error("data is required");if(null==e)throw new Error("threshold is required");if(n&&"object"!=typeof n)throw new Error("options must be an object");if(r=function(t){var e,n,r,o,i;for(o=new br,t=t||{},i=Object.keys(o),e=0;e<i.length;e++)null!=(r=t[n=i[e]])&&(o[n]=r);return o.polygons_full=!o.polygons,o.interpolate=mr,o}(n),t instanceof Er)l=t,u=t.root,c=t.data,r.noQuadTree||(a=!0);else{if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error("input is neither array of arrays nor object retrieved from 'QuadTree()'");c=t}if(Array.isArray(e)){for(s=!0,r.noQuadTree||(a=!0),o=0;o<e.length;o++)if(isNaN(+e[o]))throw new Error("threshold["+o+"] is not a number")}else{if(isNaN(+e))throw new Error("threshold must be a number or array of numbers");e=[e]}return a&&!u&&(l=new Er(c),u=l.root,c=l.data),r.verbose&&(r.polygons?console.log("MarchingSquaresJS-isoLines: returning single lines (polygons) for each grid cell"):console.log("MarchingSquaresJS-isoLines: returning line paths (polygons) for entire data grid"),s&&console.log("MarchingSquaresJS-isoLines: multiple lines requested, returning array of line paths instead of lines for a single threshold")),e.forEach((function(t,e){if(f=[],r.threshold=t,r.verbose&&console.log("MarchingSquaresJS-isoLines: computing iso lines for threshold "+t),r.polygons)if(a)u.cellsBelowThreshold(r.threshold,!0).forEach((function(t){f=f.concat(xr(Sr(c,t.x,t.y,r),t.x,t.y,r))}));else for(i=0;i<c.length-1;++i)for(e=0;e<c[0].length-1;++e)f=f.concat(xr(Sr(c,e,i,r),e,i,r));else{for(h=[],e=0;e<c[0].length-1;++e)h[e]=[];if(a)u.cellsBelowThreshold(r.threshold,!1).forEach((function(t){h[t.x][t.y]=Sr(c,t.x,t.y,r)}));else for(e=0;e<c[0].length-1;++e)for(i=0;i<c.length-1;++i)h[e][i]=Sr(c,e,i,r);f=function(t,e,n){var r,o,i,a,s,l,u,c,h,f,p,d,v,g,y,w=[],m=t.length-1,b=t[0].length-1,x=["right","bottom","left","top"],_=[0,-1,0,1],j=[-1,0,1,0],M={bottom:1,left:2,top:3,right:0};return n.noFrame||function(t,e){var n,r,o,i,a;for(n=!0,r=t[0].length,o=t.length,a=0;a<o;a++)if(t[a][0]>=e||t[a][r-1]>=e){n=!1;break}if(n&&(t[o-1][0]>=e||t[o-1][r-1]>=e)&&(n=!1),n)for(i=0;i<r-1;i++)if(t[0][i]>=e||t[o-1][i]>e){n=!1;break}return n}(t,n.threshold)&&(n.linearRing?w.push([[0,0],[0,m],[b,m],[b,0],[0,0]]):w.push([[0,0],[0,m],[b,m],[b,0]])),e.forEach((function(t,E){t.forEach((function(t,A){for(r=null,o=0;o<4;o++)if(r=x[o],"object"==typeof t.edges[r]){for(s=[],i=t.edges[r],l=r,u=E,c=A,h=!1,f=[E+i.path[0][0],A+i.path[0][1]],s.push(f);!h&&"object"==typeof(a=e[u][c]).edges[l];)if(i=a.edges[l],delete a.edges[l],(p=i.path[1])[0]+=u,p[1]+=c,s.push(p),l=i.move.enter,u+=i.move.x,c+=i.move.y,void 0===e[u]||void 0===e[u][c]){if(!n.linearRing)break;if(d=0,v=0,u===b?(u--,d=0):u<0?(u++,d=2):c===m?(c--,d=3):c<0&&(c++,d=1),u===E&&c===A&&d===M[r]){h=!0,l=r;break}for(;;){if(g=!1,v>4)throw new Error("Direction change counter overflow! This should never happen!");if(void 0!==e[u]&&void 0!==e[u][c]&&(a=e[u][c],y=x[d],"object"==typeof a.edges[y])){i=a.edges[y],s.push(_r(u,c,d,i.path)),l=y,g=!0;break}if(g)break;if(s.push(jr(u,c,d)),c+=j[d],void 0!==e[u+=_[d]]&&void 0!==e[u][c]||(0===d&&c<0||1===d&&u<0||2===d&&c===m||3===d&&u===b)&&(u-=_[d],c-=j[d],d=(d+1)%4,v++),u===E&&c===A&&d===M[r]){h=!0,l=r;break}}}!n.linearRing||s[s.length-1][0]===f[0]&&s[s.length-1][1]===f[1]||s.push(f),w.push(s)}}))})),w}(c,h,r)}s?p.push(f):p=f,"function"==typeof r.successCallback&&r.successCallback(p,t)})),p}function Sr(t,e,n,r){var o,i,a,s,l,u,c=0,h=t[n+1][e],f=t[n+1][e+1],p=t[n][e+1],d=t[n][e],v=r.threshold;if(!(isNaN(d)||isNaN(p)||isNaN(f)||isNaN(h))){switch(c|=h>=v?8:0,c|=f>=v?4:0,c|=p>=v?2:0,u={cval:c=+(c|=d>=v?1:0),polygons:[],edges:{},x0:d,x1:p,x2:f,x3:h},c){case 0:r.polygons&&u.polygons.push([[0,0],[0,1],[1,1],[1,0]]);break;case 15:break;case 14:o=r.interpolate(d,h,v),s=r.interpolate(d,p,v),r.polygons_full&&(u.edges.left={path:[[0,o],[s,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&u.polygons.push([[0,0],[0,o],[s,0]]);break;case 13:s=r.interpolate(d,p,v),i=r.interpolate(p,f,v),r.polygons_full&&(u.edges.bottom={path:[[s,0],[1,i]],move:{x:1,y:0,enter:"left"}}),r.polygons&&u.polygons.push([[s,0],[1,i],[1,0]]);break;case 11:i=r.interpolate(p,f,v),a=r.interpolate(h,f,v),r.polygons_full&&(u.edges.right={path:[[1,i],[a,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&u.polygons.push([[1,i],[a,1],[1,1]]);break;case 7:o=r.interpolate(d,h,v),a=r.interpolate(h,f,v),r.polygons_full&&(u.edges.top={path:[[a,1],[0,o]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&u.polygons.push([[a,1],[0,o],[0,1]]);break;case 1:o=r.interpolate(d,h,v),s=r.interpolate(d,p,v),r.polygons_full&&(u.edges.bottom={path:[[s,0],[0,o]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&u.polygons.push([[s,0],[0,o],[0,1],[1,1],[1,0]]);break;case 2:s=r.interpolate(d,p,v),i=r.interpolate(p,f,v),r.polygons_full&&(u.edges.right={path:[[1,i],[s,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&u.polygons.push([[0,0],[0,1],[1,1],[1,i],[s,0]]);break;case 4:i=r.interpolate(p,f,v),a=r.interpolate(h,f,v),r.polygons_full&&(u.edges.top={path:[[a,1],[1,i]],move:{x:1,y:0,enter:"left"}}),r.polygons&&u.polygons.push([[0,0],[0,1],[a,1],[1,i],[1,0]]);break;case 8:o=r.interpolate(d,h,v),a=r.interpolate(h,f,v),r.polygons_full&&(u.edges.left={path:[[0,o],[a,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&u.polygons.push([[0,0],[0,o],[a,1],[1,1],[1,0]]);break;case 12:o=r.interpolate(d,h,v),i=r.interpolate(p,f,v),r.polygons_full&&(u.edges.left={path:[[0,o],[1,i]],move:{x:1,y:0,enter:"left"}}),r.polygons&&u.polygons.push([[0,0],[0,o],[1,i],[1,0]]);break;case 9:s=r.interpolate(d,p,v),a=r.interpolate(h,f,v),r.polygons_full&&(u.edges.bottom={path:[[s,0],[a,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&u.polygons.push([[s,0],[a,1],[1,1],[1,0]]);break;case 3:o=r.interpolate(d,h,v),i=r.interpolate(p,f,v),r.polygons_full&&(u.edges.right={path:[[1,i],[0,o]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&u.polygons.push([[0,o],[0,1],[1,1],[1,i]]);break;case 6:s=r.interpolate(d,p,v),a=r.interpolate(h,f,v),r.polygons_full&&(u.edges.top={path:[[a,1],[s,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&u.polygons.push([[0,0],[0,1],[a,1],[s,0]]);break;case 10:o=r.interpolate(d,h,v),i=r.interpolate(p,f,v),s=r.interpolate(d,p,v),a=r.interpolate(h,f,v),l=(d+p+f+h)/4,r.polygons_full&&(l<v?(u.edges.left={path:[[0,o],[a,1]],move:{x:0,y:1,enter:"bottom"}},u.edges.right={path:[[1,i],[s,0]],move:{x:0,y:-1,enter:"top"}}):(u.edges.right={path:[[1,i],[a,1]],move:{x:0,y:1,enter:"bottom"}},u.edges.left={path:[[0,o],[s,0]],move:{x:0,y:-1,enter:"top"}})),r.polygons&&(l<v?u.polygons.push([[0,0],[0,o],[a,1],[1,1],[1,i],[s,0]]):(u.polygons.push([[0,0],[0,o],[s,0]]),u.polygons.push([[a,1],[1,1],[1,i]])));break;case 5:o=r.interpolate(d,h,v),i=r.interpolate(p,f,v),s=r.interpolate(d,p,v),a=r.interpolate(h,f,v),l=(d+p+f+h)/4,r.polygons_full&&(l<v?(u.edges.bottom={path:[[s,0],[0,o]],move:{x:-1,y:0,enter:"right"}},u.edges.top={path:[[a,1],[1,i]],move:{x:1,y:0,enter:"left"}}):(u.edges.top={path:[[a,1],[0,o]],move:{x:-1,y:0,enter:"right"}},u.edges.bottom={path:[[s,0],[1,i]],move:{x:1,y:0,enter:"left"}})),r.polygons&&(l<v?u.polygons.push([[0,o],[0,1],[a,1],[1,i],[1,0],[s,0]]):(u.polygons.push([[0,o],[0,1],[a,1]]),u.polygons.push([[s,0],[1,i],[1,0]])))}return u}}function Lr(t,e,n,r,o){var i=g(function(t,e,n){var r=g(t,2),o=r[0],i=r[1],a=e.xMin,s=e.xMax,l=e.yMin,u=(o-a)/(s-a)*(n-1),c=(i-l)/(e.yMax-l)*(n-1);return[Math.floor(u),Math.ceil(u),Math.floor(c),Math.ceil(c)]}(e,o,t.length),4),a=i[0],s=i[1],l=i[2],u=i[3];return function(t,e,n,r,o,i,a,s,l,u){return(o*(e-l)*(r-u)+i*(l-t)*(r-u)+a*(e-l)*(u-n)+s*(l-t)*(u-n))/((e-t)*(r-n))}(n[a],n[s],r[l],r[u],t[l][a],t[l][s],t[u][a],t[u][s],e[0],e[1])}function kr(t,e){for(var n=0,r=t.length-1;n!==r;){var o=Math.ceil((n+r)/2);t[o]>e?r=o-1:n=o}return t.length-n+(t[n]<e?-1:0)}function Br(t,e,n,r){for(var o=e.xMin,i=e.xMax,a=e.yMin,s=e.yMax,l=function(t,e,n){for(var r=e.xMin,o=e.xMax,i=e.yMin,a=e.yMax,s=t.length,l=(o-r)/(s-1),u=(a-i)/(s-1),c=[],h=[],f=0;f<s;++f)c.push(r+f*l),h.push(i+f*u);return n.map((function(n){return Lr(t,n,c,h,e)}))}(t,e,n).sort((function(t,e){return t-e})),u=l[Math.floor(.1*l.length)],c=(l[Math.floor(.9*l.length)]-u)/20,h=new Array(20).fill().map((function(t,e){return u+e*c})),f=new Er(t),p=null,d=null,v=kr(l,h[0]),g=Ar(f,h[0],{noFrame:!0}),y=1;y<20;++y){var w=kr(l,h[y]),m=1-w/v;if(1===g.length&&(p=g[0]),d=g[0],m>=r.contourDropoff)break;v=w,g=Ar(f,h[y],{noFrame:!0})}null===p&&(p=d,console.error("Can't find contour. Using best available one, (may look bad)."));for(var b=(i-o)/(t.length-1),x=(s-a)/(t.length-1),_=0;_<p.length;++_)p[_][0]=o+p[_][0]*b,p[_][1]=a+p[_][1]*x;return p}Mr.prototype.cellsInBand=function(t,e,n){var r=[];return n=void 0===n||n,this.lowerBound>e||this.upperBound<t?r:(this.childA||this.childB||this.childC||this.childD?(this.childA&&(r=r.concat(this.childA.cellsInBand(t,e,n))),this.childB&&(r=r.concat(this.childB.cellsInBand(t,e,n))),this.childD&&(r=r.concat(this.childD.cellsInBand(t,e,n))),this.childC&&(r=r.concat(this.childC.cellsInBand(t,e,n)))):(n||this.lowerBound<=t||this.upperBound>=e)&&r.push({x:this.x,y:this.y}),r)},Mr.prototype.cellsBelowThreshold=function(t,e){var n=[];return e=void 0===e||e,this.lowerBound>t?n:(this.childA||this.childB||this.childC||this.childD?(this.childA&&(n=n.concat(this.childA.cellsBelowThreshold(t,e))),this.childB&&(n=n.concat(this.childB.cellsBelowThreshold(t,e))),this.childD&&(n=n.concat(this.childD.cellsBelowThreshold(t,e))),this.childC&&(n=n.concat(this.childC.cellsBelowThreshold(t,e)))):(e||this.upperBound>=t)&&n.push({x:this.x,y:this.y}),n)};var Or=Pr;function Pr(t){var e=this;if(e instanceof Pr||(e=new Pr),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}function Cr(t,e,n){var r=e===t.head?new Ir(n,null,e,t):new Ir(n,e,e.next,t);return null===r.next&&(t.tail=r),null===r.prev&&(t.head=r),t.length++,r}function Rr(t,e){t.tail=new Ir(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function Tr(t,e){t.head=new Ir(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Ir(t,e,n,r){if(!(this instanceof Ir))return new Ir(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}Pr.Node=Ir,Pr.create=Pr,Pr.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e},Pr.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},Pr.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},Pr.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Rr(this,arguments[t]);return this.length},Pr.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)Tr(this,arguments[t]);return this.length},Pr.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},Pr.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},Pr.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;null!==n;r++)t.call(e,n.value,r,this),n=n.next},Pr.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;null!==n;r--)t.call(e,n.value,r,this),n=n.prev},Pr.prototype.get=function(t){for(var e=0,n=this.head;null!==n&&e<t;e++)n=n.next;if(e===t&&null!==n)return n.value},Pr.prototype.getReverse=function(t){for(var e=0,n=this.tail;null!==n&&e<t;e++)n=n.prev;if(e===t&&null!==n)return n.value},Pr.prototype.map=function(t,e){e=e||this;for(var n=new Pr,r=this.head;null!==r;)n.push(t.call(e,r.value,this)),r=r.next;return n},Pr.prototype.mapReverse=function(t,e){e=e||this;for(var n=new Pr,r=this.tail;null!==r;)n.push(t.call(e,r.value,this)),r=r.prev;return n},Pr.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var o=0;null!==r;o++)n=t(n,r.value,o),r=r.next;return n},Pr.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var o=this.length-1;null!==r;o--)n=t(n,r.value,o),r=r.prev;return n},Pr.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;null!==n;e++)t[e]=n.value,n=n.next;return t},Pr.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;null!==n;e++)t[e]=n.value,n=n.prev;return t},Pr.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new Pr;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,o=this.head;null!==o&&r<t;r++)o=o.next;for(;null!==o&&r<e;r++,o=o.next)n.push(o.value);return n},Pr.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new Pr;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,o=this.tail;null!==o&&r>e;r--)o=o.prev;for(;null!==o&&r>t;r--,o=o.prev)n.push(o.value);return n},Pr.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,r=this.head;null!==r&&n<t;n++)r=r.next;var o=[];for(n=0;r&&n<e;n++)o.push(r.value),r=this.removeNode(r);for(null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev),n=0;n<(arguments.length<=2?0:arguments.length-2);n++)r=Cr(this,r,n+2<2||arguments.length<=n+2?void 0:arguments[n+2]);return o},Pr.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};try{!function(t){t.prototype[Symbol.iterator]=i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.head;case 1:if(!e){t.next=7;break}return t.next=4,e.value;case 4:e=e.next,t.next=1;break;case 7:case"end":return t.stop()}}),t,this)}))}(Pr)}catch(K){}function zr(t,e,n,r){var o=t-n,i=e-r;return o*o+i*i}function Dr(t,e){return(t%e+e)%e}function Fr(t,e){var n=g(t,2),r=n[0],o=n[1],i=g(e,2),a=r-i[0],s=o-i[1];return Math.sqrt(a*a+s*s)}function Nr(t,e,n,r,o,i){var a=new Or,s=[n[0]-t[e][0],n[1]-t[e][1]],l=t[e];a.push(l[0]+s[0]),a.push(l[1]+s[1]),function(t,e,n,r,o){for(var i,a,s,l=n/2,u=t[e],c=e;l>.001;){if(l-(s=Fr(i=t[a=Dr(c-1,t.length)],u))>=0)l-=s,u=i,c=a;else{var h=(i[0]-u[0])/s,f=(i[1]-u[1])/s;i[0]=u[0]+h*l,i[1]=u[1]+f*l,l=0}o.unshift(i[1]+r[1]),o.unshift(i[0]+r[0])}}(t,e,r,s,a),function(t,e,n,r,o){for(var i,a,s,l=n/2,u=t[e],c=e;l>.001;){if(l-(s=Fr(i=t[a=(c+1)%t.length],u))>=0)l-=s,u=i,c=a;else{var h=(i[0]-u[0])/s,f=(i[1]-u[1])/s;i[0]=u[0]+h*l,i[1]=u[1]+f*l,l=0}o.push(i[0]+r[0]),o.push(i[1]+r[1])}}(t,e,r,s,a);var u=a.shift(),c=a.shift();a.unshift(c,u,c,u);var h=a.pop(),f=a.pop();a.push(f,h,f,h);var p=o.length;o.push.apply(o,y(a));var d=o.length-2;i.push(p,d)}function qr(t,e,n,r){return e+Math.pow(t[3],r)*n}function Wr(t,e,n,r){for(var o=new Array(e.length*e[0].length),i=e[0].length,a=0;a<e.length;++a)for(var s=0;s<e[a].length;++s)o[a*i+s]={position:e[a][s],contour:e[a],index:s};for(var l=new wt(o,(function(t){return t.position[0]}),(function(t){return t.position[1]}),64),u=n.map((function(t){return function(t,e){for(var n=g(e,2),r=n[0],o=n[1],i=[0,t.ids.length-1,0],a=Number.MAX_VALUE,s=Number.MAX_VALUE,l=null;i.length;){var u=i.pop(),c=i.pop(),h=i.pop();if(c-h<=t.nodeSize)for(var f=h;f<=c;f++){var p=zr(t.coords[2*f],t.coords[2*f+1],r,o);p<=a&&(l=t.ids[f],a=p,s=Math.sqrt(a))}else{var d=h+c>>1,v=t.coords[2*d],y=t.coords[2*d+1],w=zr(v,y,r,o);w<=a&&(l=t.ids[d],a=w,s=Math.sqrt(a)),(0===u?r-s<=v:o-s<=y)&&(i.push(h),i.push(d-1),i.push(1-u)),(0===u?r+s>=v:o+s>=y)&&(i.push(d+1),i.push(c),i.push(1-u))}}return t.points[l]}(l,t)})),c=[],h=[],f=0;f<n.length;++f)Nr(u[f].contour,u[f].index,n[f],qr(n[f],r.a,r.b,r.n),c,h);var p=function(t,e){for(var n,r=[],o=0;o<t.length;o+=2){r.push(0),n=(t[o+1]-t[o]-2)/2;for(var i=0;i<n;++i)r.push(e);r.push(0)}return r}(h,r.lineWidth);return ne(t,{widths:p,is2d:!0,points:c})}function Vr(t,e){var n=g(t,2),r=n[0],o=n[1],i=g(e,2),a=r-i[0],s=o-i[1];return Math.sqrt(a*a+s*s)}var Ur=[.1,.19,.31,.47,.65,.86,1.1,1.37,1.67,2],$r=[[255,255,255,1],[240,240,240,1],[217,217,217,1],[189,189,189,1],[150,150,150,1],[115,115,115,1],[82,82,82,1],[37,37,37,1],[0,0,0,1]];function Gr(t){var e=[0,0];return t.forEach((function(t){e[0]+=t[0],e[1]+=t[1]})),e[0]/=t.length,e[1]/=t.length,e}function Xr(t,e,n){for(var r=g(e,2),o=r[0],i=r[1],a=new Array(t.length),s=0;s<t.length;++s)a[s]=[n*(t[s][0]-o)+o,n*(t[s][1]-i)+i];return a}function Yr(t,e){var n=g(t,4),r=n[0],o=n[1],i=n[2],a=n[3];if(e>1)throw new Error("k must be < 1");return[r*e,o*e,i*e,a]}var Jr={showWinglets:!0,showContours:!1,lineWidth:1,a:.01,b:.08,n:1,contourDropoff:.05},Hr={showWinglets:"draw",showContours:"draw",lineWidth:"draw",a:"process",b:"process",n:"process",contourDropoff:"process"},Zr=function(){function t(e,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.regl=e,this.categories=[],this.pointsByCategory={},this.kdeGridsByCategory={},this.contourLines={},this.wingletLines={},this.colors=$r,this.appliedColors=null,this.bbox=null,this.mvp=null,this.options=v({},Jr,n)}return function(t,e,n){e&&p(t.prototype,e),n&&p(t,n)}(t,[{key:"draw",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=e;e||this.mvp?(e||(n=this.mvp),this.categories.forEach((function(e){if(t.options.showContours)for(var r=0;r<t.contourLines[e].length;++r)t.contourLines[e][r].draw(n);t.options.showWinglets&&t.wingletLines[e].draw(n)}))):console.error("winglets.draw() missing mvp")}},{key:"processPoints",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.contourLines={},this.wingletLines={},this.categories.forEach((function(n){var r=t.pointsByCategory[n];!e&&t.kdeGridsByCategory[n]||(t.kdeGridsByCategory[n]=wr(r,t.bbox,100));var o=Br(t.kdeGridsByCategory[n],t.bbox,r,t.options),i=Gr(r),a=[];t.contourLines[n]=new Array(Ur.length).fill().map((function(){return ne(t.regl,{width:1,is2d:!0})})),Ur.forEach((function(e,r){var s=Xr(o,i,e);a.push(s),t.contourLines[n][r].setPoints(vr(s))})),t.wingletLines[n]=Wr(t.regl,a,r,t.options)}))}},{key:"setPoints",value:function(t){(function(t){var e,n,r,o,i=function(t){for(var e={},n=0;n<t.length;++n)e[t[n][2]]=(e[t[n][2]]||0)+1;return e}(t),a=Object.keys(i),s={};a.forEach((function(e){s[e]=new Array(t.length).fill(0)}));for(var l=0;l<t.length;++l)for(var u=l+1;u<t.length;++u)e=Vr(t[l],t[u]),s[t[u][2]][l]+=e,s[t[l][2]][u]+=e;for(var c=0;c<t.length;++c){n=s[t[c][2]][c]/(i[t[c][2]]-1);for(var h=[],f=0;f<a.length;++f)a[f]!==String(t[c][2])&&h.push(s[a[f]][c]/i[a[f]]);r=Math.min.apply(Math,h),o=(1+(o=i[t[c][2]]>1?(r-n)/Math.max(n,r):0))/2,t[c][3]=o}})(t),this.bbox=function(t,e){for(var n=Number.MAX_VALUE,r=Number.MIN_VALUE,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=0;a<t.length;++a)t[a][0]<n&&(n=t[a][0]),t[a][0]>r&&(r=t[a][0]),t[a][1]<o&&(o=t[a][1]),t[a][1]>i&&(i=t[a][1]);return{xMin:n-e,xMax:r+e,yMin:o-e,yMax:i+e}}(t,.1),this.pointsByCategory=fr(t,2),this.categories=Object.keys(this.pointsByCategory),this.kdeGridsByCategory={},this.processPoints(!0),this.applyColors(!0)}},{key:"setColors",value:function(t){this.colors=t,this.applyColors()}},{key:"applyColors",value:function(){var t=this;(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.appliedColors!==this.colors&&0!==this.categories.length)&&(this.categories.forEach((function(e,n){for(var r=0;r<t.contourLines[e].length;++r)t.contourLines[e][r].setStyle({color:Yr(t.colors[4*n],.5)||Yr($r[n],.5)||[255,255,255,1]});t.wingletLines[e].setStyle({color:t.colors[4*n]||$r[n]||[255,255,255,1]})})),this.appliedColors=this.colors)}},{key:"setOptions",value:function(t){this.options=v({},this.options,t);var e={draw:!1,process:!1};Object.keys(t).forEach((function(t){e[Hr[t]]=!0})),e.process&&this.processPoints(!1),this.draw()}},{key:"destroy",value:function(){var t=this;this.categories.forEach((function(e){for(var n=0;n<t.contourLines[e].length;++n)t.contourLines[e][n].destroy();t.wingletLines[e].destroy()}))}}]),t}(),Qr=Float32Array.BYTES_PER_ELEMENT,Kr=["OES_standard_derivatives","OES_texture_float"],to=[0,0,0,1],eo=[[.66,.66,.66,1],[0,.55,1,1],[1,1,1,1],to],no=[0,0],ro=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),oo=[0,.666666667,1,1],io=[1,1,1,.5],ao=function(t,e){return t>e?t:e},so=function(t){return!!t&&Kr.reduce((function(e,n){return t.hasExtension(n)?e:(console.warn("WebGL: ".concat(n," extension not supported. Scatterplot might not render properly")),!1)}),!0)},lo=function(t){var e=t.getContext("webgl"),n=[];return Kr.forEach((function(t){e.getExtension(t)?n.push(t):console.warn("WebGL: ".concat(t," extension not supported. Scatterplot might not render properly"))})),f()({gl:e,extensions:n})},uo=function(t,e,n,r){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))},co=function(t){for(var e=1/0,n=-1/0,r=1/0,o=-1/0,i=0;i<t.length;i+=2)e=t[i]<e?t[i]:e,n=t[i]>n?t[i]:n,r=t[i+1]<r?t[i+1]:r,o=t[i+1]>o?t[i+1]:o;return[e,r,n,o]},ho=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,r){return"#".concat(e).concat(e).concat(n).concat(n).concat(r).concat(r)})).substring(1).match(/.{2}/g).map((function(t){return parseInt(t,16)/Math.pow(255,e)}))},fo=function(t){return t>=0&&t<=1},po=function(t){return Array.isArray(t)&&t.every(fo)},vo=function(){for(var t,e,n,r,o=g(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],2),i=o[0],a=o[1],s=arguments.length>1?arguments[1]:void 0,l=!1,u=0,c=s.length-2;u<s.length;u+=2)t=s[u],e=s[u+1],n=s[c],e>a!=(r=s[c+1])>a&&i<(n-t)*(a-e)/(r-e)+t&&(l=!l),c=u;return l},go=function(t){return Number.isInteger(t)&&t>=0&&t<=255},yo=function(t){return Array.isArray(t)&&t.every(go)},wo=function(t){return 3===t.length&&(po(t)||yo(t))},mo=function(t){return 4===t.length&&(po(t)||yo(t))},bo=function(t,e){return t>e?t:e},xo=function(t,e){return t<e?t:e},_o=function(t){return t.map((function(e){return e/t.reduce(ao,-1/0)}))},jo=function(t,e){return mo(t)?e&&!po(t)?_o(t):t:wo(t)?y(e?_o(t):t).concat([Math.pow(255,!e)]):function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}(t)?function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y(ho(t,e)).concat([Math.pow(255,!e)])}(t,e):(console.warn("Only HEX, RGB, and RGBA are handled by this function. Returning white instead."),e?[1,1,1,1]:[255,255,255,255])};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.regl,n=t.background,r=void 0===n?to:n,o=t.backgroundImage,i=void 0===o?null:o,a=t.canvas,s=void 0===a?document.createElement("canvas"):a,l=t.colorBy,u=void 0===l?null:l,h=t.colors,f=void 0===h?eo:h,p=t.lassoColor,d=void 0===p?oo:p,v=t.lassoMinDelay,w=void 0===v?15:v,m=t.lassoMinDist,j=void 0===m?4:m,E=t.showRecticle,A=void 0!==E&&E,S=t.recticleColor,L=void 0===S?io:S,k=t.pointSize,B=void 0===k?6:k,O=t.pointSizeSelected,C=void 0===O?2:O,R=t.pointOutlineWidth,T=void 0===R?2:R,I=t.width,z=void 0===I?100:I,D=t.height,F=void 0===D?100:D,N=t.target,q=void 0===N?no:N,W=t.distance,V=void 0===W?1:W,U=t.rotation,$=void 0===U?0:U,G=t.view,X=void 0===G?ro:G,Y=Object(c.a)(),J=new Float32Array(16),H=[0,0];so(e);var Z,Q,K,tt,et,nt,rt,ot,it,at,st,lt,ut,ct,ft,pt,dt=jo(r,!0),vt=i,gt=s,yt=f,mt=z,bt=F,xt=B,_t=C,jt=T,Mt=e||lo(s),Et=!1,At=!1,St=[0,0],Lt=0,kt=[],Bt=jo(d,!0),Ot=+w,Pt=+j,Ct=[],Rt=[],Tt=1,It=A,zt=jo(L,!0),Dt=0,Ft=0,Nt=u,qt=!1,Ut=!1,$t=1,Gt=!1,Xt=null,Yt=function(){return[(e=H[0],e/mt*2-1),(t=H[1],1+t/bt*-2)];var t,e},Jt=function(){var t=g(Yt(),2),e=[t[0],t[1],1,1];return P(e,e,x(J,_(J,nt,_(J,Z.view,rt)))),e.slice(0,2)},Ht=function(){var t,e=g(Jt(),2),n=e[0],r=e[1],o=Z.scaling,i=2*xt*(xo(1,o)+Math.log2(bo(1,o)))*window.devicePixelRatio,a=i/mt,s=i/bt,l=et.range(n-a,r-s,n+a,r+s),u=i;return l.forEach((function(e){var o=g(et.points[e],2),i=o[0],a=o[1],s=uo(i,a,n,r);s<u&&(u=s,t=e)})),u<xt/mt*2?t:-1},Zt=function(){var t,e,n,r,o=H.slice();tt?uo.apply(void 0,y(o).concat(y(tt)))>Pt&&((t=Ct).push.apply(t,y(Yt())),(e=Rt).push.apply(e,y(Jt())),tt=o,Ct.length>2&&Q.setPoints(Ct)):((n=Ct).push.apply(n,y(Yt())),(r=Rt).push.apply(r,y(Jt())),tt=o)},Qt=Wt(Zt,Ot,!0),Kt=function(){kt.length&&(Y.publish("deselect"),kt=[],ze())},te=function(t){kt=t,lt({usage:"dynamic",type:"float",data:new Float32Array(kt)}),Y.publish("select",{points:kt}),ze()},ee=function(t){var e=gt.getBoundingClientRect();return H[0]=t.clientX-e.left,H[1]=t.clientY-e.top,H.concat()},re=function(){var t,e,n,r,o,i=(n=co(t=Rt),r=(e=et).range.apply(e,y(n)),o=[],r.forEach((function(e){vo(et.points[e],t)&&o.push(e)})),o);te(i),Ct=[],Rt=[],tt=void 0,Q.clear()},oe=function(t){Ut&&(Et=!0,St=ee(t),(At=t.shiftKey)&&Z.config({isFixed:!0}))},ce=function(){Ut&&(Et=!1,At&&(At=!1,Z.config({isFixed:!1}),re()))},he=function(t){if(Ut){var e=ee(t);if(!(uo.apply(void 0,y(e).concat(y(St)))>=4)){var n=Ht();n>=0&&te([n])}}},fe=function(){Kt()},pe=function(t){if(Ut){if(ee(t),Gt&&!At){var e=Ht();Ne(e)}At&&Qt(),Et&&ze()}},de=function(){Ut&&(ft=void 0,Gt=!1,ce(),ze())},ve=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,e=t.length;Ft=Math.max(2,Math.ceil(Math.sqrt(e)));var n=new Float32Array(4*Math.pow(Ft,2));return t.forEach((function(t,e){n[4*e]=t[0],n[4*e+1]=t[1],n[4*e+2]=t[2],n[4*e+3]=e%4>0||1===$t?t[3]:$t})),Mt.texture({data:n,shape:[Ft,Ft,4],type:"float"})},ge=function(){nt=M([],[1/(mt/bt),1,1]),rt=M([],[Tt,1,1])},ye=function(){return ct},we=function(){return Ft},me=function(){return lt},be=function(){return xt*window.devicePixelRatio},xe=function(){return 0},_e=function(){return at},je=function(){return Dt},Me=function(){return nt},Ee=function(){return Z.view},Ae=function(){return rt},Se=function(){return Z.scaling},Le=function(){return 1*("category"===Nt)},ke=function(){return 1*("value"===Nt)},Be=function(){return yt.length/4-1},Oe=function(){return 4},Pe=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Mt({frag:le,vert:ue,blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"one",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}},depth:{enable:!1},attributes:{stateIndex:{buffer:n,size:1}},uniforms:{projection:Me,model:Ae,view:Ee,scaling:Se,pointSize:be,pointSizeExtra:t,globalState:r,colorTex:ye,colorTexRes:we,stateTex:_e,stateTexRes:je,isColoredByCategory:Le,isColoredByValue:ke,maxColor:Be,numColorStates:Oe},count:e,primitive:"points"})},Ce=Pe(xe,(function(){return Lt}),(function(){return st})),Re=Pe(xe,(function(){return 1}),(function(){return ut}),2),Te=Mt({frag:ae,vert:se,attributes:{position:[0,1,0,0,1,0,0,1,1,1,1,0]},uniforms:{projection:Me,model:Ae,view:Ee,texture:function(){return vt}},count:6}),Ie=function(t){Ut=!1,Lt=t.length,at=function(t){var e=t.length;Dt=Math.max(2,Math.ceil(Math.sqrt(e)));for(var n=new Float32Array(4*Math.pow(Dt,2)),r=0;r<e;++r)n[4*r]=t[r][0],n[4*r+1]=t[r][1],n[4*r+2]=t[r][2]||0,n[4*r+3]=t[r][3]||0;return Mt.texture({data:n,shape:[Dt,Dt,4],type:"float"})}(t),st({usage:"static",type:"float",data:function(t){for(var e=new Float32Array(t),n=0;n<t;++n)e[n]=n;return e}(Lt)}),et=new wt(t,(function(t){return t[0]}),(function(t){return t[1]}),16),Ut=!0,Xt.setPoints(t)},ze=Vt((function(t,e){var n;t&&Ie(t),Ut&&(Mt.clear({color:[0,0,0,0],depth:1}),qt=Z.tick(),vt&&Te(),Ce(),Et||!It&&!e||function(){if(ft>=0){var t=g(et.points[ft].slice(0,2),2),e=[t[0],t[1],0,1];_(J,nt,_(J,Z.view,rt)),P(e,e,J),ot.setPoints([-1,e[1],1,e[1]]),it.setPoints([e[0],1,e[0],-1]),ot.draw(),it.draw(),Pe((function(){return(_t+2*jt)*window.devicePixelRatio}),(function(){return 1}),ut,1)(),Pe((function(){return(_t+jt)*window.devicePixelRatio}),(function(){return 1}),ut,3)()}}(),ft>=0&&Re(),kt.length&&(n=kt.length,Pe((function(){return(_t+2*jt)*window.devicePixelRatio}),(function(){return n}),me,1)(),Pe((function(){return(_t+jt)*window.devicePixelRatio}),(function(){return n}),me,3)(),Pe((function(){return _t}),(function(){return n}),me,1)()),Q.draw(),Xt.draw({model:rt,view:Z.view,projection:nt}),qt&&Y.publish("view",Z.view))})),De=function(){Mt.poll()},Fe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.background,n=void 0===e?null:e,r=t.backgroundImage,o=void 0===r?vt:r,i=t.colorBy,a=void 0===i?Nt:i,s=t.colors,l=void 0===s?null:s,u=t.opacity,c=void 0===u?null:u,h=t.lassoColor,f=void 0===h?null:h,p=t.lassoMinDelay,d=void 0===p?null:p,v=t.lassoMinDist,g=void 0===v?null:v,w=t.showRecticle,m=void 0===w?null:w,b=t.recticleColor,x=void 0===b?null:b,_=t.pointOutlineWidth,j=void 0===_?null:_,M=t.pointSize,E=void 0===M?null:M,A=t.pointSizeSelected,S=void 0===A?null:A,L=t.height,k=void 0===L?null:L,B=t.width,O=void 0===B?null:B,P=t.aspectRatio,C=void 0===P?null:P;!function(t){t&&(dt=jo(t,!0))}(n),function(t){vt=t||null}(o),function(t){switch(t){case"category":Nt="category";break;case"value":Nt="value";break;default:Nt=null}}(a),function(t){if(t&&t.length){var e=[];try{t.forEach((function(t){if(!Array.isArray(t)||wo(t)||mo(t)){var n=jo(t,!0),r=y(n.slice(0,3)).concat([1]);e.push(n,r,r)}else for(var o=0;o<3;o++)e.push(jo(t[o],!0));e.push(dt)}))}catch(t){console.error(t,"Invalid format. Please specify an array of colors or a nested array of accents per colors.")}yt=e,Xt.setColors(yt);try{ct=ve()}catch(t){yt=eo,ct=ve(),console.error("Invalid colors. Switching back to default colors.")}}}(l),function(t){!+t||+t<=0||($t=+t,ct=ve())}(c),function(t){t&&(Bt=jo(t,!0),Q.setStyle({color:Bt}))}(f),function(t){+t&&(Qt=Wt(Zt,Ot=+t,!0))}(d),function(t){+t&&(Pt=+t)}(g),function(t){null!==t&&(It=t)}(m),function(t){t&&(zt=jo(t,!0),ot.setStyle({color:zt}),it.setStyle({color:zt}))}(x),function(t){!+t||+t<0||(jt=+t)}(j),function(t){!+t||+t<=0||(xt=+t)}(E),function(t){!+t||+t<0||(_t=+t)}(S),function(t){!+t||+t<=0||(bt=+t,gt.height=bt*window.devicePixelRatio)}(k),function(t){!+t||+t<=0||(mt=+t,gt.width=mt*window.devicePixelRatio)}(O),function(t){+t<=0||(Tt=t)}(C),ge(),Z.refresh(),De(),ze()},Ne=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;if(t>=0){n=!0;var r=t!==ft;ft=t,ut.subdata([t]),r&&Y.publish("pointover",ft)}else n=ft,ft=void 0,+n>=0&&Y.publish("pointout",n);n&&ze(null,e)},qe=function(t){switch(t.key){case"Escape":Kt()}},We=function(){Gt=!0},Ve=function(){Ne(),Gt=!1,ze()};return ge(),Z=ht(gt),X?Z.set(b(X)):Z.lookAt(y(q),V,$),Q=ne(Mt,{color:Bt,width:3,is2d:!0}),ot=ne(Mt,{color:zt,width:1,is2d:!0}),it=ne(Mt,{color:zt,width:1,is2d:!0}),K=ie(gt),Xt=new Zr(Mt),K.on("scroll",(function(){ze()})),st=Mt.buffer(),lt=Mt.buffer(),ut=Mt.buffer({usage:"dynamic",type:"float",length:Qr}),ct=ve(),Fe({width:mt,height:bt}),window.addEventListener("keyup",qe,!1),window.addEventListener("blur",de,!1),window.addEventListener("mousedown",oe,!1),window.addEventListener("mouseup",ce,!1),window.addEventListener("mousemove",pe,!1),gt.addEventListener("mouseenter",We,!1),gt.addEventListener("mouseleave",Ve,!1),gt.addEventListener("click",he,!1),gt.addEventListener("dblclick",fe,!1),{deselect:Kt,destroy:function(){window.removeEventListener("keyup",qe,!1),window.removeEventListener("blur",de,!1),window.removeEventListener("mousedown",oe,!1),window.removeEventListener("mouseup",ce,!1),window.removeEventListener("mousemove",pe,!1),gt.removeEventListener("mouseenter",We,!1),gt.removeEventListener("mouseleave",Ve,!1),gt.removeEventListener("click",he,!1),gt.removeEventListener("dblclick",fe,!1),gt=void 0,Z=void 0,Mt=void 0,Q.destroy(),K.dispose(),Y.clear(),Xt.destroy()},draw:ze,get:function(t){return"background"===t?dt:"backgroundImage"===t?vt:"colorBy"===t?Nt:"colors"===t?yt:"lassoColor"===t?Bt:"showRecticle"===t?It:"recticleColor"===t?zt:"opacity"===t?$t:"pointOutlineWidth"===t?jt:"pointSize"===t?xt:"pointSizeSelected"===t?_t:"width"===t?mt:"height"===t?bt:"aspectRatio"===t?Tt:"canvas"===t?gt:"regl"===t?Mt:"version"===t?"0.0.1":void 0},hover:Ne,refresh:De,reset:(pt=function(){X?Z.set(b(X)):Z.lookAt(y(q),V,$),Y.publish("view",Z.view)},function(){var t=pt.apply(void 0,arguments);return ze(),t}),select:te,set:Fe,subscribe:Y.subscribe,unsubscribe:Y.unsubscribe,setWingletsOptions:function(t){Xt.setOptions(t)}}}}).call(this,n(12),n(105)(t))},96:function(t,e,n){t.exports=n(133)}},[[96,1,2]]]);
//# sourceMappingURL=main.b00e14ee.chunk.js.map